"use strict";exports.id=9949,exports.ids=[9949],exports.modules={48020:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>Breadcrumb});class Breadcrumb{constructor(text,url){this.text=text,this.url=url}}},86026:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>browseByGuard});var _angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(25376),_angular_router__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(18134),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2385),rxjs__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9238),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(60444),_app_routing_paths__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(31788),_core_browse_browse_definition_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(34420),_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(39022),_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2794);const browseByGuard=(route,state,browseDefinitionService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.WQX)(_core_browse_browse_definition_data_service__WEBPACK_IMPORTED_MODULE_1__.BrowseDefinitionDataService),router=(0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.WQX)(_angular_router__WEBPACK_IMPORTED_MODULE_4__.Ix),translate=(0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.WQX)(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_5__.c$))=>{const title=route.data.title,id=route.params.id||route.queryParams.id||route.data.id;let browseDefinition$;browseDefinition$=(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.Tn)(route.data.browseDefinition)&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(id)?browseDefinitionService.findById(id).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.Tj)(browseDefinitionRD=>browseDefinitionRD.payload)):(0,rxjs__WEBPACK_IMPORTED_MODULE_8__.of)(route.data.browseDefinition);const scope=route.queryParams.scope??route.parent?.params.id,value=route.queryParams.value,metadataTranslated=translate.instant(`browse.metadata.${id}`);return browseDefinition$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.nx)(browseDefinition=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(browseDefinition)?(route.data=function createData(title,id,browseDefinition,field,value,route,scope){return Object.assign({},route.data,{title,id,browseDefinition,field,value:(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(value)?`"${value}"`:"",scope})}(title,id,browseDefinition,metadataTranslated,value,route,scope),(0,rxjs__WEBPACK_IMPORTED_MODULE_8__.of)(!0)):(router.navigate([_app_routing_paths__WEBPACK_IMPORTED_MODULE_0__.RD]),(0,rxjs__WEBPACK_IMPORTED_MODULE_8__.of)(!1))))}},2077:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>browseByI18nBreadcrumbResolver});var _core_breadcrumbs_i18n_breadcrumb_resolver__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12213);const browseByI18nBreadcrumbResolver=(route,state)=>(route.data=Object.assign({},route.data,{breadcrumbKey:route.data.breadcrumbKey+"."+route.params.id}),(0,_core_breadcrumbs_i18n_breadcrumb_resolver__WEBPACK_IMPORTED_MODULE_0__.S)(route,state))},19949:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ROUTES:()=>ROUTES});var i18n_breadcrumb_resolver=__webpack_require__(12213),core=__webpack_require__(25376),operators=__webpack_require__(60444),app_routing_paths=__webpack_require__(31788),dso_breadcrumbs_service=__webpack_require__(21408),dspace_object_data_service=__webpack_require__(98944),shared_operators=__webpack_require__(39022),empty_util=__webpack_require__(2794),common=__webpack_require__(87514),ngx_translate_core=__webpack_require__(2385),cjs=__webpack_require__(9238),environment=__webpack_require__(64369),search_service=__webpack_require__(58807),search_configuration_service=__webpack_require__(11013),router=__webpack_require__(18134);const BrowseByGeospatialDataComponent_Defer_5_DepsFn=()=>[common.Jj,__webpack_require__.e(875).then(__webpack_require__.bind(__webpack_require__,875)).then(m=>m.GeospatialMapComponent)];function BrowseByGeospatialDataComponent_Defer_4_Template(rf,ctx){if(1&rf&&(core.nrm(0,"ds-geospatial-map",1),core.nI1(1,"async")),2&rf){const ctx_r0=core.XpG();core.Y8G("facetValues",ctx_r0.facetValues$)("currentScope",core.bMT(1,3,ctx_r0.scope$))("layout","browse")}}let BrowseByGeospatialDataComponent=(()=>{class BrowseByGeospatialDataComponent2{constructor(searchConfigurationService,searchService,route){this.searchConfigurationService=searchConfigurationService,this.searchService=searchService,this.route=route,this.isPlatformBrowser=common.UE,this.facetValues$=(0,cjs.of)(null)}ngOnInit(){this.scope$=this.route.queryParams.pipe((0,operators.Tj)(params=>params.scope)),this.facetValues$=this.getFacetValues()}getFacetValues(){return(0,cjs.combineLatest)([this.scope$,this.searchConfigurationService.getConfig("",environment.c.geospatialMapViewer.spatialFacetDiscoveryConfiguration).pipe((0,shared_operators.qD)(),(0,shared_operators.ak)(),(0,operators.pb)(searchFilterConfigs=>(0,empty_util.a4)(searchFilterConfigs)),(0,operators.s)(1),(0,operators.Tj)(searchFilterConfigs=>searchFilterConfigs[0]),(0,operators.pb)(searchFilterConfig=>(0,empty_util.a4)(searchFilterConfig)))]).pipe((0,operators.nx)(([scope,searchFilterConfig])=>{searchFilterConfig.pageSize=99999;const searchOptions=Object.assign({configuration:environment.c.geospatialMapViewer.spatialFacetDiscoveryConfiguration,scope,facetLimit:99999});return this.searchService.getFacetValuesFor(searchFilterConfig,1,searchOptions,null,!0)}),(0,shared_operators.qD)(),(0,shared_operators.ak)())}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||BrowseByGeospatialDataComponent2)(core.rXU(search_configuration_service.g),core.rXU(search_service.S),core.rXU(router.nX))}}static{this.\u0275cmp=core.VBU({type:BrowseByGeospatialDataComponent2,selectors:[["ds-browse-by-geospatial-data"]],standalone:!0,features:[core.aNF],decls:7,vars:3,consts:[[1,"container"],[2,"width","100%",3,"facetValues","currentScope","layout"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0)(1,"h1"),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.DNE(4,BrowseByGeospatialDataComponent_Defer_4_Template,2,5),core.nv$(5,4,BrowseByGeospatialDataComponent_Defer_5_DepsFn),core.g25(),core.k0s()),2&rf&&(core.R7$(2),core.JRh(core.bMT(3,1,"browse.metadata.map")))},dependencies:[ngx_translate_core.h,ngx_translate_core.D9],changeDetection:0})}}return BrowseByGeospatialDataComponent2})();var browse_by_guard=__webpack_require__(86026),browse_by_i18n_breadcrumb_resolver=__webpack_require__(2077),browse_by_switcher_component=__webpack_require__(58006);const ROUTES=[{path:"",resolve:{breadcrumb:(route,state,breadcrumbService=(0,core.WQX)(dso_breadcrumbs_service.U),dataService=(0,core.WQX)(dspace_object_data_service.DSpaceObjectDataService))=>{const uuid=route.queryParams.scope;if((0,empty_util.a4)(uuid))return dataService.findById(uuid).pipe((0,shared_operators.yd)(),(0,shared_operators.Bo)(),(0,operators.Tj)(object=>({provider:breadcrumbService,key:object,url:(0,app_routing_paths.wN)(object)})))}},children:[{path:"map",component:BrowseByGeospatialDataComponent,resolve:{breadcrumb:i18n_breadcrumb_resolver.S},data:{title:"browse.map.page",breadcrumbKey:"browse.metadata.map"}},{path:":id",component:(()=>{class BrowseByPageComponent2{constructor(route){this.route=route}ngOnInit(){this.browseByType$=this.route.data.pipe((0,operators.Tj)(data=>({type:data.browseDefinition.getRenderType()})))}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||BrowseByPageComponent2)(core.rXU(router.nX))}}static{this.\u0275cmp=core.VBU({type:BrowseByPageComponent2,selectors:[["ds-browse-by-page"]],standalone:!0,features:[core.aNF],decls:3,vars:3,consts:[[1,"container"],[3,"browseByType"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0),core.nrm(1,"ds-browse-by-switcher",1),core.nI1(2,"async"),core.k0s()),2&rf&&(core.R7$(),core.Y8G("browseByType",core.bMT(2,1,ctx.browseByType$)))},dependencies:[common.Jj,browse_by_switcher_component.e]})}}return BrowseByPageComponent2})(),canActivate:[browse_by_guard.h],resolve:{breadcrumb:browse_by_i18n_breadcrumb_resolver.p},data:{title:"browse.title.page",breadcrumbKey:"browse.metadata"}}]}]},58006:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>BrowseBySwitcherComponent}),__webpack_require__(21571);var _shared_abstract_component_loader_abstract_component_loader_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(36021),_shared_abstract_component_loader_dynamic_component_loader_directive__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(48872),_browse_by_decorator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(25788),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(25376);function BrowseBySwitcherComponent_ng_template_0_Template(rf,ctx){}let BrowseBySwitcherComponent=(()=>{class BrowseBySwitcherComponent2 extends _shared_abstract_component_loader_abstract_component_loader_component__WEBPACK_IMPORTED_MODULE_1__.e{constructor(){super(...arguments),this.inputNamesDependentForComponent=["context","browseByType"],this.inputNames=["context","browseByType","displayTitle","scope"]}getComponent(){return(0,_browse_by_decorator__WEBPACK_IMPORTED_MODULE_2__.cv)(this.browseByType.type,this.context,this.themeService.getThemeName())}static{this.\u0275fac=(()=>{let \u0275BrowseBySwitcherComponent_BaseFactory;return function(__ngFactoryType__){return(\u0275BrowseBySwitcherComponent_BaseFactory||(\u0275BrowseBySwitcherComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_3__.xGo(BrowseBySwitcherComponent2)))(__ngFactoryType__||BrowseBySwitcherComponent2)}})()}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_3__.VBU({type:BrowseBySwitcherComponent2,selectors:[["ds-browse-by-switcher"]],inputs:{context:"context",browseByType:"browseByType",displayTitle:"displayTitle",scope:"scope"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_3__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_3__.aNF],decls:2,vars:0,consts:[["DynamicComponentLoader",""],["dsDynamicComponentLoader",""]],template:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_3__.DNE(0,BrowseBySwitcherComponent_ng_template_0_Template,0,0,"ng-template",1,0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.C5r)},dependencies:[_shared_abstract_component_loader_dynamic_component_loader_directive__WEBPACK_IMPORTED_MODULE_4__.z],encapsulation:2})}}return BrowseBySwitcherComponent2})()},21408:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>DSOBreadcrumbsService});var rxjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(9238),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(60444),_app_routing_paths__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(31788),_breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(48020),_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2794),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(76715),_cache_builders_link_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(14160),_dso_name_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(11481),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(25376);let DSOBreadcrumbsService=(()=>{class DSOBreadcrumbsService2{constructor(linkService,dsoNameService){this.linkService=linkService,this.dsoNameService=dsoNameService}getBreadcrumbs(key,url){const label=this.dsoNameService.getName(key),crumb=new _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_3__.Q(label,url),propertyName=key.getParentLinkKey();return this.linkService.resolveLink(key,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__.s)(propertyName))[propertyName].pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.I6)(parentRD=>parentRD.hasSucceeded||204===parentRD.statusCode),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.nx)(parentRD=>{if((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(parentRD)&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(parentRD.payload)){const parent=parentRD.payload;return this.getBreadcrumbs(parent,(0,_app_routing_paths__WEBPACK_IMPORTED_MODULE_0__.wN)(parent))}return(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)([])}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.Tj)(breadcrumbs=>[...breadcrumbs,crumb]))}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||DSOBreadcrumbsService2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_cache_builders_link_service__WEBPACK_IMPORTED_MODULE_1__._),_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_dso_name_service__WEBPACK_IMPORTED_MODULE_2__.f))}}static{this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_8__.jDH({token:DSOBreadcrumbsService2,factory:DSOBreadcrumbsService2.\u0275fac,providedIn:"root"})}}return DSOBreadcrumbsService2})()},12213:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>i18nBreadcrumbResolver});var core=__webpack_require__(25376),empty_util=__webpack_require__(2794),route_utils=__webpack_require__(93359),cjs=__webpack_require__(9238),breadcrumb_model=__webpack_require__(48020);let I18nBreadcrumbsService=(()=>{class I18nBreadcrumbsService2{getBreadcrumbs(key,url){return(0,cjs.of)([new breadcrumb_model.Q(key+".breadcrumbs",url)])}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||I18nBreadcrumbsService2)}}static{this.\u0275prov=core.jDH({token:I18nBreadcrumbsService2,factory:I18nBreadcrumbsService2.\u0275fac,providedIn:"root"})}}return I18nBreadcrumbsService2})();const i18nBreadcrumbResolver=(route,state,breadcrumbService=(0,core.WQX)(I18nBreadcrumbsService))=>{const key=route.data.breadcrumbKey;if((0,empty_util.Tn)(key))throw new Error('You provided an i18nBreadcrumbResolver for url "'+route.url+"\" but no breadcrumbKey in the route's data");return{provider:breadcrumbService,key,url:(0,route_utils.F)(route)}}}};