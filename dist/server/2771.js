exports.id=2771,exports.ids=[2771,7708,4653,5327],exports.modules={48020:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Q:()=>Breadcrumb});class Breadcrumb{constructor(text,url){this.text=text,this.url=url}}},92200:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{G:()=>DSOBreadcrumbResolver,o:()=>DSOBreadcrumbResolverByUuid});var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(60444),_app_routing_paths__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(31788),_shared_empty_util__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2794),_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(39022);const DSOBreadcrumbResolver=(route,state,breadcrumbService,dataService,...linksToFollow)=>DSOBreadcrumbResolverByUuid(route,state,route.params.id,breadcrumbService,dataService,...linksToFollow),DSOBreadcrumbResolverByUuid=(route,state,uuid,breadcrumbService,dataService,...linksToFollow)=>dataService.findById(uuid,!0,!1,...linksToFollow).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_1__.qD)(),(0,_shared_operators__WEBPACK_IMPORTED_MODULE_1__.Bo)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.Tj)(object=>{if((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_3__.a4)(object))return{provider:breadcrumbService,key:object,url:(0,_app_routing_paths__WEBPACK_IMPORTED_MODULE_0__.wN)(object)}}))},21408:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>DSOBreadcrumbsService});var rxjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(9238),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(60444),_app_routing_paths__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(31788),_breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(48020),_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2794),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(76715),_cache_builders_link_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(14160),_dso_name_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(11481),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(25376);let DSOBreadcrumbsService=(()=>{class DSOBreadcrumbsService2{constructor(linkService,dsoNameService){this.linkService=linkService,this.dsoNameService=dsoNameService}getBreadcrumbs(key,url){const label=this.dsoNameService.getName(key),crumb=new _breadcrumbs_breadcrumb_breadcrumb_model__WEBPACK_IMPORTED_MODULE_3__.Q(label,url),propertyName=key.getParentLinkKey();return this.linkService.resolveLink(key,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__.s)(propertyName))[propertyName].pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.I6)(parentRD=>parentRD.hasSucceeded||204===parentRD.statusCode),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.nx)(parentRD=>{if((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(parentRD)&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(parentRD.payload)){const parent=parentRD.payload;return this.getBreadcrumbs(parent,(0,_app_routing_paths__WEBPACK_IMPORTED_MODULE_0__.wN)(parent))}return(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)([])}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.Tj)(breadcrumbs=>[...breadcrumbs,crumb]))}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||DSOBreadcrumbsService2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_cache_builders_link_service__WEBPACK_IMPORTED_MODULE_1__._),_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_dso_name_service__WEBPACK_IMPORTED_MODULE_2__.f))}}static{this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_8__.jDH({token:DSOBreadcrumbsService2,factory:DSOBreadcrumbsService2.\u0275fac,providedIn:"root"})}}return DSOBreadcrumbsService2})()},47339:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{L:()=>dsoPageSingleFeatureGuard});var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(60444),_dso_page_some_feature_guard__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(48827);const dsoPageSingleFeatureGuard=(getResolveFn,getFeatureID)=>(0,_dso_page_some_feature_guard__WEBPACK_IMPORTED_MODULE_0__.FO)(getResolveFn,(route,state)=>getFeatureID(route,state).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.Tj)(featureID=>[featureID])))},48827:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{FO:()=>dsoPageSomeFeatureGuard});var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(60444),_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2794),_shared_operators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(39022),_some_feature_authorization_guard__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(52884);const defaultDSOGetObjectUrl=resolve=>(route,state)=>{const routeWithObjectID=(route=>{let routeWithDSOId=route;for(;(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.Tn)(routeWithDSOId.params.id)&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.a4)(routeWithDSOId.parent);)routeWithDSOId=routeWithDSOId.parent;return routeWithDSOId})(route);return resolve(routeWithObjectID,state).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_0__.Hz)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.Tj)(dso=>dso.self))},dsoPageSomeFeatureGuard=(getResolveFn,getFeatureIDs,getObjectUrl=defaultDSOGetObjectUrl,getEPersonUuid)=>(0,_some_feature_authorization_guard__WEBPACK_IMPORTED_MODULE_1__.h)((route,state)=>getFeatureIDs(route,state),getObjectUrl(getResolveFn()),getEPersonUuid)},43413:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{W:()=>ItemRequestDataService});var _angular_common_http__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(98465),rxjs_operators__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(60444),_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(2794),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(80996),_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(99629),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(63311),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(26139),_shared_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(39022),_shared_request_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(40413),_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(61640),_base_search_data__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(98861),_configuration_data_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(93876),_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(76509),_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(86583),_find_list_options_model__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(72248),_request_models__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(99381),_request_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(64806),_angular_core__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(25376);let ItemRequestDataService=(()=>{class ItemRequestDataService2 extends _base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_4__.W{constructor(requestService,rdbService,objectCache,halService,configService,authorizationService){super("itemrequests",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.configService=configService,this.authorizationService=authorizationService,this.searchData=new _base_search_data__WEBPACK_IMPORTED_MODULE_5__.X(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive)}getItemRequestEndpoint(){return this.halService.getEndpoint(this.linkPath)}getItemRequestEndpointByToken(token){return this.halService.getEndpoint(this.linkPath).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.pb)(href=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__.hj)(href)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.Tj)(href=>`${href}/${token}`))}requestACopy(itemRequest,captchaPayload){const requestId=this.requestService.generateRequestId(),href$=this.getItemRequestEndpoint(),options=Object.create({});if(captchaPayload){let headers=new _angular_common_http__WEBPACK_IMPORTED_MODULE_13__.Lr;headers=headers.set("x-captcha-payload",captchaPayload),options.headers=headers}return href$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.I6)(href=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_12__.a4)(href)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.Tj)(href=>{const request=new _request_models__WEBPACK_IMPORTED_MODULE_9__.Qf(requestId,href,itemRequest,options);this.requestService.send(request,!1)})).subscribe(),this.rdbService.buildFromRequestUUID(requestId).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.qD)())}deny(token,email){return this.process(token,email,!1)}grant(token,email,suggestOpenAccess=!1,accessPeriod=null){return this.process(token,email,!0,suggestOpenAccess,accessPeriod)}process(token,email,grant,suggestOpenAccess=!1,accessPeriod=null){const requestId=this.requestService.generateRequestId();return this.getItemRequestEndpointByToken(token).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.F)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.Tj)(endpointURL=>{const options=Object.create({});let headers=new _angular_common_http__WEBPACK_IMPORTED_MODULE_13__.Lr;return headers=headers.append("Content-Type","application/json"),options.headers=headers,new _request_models__WEBPACK_IMPORTED_MODULE_9__.v_(requestId,endpointURL,JSON.stringify({acceptRequest:grant,responseMessage:email.message,subject:email.subject,suggestOpenAccess,accessPeriod}),options)}),(0,_shared_request_operators__WEBPACK_IMPORTED_MODULE_14__.w$)(this.requestService)).subscribe(),this.rdbService.buildFromRequestUUID(requestId)}getSanitizedRequestByAccessToken(accessToken){const findListOptions=Object.assign({},new _find_list_options_model__WEBPACK_IMPORTED_MODULE_15__._,{searchParams:[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("accessToken",accessToken)]}),hrefObs=this.getSearchByHref("byAccessToken",findListOptions);return this.searchData.findByHref(hrefObs)}searchBy(searchMethod,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow){return this.searchData.searchBy(searchMethod,options,useCachedVersionIfAvailable,reRequestOnStale)}getConfiguredAccessPeriods(){return this.configService.findByPropertyName("request.item.grant.link.period").pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.Tj)(propertyRD=>propertyRD.hasSucceeded?propertyRD.payload.values:[]))}isProtectedByCaptcha(){return this.configService.findByPropertyName("request.item.create.captcha").pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_11__.Tj)(rd=>!!rd.hasSucceeded&&rd.payload.values.length>0&&"true"===rd.payload.values[0]))}getSearchByHref(searchMethod,options,...linksToFollow){return this.searchData.getSearchByHref(searchMethod,options,...linksToFollow)}canDownload(bitstream){return this.authorizationService.isAuthorized(_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_8__._.CanDownload,bitstream?.self)}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ItemRequestDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_17__.KVO(_request_service__WEBPACK_IMPORTED_MODULE_10__.B),_angular_core__WEBPACK_IMPORTED_MODULE_17__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_17__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_17__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_17__.KVO(_configuration_data_service__WEBPACK_IMPORTED_MODULE_6__.ConfigurationDataService),_angular_core__WEBPACK_IMPORTED_MODULE_17__.KVO(_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_7__.AuthorizationDataService))}}static{this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_17__.jDH({token:ItemRequestDataService2,factory:ItemRequestDataService2.\u0275fac,providedIn:"root"})}}return ItemRequestDataService2})()},55327:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{NotifyRequestsStatusDataService:()=>NotifyRequestsStatusDataService});var rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(9238),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(80996),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(63311),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(26139),_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(61640),_request_models__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(99381),_request_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(64806),_angular_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(25376);let NotifyRequestsStatusDataService=(()=>{class NotifyRequestsStatusDataService2 extends _base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_3__.W{constructor(requestService,rdbService,objectCache,halService){super("notifyrequests",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService}getNotifyRequestsStatus(itemUuid){const href$=this.getEndpoint().pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.map)(url=>url+"/"+itemUuid));return href$.pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_6__.take)(1)).subscribe(url=>{const request=new _request_models__WEBPACK_IMPORTED_MODULE_4__.IP(this.requestService.generateRequestId(),url);this.requestService.send(request,!0)}),this.rdbService.buildFromHref(href$)}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||NotifyRequestsStatusDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_request_service__WEBPACK_IMPORTED_MODULE_5__.B),_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_2__.Y))}}static{this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_7__.jDH({token:NotifyRequestsStatusDataService2,factory:NotifyRequestsStatusDataService2.\u0275fac,providedIn:"root"})}}return NotifyRequestsStatusDataService2})()},43457:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{z:()=>SignpostingDataService});var rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(9238),rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(60444),_config_app_config_interface__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3339),_dspace_rest_dspace_rest_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(231),_angular_core__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(25376);let SignpostingDataService=(()=>{class SignpostingDataService2{constructor(appConfig,restService){this.appConfig=appConfig,this.restService=restService}getLinks(uuid){return this.restService.get(`${this.appConfig.rest.baseUrl}/signposting/links/${uuid}`).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.WL)(err=>(0,rxjs__WEBPACK_IMPORTED_MODULE_3__.of)([])),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.Tj)(res=>200===res.statusCode?res.payload:[]))}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||SignpostingDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_4__.KVO(_config_app_config_interface__WEBPACK_IMPORTED_MODULE_0__.vQ),_angular_core__WEBPACK_IMPORTED_MODULE_4__.KVO(_dspace_rest_dspace_rest_service__WEBPACK_IMPORTED_MODULE_1__.Y))}}static{this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_4__.jDH({token:SignpostingDataService2,factory:SignpostingDataService2.\u0275fac,providedIn:"root"})}}return SignpostingDataService2})()},51852:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{r:()=>OrcidAuthService});var rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9238),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(60444),_shared_empty_util__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2794),_data_configuration_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(93876),_profile_researcher_profile_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(70647),_services_window_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(97497),_shared_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(39022),_url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(51202),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(25376),_angular_router__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(18134);let OrcidAuthService=(()=>{class OrcidAuthService2{constructor(_window,configurationService,researcherProfileService,router){this._window=_window,this.configurationService=configurationService,this.researcherProfileService=researcherProfileService,this.router=router}isLinkedToOrcid(item){return item.hasMetadata("dspace.orcid.authenticated")}onlyAdminCanDisconnectProfileFromOrcid(){return this.getOrcidDisconnectionAllowedUsersConfiguration().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.Tj)(propertyRD=>propertyRD.hasSucceeded&&propertyRD.payload.values.map(value=>value.toLowerCase()).includes("only_admin")))}ownerCanDisconnectProfileFromOrcid(){return this.getOrcidDisconnectionAllowedUsersConfiguration().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.Tj)(propertyRD=>propertyRD.hasSucceeded&&propertyRD.payload.values.map(value=>value.toLowerCase()).includes("admin_and_owner")))}linkOrcidByItem(person,code){const operations=[{path:"/orcid",op:"add",value:code}];return this.researcherProfileService.findById(person.firstMetadata("dspace.object.owner").authority).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.nx)(profileRD=>this.researcherProfileService.patch(profileRD.payload,operations)))}unlinkOrcidByItem(person){const operations=[{path:"/orcid",op:"remove"}];return this.researcherProfileService.findById(person.firstMetadata("dspace.object.owner").authority).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.nx)(profileRD=>this.researcherProfileService.patch(profileRD.payload,operations)))}getOrcidAuthorizeUrl(profile){return(0,rxjs__WEBPACK_IMPORTED_MODULE_5__.combineLatest)([this.configurationService.findByPropertyName("orcid.authorize-url").pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.ak)()),this.configurationService.findByPropertyName("orcid.application-client-id").pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.ak)()),this.configurationService.findByPropertyName("orcid.scope").pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.ak)())]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.Tj)(([authorizeUrl,clientId,scopes])=>{const redirectUri=new _url_combiner_url_combiner__WEBPACK_IMPORTED_MODULE_6__.t(this._window.nativeWindow.origin,encodeURIComponent(this.router.url.split("?")[0]));return authorizeUrl.values[0]+"?client_id="+clientId.values[0]+"&redirect_uri="+redirectUri+"&response_type=code&scope="+scopes.values.join(" ")}))}getOrcidAuthorizationScopesByItem(item){return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_7__.hj)(item)?item.allMetadataValues("dspace.orcid.scope"):[]}getOrcidAuthorizationScopes(){return this.configurationService.findByPropertyName("orcid.scope").pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.Tj)(propertyRD=>propertyRD.hasSucceeded?propertyRD.payload.values:[]))}getOrcidDisconnectionAllowedUsersConfiguration(){return this.configurationService.findByPropertyName("orcid.disconnection.allowed-users").pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_3__.qD)())}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||OrcidAuthService2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_services_window_service__WEBPACK_IMPORTED_MODULE_2__.lc),_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_data_configuration_data_service__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDataService),_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_profile_researcher_profile_data_service__WEBPACK_IMPORTED_MODULE_1__.ResearcherProfileDataService),_angular_core__WEBPACK_IMPORTED_MODULE_8__.KVO(_angular_router__WEBPACK_IMPORTED_MODULE_9__.Ix))}}static{this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_8__.jDH({token:OrcidAuthService2,factory:OrcidAuthService2.\u0275fac,providedIn:"root"})}}return OrcidAuthService2})()},4653:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{OrcidHistoryDataService:()=>OrcidHistoryDataService});var _angular_common_http__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(98465),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(60444),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(80996),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(63311),_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(61640),_data_request_models__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(99381),_data_request_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(64806),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(26139),_shared_request_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(40413),_angular_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(25376);let OrcidHistoryDataService=(()=>{class OrcidHistoryDataService2 extends _data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_2__.W{constructor(requestService,rdbService,objectCache,halService){super("orcidhistories",requestService,rdbService,objectCache,halService,1e4),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService}sendToORCID(orcidQueue){const requestId=this.requestService.generateRequestId();return this.getEndpoint().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.Tj)(endpointURL=>{const options=Object.create({});let headers=new _angular_common_http__WEBPACK_IMPORTED_MODULE_7__.Lr;return headers=headers.append("Content-Type","text/uri-list"),options.headers=headers,new _data_request_models__WEBPACK_IMPORTED_MODULE_3__.Qf(requestId,endpointURL,orcidQueue._links.self.href,options)}),(0,_shared_request_operators__WEBPACK_IMPORTED_MODULE_8__.w$)(this.requestService),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.nx)(request=>this.rdbService.buildFromRequestUUID(request.uuid)))}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||OrcidHistoryDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_data_request_service__WEBPACK_IMPORTED_MODULE_4__.B),_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_5__.Y))}}static{this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_9__.jDH({token:OrcidHistoryDataService2,factory:OrcidHistoryDataService2.\u0275fac,providedIn:"root"})}}return OrcidHistoryDataService2})()},15327:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{OrcidQueueDataService:()=>OrcidQueueDataService});var _shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(76623),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(80996),_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(99629),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(63311),_data_base_delete_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(92788),_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(61640),_data_base_search_data__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(98861),_data_request_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(64806),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(26139),_angular_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(25376);let OrcidQueueDataService=(()=>{class OrcidQueueDataService2 extends _data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_4__.W{constructor(requestService,rdbService,objectCache,halService,notificationsService){super("orcidqueues",requestService,rdbService,objectCache,halService,1e4),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.notificationsService=notificationsService,this.searchData=new _data_base_search_data__WEBPACK_IMPORTED_MODULE_5__.X(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive),this.deleteData=new _data_base_delete_data__WEBPACK_IMPORTED_MODULE_3__.I(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive,this.constructIdEndpoint)}searchByProfileItemId(itemId,paginationOptions,useCachedVersionIfAvailable=!0,reRequestOnStale=!0){return this.searchData.searchBy("findByProfileItem",{searchParams:[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_8__.x("profileItemId",itemId)],elementsPerPage:paginationOptions.pageSize,currentPage:paginationOptions.currentPage},useCachedVersionIfAvailable,reRequestOnStale)}deleteById(orcidQueueId){return this.deleteData.delete(orcidQueueId.toString())}clearFindByProfileItemRequests(){this.requestService.setStaleByHrefSubstring(this.linkPath+"/search/findByProfileItem")}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||OrcidQueueDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_data_request_service__WEBPACK_IMPORTED_MODULE_6__.B),_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__.o),_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__.$),_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_7__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_9__.KVO(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__.I))}}static{this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_9__.jDH({token:OrcidQueueDataService2,factory:OrcidQueueDataService2.\u0275fac,providedIn:"root"})}}return OrcidQueueDataService2})()},14998:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{j:()=>ResolvedAction});const ResolverActionTypes={RESOLVED:(0,__webpack_require__(29841).N)("dspace/resolver/RESOLVED")};class ResolvedAction{constructor(url,dso){this.type=ResolverActionTypes.RESOLVED,this.payload={url,dso}}}},97063:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ItemAlertsComponent:()=>ItemAlertsComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(87514),_angular_router__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(18134),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(2385),rxjs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(9238),src_app_core_shared_operators__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(39022),_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(76509),_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(86583),_core_submission_correctiontype_data_service__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(43575),__webpack_require__(45736)),_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6213),_shared_alert_alert_type__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(83113),_shared_dso_page_dso_withdrawn_reinstate_service_dso_withdrawn_reinstate_modal_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(61780),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(25376);function ItemAlertsComponent_Conditional_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nrm(1,"ds-alert",2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("type",ctx_r0.AlertTypeEnum.Warning)("content",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(2,2,"item.alerts.private"))}}function ItemAlertsComponent_Conditional_2_Conditional_10_Template(rf,ctx){if(1&rf){const _r2=_angular_core__WEBPACK_IMPORTED_MODULE_8__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"a",9),_angular_core__WEBPACK_IMPORTED_MODULE_8__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_8__.eBV(_r2);const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_8__.Njj(ctx_r0.openReinstateModal())}),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(2,1,"item.alerts.reinstate-request")))}function ItemAlertsComponent_Conditional_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div",1)(1,"ds-alert",3)(2,"div",4)(3,"span",5),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(4),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(5,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(6,"div",6)(7,"a",7),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(8),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(9,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(10,ItemAlertsComponent_Conditional_2_Conditional_10_Template,3,3,"a",8),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(11,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()()()()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("type",ctx_r0.AlertTypeEnum.Warning),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_8__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(5,4,"item.alerts.withdrawn")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_8__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(9,6,"404.link.home-page")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.vxM(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(11,8,ctx_r0.showReinstateButton$)?10:-1)}}let ItemAlertsComponent=(()=>{class ItemAlertsComponent2{constructor(authService,dsoWithdrawnReinstateModalService,correctionTypeDataService){this.authService=authService,this.dsoWithdrawnReinstateModalService=dsoWithdrawnReinstateModalService,this.correctionTypeDataService=correctionTypeDataService,this.AlertTypeEnum=_shared_alert_alert_type__WEBPACK_IMPORTED_MODULE_6__.v}ngOnChanges(changes){changes.item?.currentValue.withdrawn&&this.showReinstateButton$&&(this.showReinstateButton$=this.shouldShowReinstateButton())}shouldShowReinstateButton(){const correction$=this.correctionTypeDataService.findByItem(this.item.uuid,!0).pipe((0,src_app_core_shared_operators__WEBPACK_IMPORTED_MODULE_0__.qD)(),(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.map)(correctionTypeRD=>correctionTypeRD.hasSucceeded?correctionTypeRD.payload.page:[])),isAdmin$=this.authService.isAuthorized(_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_2__._.AdministratorOf);return(0,rxjs__WEBPACK_IMPORTED_MODULE_9__.combineLatest)([isAdmin$,correction$]).pipe((0,rxjs__WEBPACK_IMPORTED_MODULE_9__.map)(([isAdmin,correction])=>!isAdmin&&correction.some(correctionType=>correctionType.topic===_shared_dso_page_dso_withdrawn_reinstate_service_dso_withdrawn_reinstate_modal_service__WEBPACK_IMPORTED_MODULE_7__.el)))}openReinstateModal(){this.dsoWithdrawnReinstateModalService.openCreateWithdrawnReinstateModal(this.item,"request-reinstate",this.item.isArchived)}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ItemAlertsComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__.AuthorizationDataService),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_shared_dso_page_dso_withdrawn_reinstate_service_dso_withdrawn_reinstate_modal_service__WEBPACK_IMPORTED_MODULE_7__.Ee),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_submission_correctiontype_data_service__WEBPACK_IMPORTED_MODULE_4__.CorrectionTypeDataService))}}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_8__.VBU({type:ItemAlertsComponent2,selectors:[["ds-base-item-alerts"]],inputs:{item:"item"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_8__.OA$,_angular_core__WEBPACK_IMPORTED_MODULE_8__.aNF],decls:3,vars:2,consts:[[1,"private-warning"],[1,"withdrawn-warning"],[3,"type","content"],[3,"type"],[1,"d-flex","justify-content-between","flex-wrap"],[1,"align-self-center"],[1,"gap-2","d-flex"],["routerLink","/home","role","button","tabindex","0",1,"btn","btn-primary","btn-sm"],[1,"btn","btn-primary","btn-sm"],[1,"btn","btn-primary","btn-sm",3,"click"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(1,ItemAlertsComponent_Conditional_1_Template,3,4,"div",0)(2,ItemAlertsComponent_Conditional_2_Template,12,10,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.vxM(ctx.item&&!ctx.item.isDiscoverable?1:-1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.vxM(ctx.item&&ctx.item.isWithdrawn?2:-1))},dependencies:[_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_5__.C,_angular_common__WEBPACK_IMPORTED_MODULE_10__.Jj,_angular_router__WEBPACK_IMPORTED_MODULE_11__.Wk,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_12__.D9]})}}return ItemAlertsComponent2})()},26065:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{R:()=>ThemedItemAlertsComponent}),__webpack_require__(43575);var _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(79241),_angular_core__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(97063),__webpack_require__(25376));const _c0=["*"];function ThemedItemAlertsComponent_ng_template_0_Template(rf,ctx){}let ThemedItemAlertsComponent=(()=>{class ThemedItemAlertsComponent2 extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__.J{constructor(){super(...arguments),this.inAndOutputNames=["item"]}getComponentName(){return"ItemAlertsComponent"}importThemedComponent(themeName){return __webpack_require__(42176)(`./${themeName}/app/item-page/alerts/item-alerts.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,97063))}static{this.\u0275fac=(()=>{let \u0275ThemedItemAlertsComponent_BaseFactory;return function(__ngFactoryType__){return(\u0275ThemedItemAlertsComponent_BaseFactory||(\u0275ThemedItemAlertsComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_3__.xGo(ThemedItemAlertsComponent2)))(__ngFactoryType__||ThemedItemAlertsComponent2)}})()}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_3__.VBU({type:ThemedItemAlertsComponent2,selectors:[["ds-item-alerts"]],inputs:{item:"item"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_3__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_3__.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.NAR(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.DNE(0,ThemedItemAlertsComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.C5r),_angular_core__WEBPACK_IMPORTED_MODULE_3__.j41(2,"div",null,1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.SdG(4),_angular_core__WEBPACK_IMPORTED_MODULE_3__.k0s())},encapsulation:2})}}return ThemedItemAlertsComponent2})()},61143:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FullFileSectionComponent:()=>FullFileSectionComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(87514),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(2385),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(60444),src_config_app_config_interface__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3339),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(11481),_core_data_bitstream_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(94999),_core_pagination_pagination_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(31903),_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__=(__webpack_require__(43575),__webpack_require__(2794)),_shared_file_download_link_themed_file_download_link_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(85091),_shared_metadata_field_wrapper_metadata_field_wrapper_component__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(29095),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(76623),_shared_pagination_pagination_component__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(42191),_shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(54396),_shared_utils_file_size_pipe__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(41279),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(76715),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(17543),_thumbnail_themed_thumbnail_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1147),_simple_field_components_file_section_file_section_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(54992),_angular_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(25376);function FullFileSectionComponent_div_2_Conditional_1_Conditional_4_For_2_Conditional_23_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"dt",9),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(3,"dd",10),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(4),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const file_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(2,2,"item.page.filesection.description")," "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",file_r1.firstMetadataValue("dc.description")," ")}}function FullFileSectionComponent_div_2_Conditional_1_Conditional_4_For_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"div",4)(1,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nrm(2,"ds-thumbnail",6),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(4,"div",7)(5,"dl",8)(6,"dt",9),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(7),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(8,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(9,"dd",10),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(10),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(11,"dt",9),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(13,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(14,"dd",10),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(15),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(16,"dsFileSize"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(17,"dt",9),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(18),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(19,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(20,"dd",10),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(21),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(22,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(23,FullFileSectionComponent_div_2_Conditional_1_Conditional_4_For_2_Conditional_23_Template,5,4),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(24,"div",11)(25,"ds-file-download-link",12)(26,"span",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(27),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(28,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()()()()),2&rf){let tmp_14_0,tmp_20_0;const file_r1=ctx.$implicit,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("thumbnail",null==(tmp_14_0=_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(3,12,file_r1.thumbnail))?null:tmp_14_0.payload),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(8,14,"item.page.filesection.name")," "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(ctx_r1.dsoNameService.getName(file_r1)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(13,16,"item.page.filesection.size")," "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(16,18,file_r1.sizeBytes)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(19,20,"item.page.filesection.format")," "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",null==(tmp_20_0=_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(22,22,file_r1.format))||null==tmp_20_0.payload?null:tmp_20_0.payload.description," "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.vxM(file_r1.hasMetadata("dc.description")?23:-1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("showIcon",!0)("bitstream",file_r1)("item",ctx_r1.item),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(28,24,"item.page.filesection.download")," ")}}function FullFileSectionComponent_div_2_Conditional_1_Conditional_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"ds-pagination",3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Z7z(1,FullFileSectionComponent_div_2_Conditional_1_Conditional_4_For_2_Template,29,26,"div",4,_angular_core__WEBPACK_IMPORTED_MODULE_11__.fX1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const originals_r3=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG(2).ngVar,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",ctx_r1.originalOptions)("collectionSize",null==originals_r3?null:originals_r3.totalElements)("retainScrollPosition",!0),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Dyx(null==originals_r3?null:originals_r3.page)}}function FullFileSectionComponent_div_2_Conditional_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"div")(1,"h3",2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(4,FullFileSectionComponent_div_2_Conditional_1_Conditional_4_Template,3,5,"ds-pagination",3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const originals_r3=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(3,2,"item.page.filesection.original.bundle")," "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.vxM((null==originals_r3||null==originals_r3.page?null:originals_r3.page.length)>0?4:-1)}}function FullFileSectionComponent_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(1,FullFileSectionComponent_div_2_Conditional_1_Template,5,4,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const originals_r3=ctx.ngVar,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.vxM(ctx_r1.hasValuesInBundle(originals_r3)?1:-1)}}function FullFileSectionComponent_div_4_Conditional_1_Conditional_4_For_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"div",14)(1,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nrm(2,"ds-thumbnail",6),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(4,"div",7)(5,"dl",8)(6,"dt",9),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(7),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(8,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(9,"dd",10),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(10),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(11,"dt",9),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(12),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(13,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(14,"dd",10),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(15),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(16,"dsFileSize"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(17,"dt",9),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(18),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(19,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(20,"dd",10),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(21),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(22,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(23,"dt",9),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(24),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(25,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(26,"dd",10),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(27),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()()(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(28,"div",11)(29,"ds-file-download-link",12)(30,"span",13),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(31),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(32,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()()()()),2&rf){let tmp_14_0,tmp_20_0;const file_r4=ctx.$implicit,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG(4);_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("thumbnail",null==(tmp_14_0=_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(3,13,file_r4.thumbnail))?null:tmp_14_0.payload),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(5),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(8,15,"item.page.filesection.name")," "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(ctx_r1.dsoNameService.getName(file_r4)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(13,17,"item.page.filesection.size")," "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(16,19,file_r4.sizeBytes)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(19,21,"item.page.filesection.format")," "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",null==(tmp_20_0=_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(22,23,file_r4.format))||null==tmp_20_0.payload?null:tmp_20_0.payload.description," "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(25,25,"item.page.filesection.description")," "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",file_r4.firstMetadataValue("dc.description")," "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("showIcon",!0)("bitstream",file_r4)("item",ctx_r1.item),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(32,27,"item.page.filesection.download")," ")}}function FullFileSectionComponent_div_4_Conditional_1_Conditional_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"ds-pagination",3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Z7z(1,FullFileSectionComponent_div_4_Conditional_1_Conditional_4_For_2_Template,33,29,"div",14,_angular_core__WEBPACK_IMPORTED_MODULE_11__.fX1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const licenses_r5=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG(2).ngVar,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",ctx_r1.licenseOptions)("collectionSize",null==licenses_r5?null:licenses_r5.totalElements)("retainScrollPosition",!0),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Dyx(null==licenses_r5?null:licenses_r5.page)}}function FullFileSectionComponent_div_4_Conditional_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"div")(1,"h3",2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(4,FullFileSectionComponent_div_4_Conditional_1_Conditional_4_Template,3,5,"ds-pagination",3),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const licenses_r5=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(3,2,"item.page.filesection.license.bundle")," "),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.vxM((null==licenses_r5||null==licenses_r5.page?null:licenses_r5.page.length)>0?4:-1)}}function FullFileSectionComponent_div_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(1,FullFileSectionComponent_div_4_Conditional_1_Template,5,4,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){const licenses_r5=ctx.ngVar,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_11__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_11__.vxM(ctx_r1.hasValuesInBundle(licenses_r5)?1:-1)}}let FullFileSectionComponent=(()=>{class FullFileSectionComponent2 extends _simple_field_components_file_section_file_section_component__WEBPACK_IMPORTED_MODULE_10__.FileSectionComponent{constructor(bitstreamDataService,notificationsService,translateService,paginationService,dsoNameService,appConfig){super(bitstreamDataService,notificationsService,translateService,dsoNameService,appConfig),this.notificationsService=notificationsService,this.translateService=translateService,this.paginationService=paginationService,this.dsoNameService=dsoNameService,this.appConfig=appConfig,this.originalOptions=Object.assign(new _shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_12__.W,{id:"obo",currentPage:1,pageSize:this.appConfig.item.bitstream.pageSize}),this.licenseOptions=Object.assign(new _shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_12__.W,{id:"lbo",currentPage:1,pageSize:this.appConfig.item.bitstream.pageSize})}ngOnInit(){this.initialize()}initialize(){this.originals$=this.paginationService.getCurrentPagination(this.originalOptions.id,this.originalOptions).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.nx)(options=>this.bitstreamDataService.findAllByItemAndBundleName(this.item,"ORIGINAL",{elementsPerPage:options.pageSize,currentPage:options.currentPage},!0,!0,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("format"),(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("thumbnail"),(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("accessStatus"))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.Mi)(rd=>{(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__.a4)(rd.errorMessage)&&this.notificationsService.error(this.translateService.get("file-section.error.header"),`${rd.statusCode} ${rd.errorMessage}`)})),this.licenses$=this.paginationService.getCurrentPagination(this.licenseOptions.id,this.licenseOptions).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.nx)(options=>this.bitstreamDataService.findAllByItemAndBundleName(this.item,"LICENSE",{elementsPerPage:options.pageSize,currentPage:options.currentPage},!0,!0,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("format"),(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("thumbnail"),(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_14__.s)("accessStatus"))),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.Mi)(rd=>{(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__.a4)(rd.errorMessage)&&this.notificationsService.error(this.translateService.get("file-section.error.header"),`${rd.statusCode} ${rd.errorMessage}`)}))}hasValuesInBundle(bundle){return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__.a4)(bundle)&&!(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_15__.Im)(bundle.page)}ngOnDestroy(){this.paginationService.clearPagination(this.originalOptions.id),this.paginationService.clearPagination(this.licenseOptions.id)}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||FullFileSectionComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_11__.rXU(_core_data_bitstream_data_service__WEBPACK_IMPORTED_MODULE_2__.BitstreamDataService),_angular_core__WEBPACK_IMPORTED_MODULE_11__.rXU(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_6__.I),_angular_core__WEBPACK_IMPORTED_MODULE_11__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_16__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_11__.rXU(_core_pagination_pagination_service__WEBPACK_IMPORTED_MODULE_3__.m),_angular_core__WEBPACK_IMPORTED_MODULE_11__.rXU(_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_1__.f),_angular_core__WEBPACK_IMPORTED_MODULE_11__.rXU(src_config_app_config_interface__WEBPACK_IMPORTED_MODULE_0__.vQ))}}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_11__.VBU({type:FullFileSectionComponent2,selectors:[["ds-base-item-page-full-file-section"]],inputs:{item:"item"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_11__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_11__.aNF],decls:6,vars:9,consts:[[3,"label"],[4,"ngVar"],[1,"h5","simple-view-element-header"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition"],[1,"file-section","row","mb-3"],[1,"col-3"],[3,"thumbnail"],[1,"col-7"],[1,"row"],[1,"col-md-4"],[1,"col-md-8"],[1,"col-2"],["cssClasses","btn btn-outline-primary btn-download",3,"showIcon","bitstream","item"],[1,"d-none","d-md-inline"],[1,"file-section","row"]],template:function(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_11__.j41(0,"ds-metadata-field-wrapper",0),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(1,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(2,FullFileSectionComponent_div_2_Template,2,1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.DNE(4,FullFileSectionComponent_div_4_Template,2,1,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_11__.nI1(5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_11__.k0s()),2&rf){let tmp_1_0,tmp_2_0;_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("label",_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(1,3,ctx.label)),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngVar",null==(tmp_1_0=_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(3,5,ctx.originals$))?null:tmp_1_0.payload),_angular_core__WEBPACK_IMPORTED_MODULE_11__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_11__.Y8G("ngVar",null==(tmp_2_0=_angular_core__WEBPACK_IMPORTED_MODULE_11__.bMT(5,7,ctx.licenses$))?null:tmp_2_0.payload)}},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_17__.Jj,_shared_utils_file_size_pipe__WEBPACK_IMPORTED_MODULE_8__.s,_shared_metadata_field_wrapper_metadata_field_wrapper_component__WEBPACK_IMPORTED_MODULE_18__.Q,_shared_pagination_pagination_component__WEBPACK_IMPORTED_MODULE_7__.e,_shared_file_download_link_themed_file_download_link_component__WEBPACK_IMPORTED_MODULE_5__.z,_thumbnail_themed_thumbnail_component__WEBPACK_IMPORTED_MODULE_9__.T,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_16__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_16__.D9,_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_19__.r],styles:["@media screen and (min-width: 768px){dt[_ngcontent-%COMP%]{text-align:right}}"]})}}return FullFileSectionComponent2})()},61087:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{n:()=>ThemedFullFileSectionComponent}),__webpack_require__(43575);var _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(79241),_angular_core__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(61143),__webpack_require__(25376));const _c0=["*"];function ThemedFullFileSectionComponent_ng_template_0_Template(rf,ctx){}let ThemedFullFileSectionComponent=(()=>{class ThemedFullFileSectionComponent2 extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__.J{constructor(){super(...arguments),this.inAndOutputNames=["item"]}getComponentName(){return"FullFileSectionComponent"}importThemedComponent(themeName){return __webpack_require__(63614)(`./${themeName}/app/item-page/full/field-components/file-section/full-file-section.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,61143))}static{this.\u0275fac=(()=>{let \u0275ThemedFullFileSectionComponent_BaseFactory;return function(__ngFactoryType__){return(\u0275ThemedFullFileSectionComponent_BaseFactory||(\u0275ThemedFullFileSectionComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_3__.xGo(ThemedFullFileSectionComponent2)))(__ngFactoryType__||ThemedFullFileSectionComponent2)}})()}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_3__.VBU({type:ThemedFullFileSectionComponent2,selectors:[["ds-item-page-full-file-section"]],inputs:{item:"item"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_3__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_3__.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.NAR(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.DNE(0,ThemedFullFileSectionComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.C5r),_angular_core__WEBPACK_IMPORTED_MODULE_3__.j41(2,"div",null,1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.SdG(4),_angular_core__WEBPACK_IMPORTED_MODULE_3__.k0s())},encapsulation:2})}}return ThemedFullFileSectionComponent2})()},18725:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FullItemPageComponent:()=>FullItemPageComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(87514),_angular_core__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(25376),_angular_router__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(18134),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(2385),rxjs_operators__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(60444),_core_coar_notify_notify_info_notify_info_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(87505),_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(76509),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(94149),_core_data_signposting_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(43457),_core_services_server_response_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(41554),_shared_animations_fade__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(67441),_shared_dso_page_dso_edit_menu_dso_edit_menu_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(61564),_shared_empty_util__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(2794),_shared_error_error_component__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(17561),_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(18869),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(17543),_alerts_themed_item_alerts_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(26065),_field_components_collections_collections_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(10633),_simple_field_components_specific_field_title_themed_item_page_field_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(37274),_simple_item_page_component__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(84942),_versions_item_versions_component__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(99762),_versions_notice_item_versions_notice_component__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(70135),_field_components_file_section_themed_full_file_section_component__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(61087),_core_services_link_head_service__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(58698);const _c0=a0=>[a0];function FullItemPageComponent_div_0_Conditional_1_Conditional_1_Conditional_3_Conditional_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_16__.j41(0,"div",8)(1,"a",13),_angular_core__WEBPACK_IMPORTED_MODULE_16__.nI1(2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_16__.EFF(3),_angular_core__WEBPACK_IMPORTED_MODULE_16__.nI1(4,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_16__.k0s()()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_16__.XpG(5);_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_16__.Y8G("routerLink",_angular_core__WEBPACK_IMPORTED_MODULE_16__.eq3(6,_c0,_angular_core__WEBPACK_IMPORTED_MODULE_16__.bMT(2,2,ctx_r0.itemPageRoute$))),_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_16__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_16__.bMT(4,4,"item.page.link.simple")," ")}}function FullItemPageComponent_div_0_Conditional_1_Conditional_1_Conditional_3_For_9_For_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_16__.j41(0,"tr")(1,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_16__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_16__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_16__.j41(3,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_16__.EFF(4),_angular_core__WEBPACK_IMPORTED_MODULE_16__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_16__.j41(5,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_16__.EFF(6),_angular_core__WEBPACK_IMPORTED_MODULE_16__.k0s()()),2&rf){const mdValue_r2=ctx.$implicit,mdEntry_r3=_angular_core__WEBPACK_IMPORTED_MODULE_16__.XpG().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_16__.JRh(mdEntry_r3.key),_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_16__.JRh(mdValue_r2.value),_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_16__.JRh(mdValue_r2.language)}}function FullItemPageComponent_div_0_Conditional_1_Conditional_1_Conditional_3_For_9_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_16__.Z7z(0,FullItemPageComponent_div_0_Conditional_1_Conditional_1_Conditional_3_For_9_For_1_Template,7,3,"tr",null,_angular_core__WEBPACK_IMPORTED_MODULE_16__.fX1),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_16__.Dyx(ctx.$implicit.value)}function FullItemPageComponent_div_0_Conditional_1_Conditional_1_Conditional_3_Conditional_15_Template(rf,ctx){if(1&rf){const _r4=_angular_core__WEBPACK_IMPORTED_MODULE_16__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_16__.j41(0,"div",12)(1,"div",14)(2,"button",15),_angular_core__WEBPACK_IMPORTED_MODULE_16__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_16__.eBV(_r4);const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_16__.XpG(5);return _angular_core__WEBPACK_IMPORTED_MODULE_16__.Njj(ctx_r0.back())}),_angular_core__WEBPACK_IMPORTED_MODULE_16__.nrm(3,"i",16),_angular_core__WEBPACK_IMPORTED_MODULE_16__.EFF(4),_angular_core__WEBPACK_IMPORTED_MODULE_16__.nI1(5,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_16__.k0s()()()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_16__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_16__.bMT(5,1,"item.page.return"),""))}function FullItemPageComponent_div_0_Conditional_1_Conditional_1_Conditional_3_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_16__.j41(0,"div",5)(1,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_16__.nrm(2,"ds-item-page-title-field",7)(3,"ds-dso-edit-menu"),_angular_core__WEBPACK_IMPORTED_MODULE_16__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_16__.DNE(4,FullItemPageComponent_div_0_Conditional_1_Conditional_1_Conditional_3_Conditional_4_Template,5,8,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_16__.j41(5,"div",9)(6,"table",10)(7,"tbody"),_angular_core__WEBPACK_IMPORTED_MODULE_16__.Z7z(8,FullItemPageComponent_div_0_Conditional_1_Conditional_1_Conditional_3_For_9_Template,2,0,null,null,_angular_core__WEBPACK_IMPORTED_MODULE_16__.fX1),_angular_core__WEBPACK_IMPORTED_MODULE_16__.nI1(10,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_16__.nI1(11,"keyvalue"),_angular_core__WEBPACK_IMPORTED_MODULE_16__.k0s()()(),_angular_core__WEBPACK_IMPORTED_MODULE_16__.nrm(12,"ds-item-page-full-file-section",4)(13,"ds-item-page-collections",4)(14,"ds-item-versions",11),_angular_core__WEBPACK_IMPORTED_MODULE_16__.DNE(15,FullItemPageComponent_div_0_Conditional_1_Conditional_1_Conditional_3_Conditional_15_Template,6,3,"div",12),_angular_core__WEBPACK_IMPORTED_MODULE_16__.k0s()),2&rf){const item_r5=_angular_core__WEBPACK_IMPORTED_MODULE_16__.XpG(),ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_16__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_16__.Y8G("item",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_16__.vxM(ctx_r0.fromSubmissionObject?-1:4),_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_16__.Dyx(_angular_core__WEBPACK_IMPORTED_MODULE_16__.bMT(11,8,_angular_core__WEBPACK_IMPORTED_MODULE_16__.bMT(10,6,ctx_r0.metadata$))),_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_16__.Y8G("item",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_16__.Y8G("item",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_16__.Y8G("item",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_16__.vxM(ctx_r0.fromSubmissionObject?15:-1)}}function FullItemPageComponent_div_0_Conditional_1_Conditional_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_16__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_16__.nrm(1,"ds-item-alerts",4)(2,"ds-item-versions-notice",4),_angular_core__WEBPACK_IMPORTED_MODULE_16__.DNE(3,FullItemPageComponent_div_0_Conditional_1_Conditional_1_Conditional_3_Template,16,10,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_16__.nI1(4,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_16__.k0s()),2&rf){const item_r5=ctx,ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_16__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_16__.Y8G("item",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_16__.Y8G("item",item_r5),_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_16__.vxM(!item_r5.isWithdrawn||_angular_core__WEBPACK_IMPORTED_MODULE_16__.bMT(4,3,ctx_r0.isAdmin$)?3:-1)}}function FullItemPageComponent_div_0_Conditional_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_16__.j41(0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_16__.DNE(1,FullItemPageComponent_div_0_Conditional_1_Conditional_1_Template,5,5,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_16__.k0s()),2&rf){let tmp_4_0;const itemRD_r6=_angular_core__WEBPACK_IMPORTED_MODULE_16__.XpG().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_16__.Y8G("@fadeInOut",void 0),_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_16__.vxM((tmp_4_0=null==itemRD_r6?null:itemRD_r6.payload)?1:-1,tmp_4_0)}}function FullItemPageComponent_div_0_Conditional_2_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_16__.nrm(0,"ds-error",3),_angular_core__WEBPACK_IMPORTED_MODULE_16__.nI1(1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_16__.FS9("message",_angular_core__WEBPACK_IMPORTED_MODULE_16__.bMT(1,1,"error.item"))}function FullItemPageComponent_div_0_Conditional_3_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_16__.nrm(0,"ds-loading",3),_angular_core__WEBPACK_IMPORTED_MODULE_16__.nI1(1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_16__.FS9("message",_angular_core__WEBPACK_IMPORTED_MODULE_16__.bMT(1,1,"loading.item"))}function FullItemPageComponent_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_16__.j41(0,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_16__.DNE(1,FullItemPageComponent_div_0_Conditional_1_Template,2,2,"div",2)(2,FullItemPageComponent_div_0_Conditional_2_Template,2,3,"ds-error",3)(3,FullItemPageComponent_div_0_Conditional_3_Template,2,3,"ds-loading",3),_angular_core__WEBPACK_IMPORTED_MODULE_16__.k0s()),2&rf){const itemRD_r6=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_16__.vxM(null!=itemRD_r6&&itemRD_r6.hasSucceeded?1:-1),_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_16__.vxM(null!=itemRD_r6&&itemRD_r6.hasFailed?2:-1),_angular_core__WEBPACK_IMPORTED_MODULE_16__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_16__.vxM(null!=itemRD_r6&&itemRD_r6.isLoading?3:-1)}}let FullItemPageComponent=(()=>{class FullItemPageComponent2 extends _simple_item_page_component__WEBPACK_IMPORTED_MODULE_12__.ItemPageComponent{constructor(route,router,items,authorizationService,_location,responseService,signpostingDataService,linkHeadService,notifyInfoService,platformId){super(route,router,items,authorizationService,responseService,signpostingDataService,linkHeadService,notifyInfoService,platformId),this.route=route,this.router=router,this.items=items,this.authorizationService=authorizationService,this._location=_location,this.responseService=responseService,this.signpostingDataService=signpostingDataService,this.linkHeadService=linkHeadService,this.notifyInfoService=notifyInfoService,this.platformId=platformId,this.fromSubmissionObject=!1,this.subs=[]}ngOnInit(){super.ngOnInit(),this.metadata$=this.itemRD$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.Tj)(rd=>rd.payload),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.pb)(item=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_18__.a4)(item)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_17__.Tj)(item=>item.metadata)),this.subs.push(this.route.data.subscribe(data=>{this.fromSubmissionObject=(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_18__.a4)(data.wfi)||(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_18__.a4)(data.wsi)}))}back(){this._location.back()}ngOnDestroy(){this.subs.filter(sub=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_18__.a4)(sub)).forEach(sub=>sub.unsubscribe())}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||FullItemPageComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_16__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_19__.nX),_angular_core__WEBPACK_IMPORTED_MODULE_16__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_19__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_16__.rXU(_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_2__.ItemDataService),_angular_core__WEBPACK_IMPORTED_MODULE_16__.rXU(_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__.AuthorizationDataService),_angular_core__WEBPACK_IMPORTED_MODULE_16__.rXU(_angular_common__WEBPACK_IMPORTED_MODULE_20__.aZ),_angular_core__WEBPACK_IMPORTED_MODULE_16__.rXU(_core_services_server_response_service__WEBPACK_IMPORTED_MODULE_4__.w),_angular_core__WEBPACK_IMPORTED_MODULE_16__.rXU(_core_data_signposting_data_service__WEBPACK_IMPORTED_MODULE_3__.z),_angular_core__WEBPACK_IMPORTED_MODULE_16__.rXU(_core_services_link_head_service__WEBPACK_IMPORTED_MODULE_21__.m),_angular_core__WEBPACK_IMPORTED_MODULE_16__.rXU(_core_coar_notify_notify_info_notify_info_service__WEBPACK_IMPORTED_MODULE_0__.P),_angular_core__WEBPACK_IMPORTED_MODULE_16__.rXU(_angular_core__WEBPACK_IMPORTED_MODULE_16__.Agw))}}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_16__.VBU({type:FullItemPageComponent2,selectors:[["ds-base-full-item-page"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_16__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_16__.aNF],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[1,"item-page"],[3,"message"],[3,"item"],[1,"full-item-info"],[1,"d-flex","flex-row"],[1,"me-auto",3,"item"],[1,"simple-view-link","my-3"],[1,"table-responsive"],[1,"table","table-striped"],[1,"mt-2",3,"item"],[1,"button-row","bottom"],[1,"btn","btn-outline-primary",3,"routerLink"],[1,"text-end"],[1,"btn","btn-outline-secondary","me-1",3,"click"],[1,"fas","fa-arrow-left"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_16__.DNE(0,FullItemPageComponent_div_0_Template,4,3,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_16__.nI1(1,"async")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_16__.Y8G("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_16__.bMT(1,1,ctx.itemRD$))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_20__.Jj,_field_components_collections_collections_component__WEBPACK_IMPORTED_MODULE_10__.r,_shared_dso_page_dso_edit_menu_dso_edit_menu_component__WEBPACK_IMPORTED_MODULE_6__.T,_shared_error_error_component__WEBPACK_IMPORTED_MODULE_7__.A,_versions_item_versions_component__WEBPACK_IMPORTED_MODULE_13__.I,_versions_notice_item_versions_notice_component__WEBPACK_IMPORTED_MODULE_14__.s,_angular_common__WEBPACK_IMPORTED_MODULE_20__.lG,_angular_router__WEBPACK_IMPORTED_MODULE_19__.Wk,_field_components_file_section_themed_full_file_section_component__WEBPACK_IMPORTED_MODULE_15__.n,_alerts_themed_item_alerts_component__WEBPACK_IMPORTED_MODULE_9__.R,_simple_field_components_specific_field_title_themed_item_page_field_component__WEBPACK_IMPORTED_MODULE_11__.V,_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_8__.v,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_22__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_22__.D9,_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_23__.r],styles:["[_nghost-%COMP%]   div.simple-view-link[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   div.simple-view-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{min-width:25%}"],data:{animation:[_shared_animations_fade__WEBPACK_IMPORTED_MODULE_5__.Ws]},changeDetection:0})}}return FullItemPageComponent2})()},3423:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>ThemedFullItemPageComponent});var _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(79241),_angular_core__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(18725),__webpack_require__(25376));const _c0=["*"];function ThemedFullItemPageComponent_ng_template_0_Template(rf,ctx){}let ThemedFullItemPageComponent=(()=>{class ThemedFullItemPageComponent2 extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_0__.J{getComponentName(){return"FullItemPageComponent"}importThemedComponent(themeName){return __webpack_require__(4872)(`./${themeName}/app/item-page/full/full-item-page.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,18725))}static{this.\u0275fac=(()=>{let \u0275ThemedFullItemPageComponent_BaseFactory;return function(__ngFactoryType__){return(\u0275ThemedFullItemPageComponent_BaseFactory||(\u0275ThemedFullItemPageComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_2__.xGo(ThemedFullItemPageComponent2)))(__ngFactoryType__||ThemedFullItemPageComponent2)}})()}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_2__.VBU({type:ThemedFullItemPageComponent2,selectors:[["ds-full-item-page"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_2__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_2__.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_2__.NAR(),_angular_core__WEBPACK_IMPORTED_MODULE_2__.DNE(0,ThemedFullItemPageComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.C5r),_angular_core__WEBPACK_IMPORTED_MODULE_2__.j41(2,"div",null,1),_angular_core__WEBPACK_IMPORTED_MODULE_2__.SdG(4),_angular_core__WEBPACK_IMPORTED_MODULE_2__.k0s())},encapsulation:2})}}return ThemedFullItemPageComponent2})()},62771:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ROUTES:()=>ROUTES});var app_routing_paths=__webpack_require__(31788),core=__webpack_require__(25376),fesm2022_router=__webpack_require__(18134),operators=__webpack_require__(60444),empty_util=__webpack_require__(2794),item_request_data_service=__webpack_require__(43413),authorized_operators=__webpack_require__(36113),shared_operators=__webpack_require__(39022),auth_service=__webpack_require__(54545);const accessTokenResolver=(route,state,router=(0,core.WQX)(fesm2022_router.Ix),authService=(0,core.WQX)(auth_service.uR),itemRequestDataService=(0,core.WQX)(item_request_data_service.W))=>{const accessToken=route.queryParams.accessToken;return(0,empty_util.a4)(accessToken)?itemRequestDataService.getSanitizedRequestByAccessToken(accessToken).pipe((0,shared_operators.qD)(),(0,authorized_operators.QD)(router,authService),(0,operators.Tj)(rd=>rd),(0,shared_operators.ak)(),(0,operators.Mi)(request=>((0,empty_util.a4)(request)||router.navigateByUrl((0,app_routing_paths.bZ)()),request))):null};var authenticated_guard=__webpack_require__(38056),item_resolver=__webpack_require__(53046),item_data_service=__webpack_require__(94149),dso_breadcrumb_resolver=__webpack_require__(92200),dso_breadcrumbs_service=__webpack_require__(21408),menu_route_model=__webpack_require__(44583),view_tracker_resolver=__webpack_require__(3117),common=__webpack_require__(87514),fesm2022_forms=__webpack_require__(13054),ngx_translate_core=__webpack_require__(2385),cjs=__webpack_require__(9238),dso_name_service=__webpack_require__(11481),bitstream_data_service=__webpack_require__(94999),authorization_data_service=__webpack_require__(76509),feature_id=__webpack_require__(86583),hal_endpoint_service=__webpack_require__(26139);let ProofOfWorkCaptchaDataService=(()=>{class ProofOfWorkCaptchaDataService2{constructor(halService){this.halService=halService,this.linkPath="captcha"}getChallengeHref(){return this.getEndpoint().pipe((0,operators.Tj)(endpoint=>endpoint+"/challenge"))}getEndpoint(){return this.halService.getEndpoint(this.linkPath)}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ProofOfWorkCaptchaDataService2)(core.KVO(hal_endpoint_service.Y))}}static{this.\u0275prov=core.jDH({token:ProofOfWorkCaptchaDataService2,factory:ProofOfWorkCaptchaDataService2.\u0275fac,providedIn:"root"})}}return ProofOfWorkCaptchaDataService2})();var item_request_model=__webpack_require__(34766),btn_disabled_directive=__webpack_require__(69919),notifications_service=__webpack_require__(76623),item_page_routing_paths=__webpack_require__(88292);let AltchaCaptchaComponent=(()=>{class AltchaCaptchaComponent2{constructor(){this.autoload="onload",this.payload=new core.bkB}ngOnInit(){document.querySelector("#altcha-widget").addEventListener("statechange",ev=>{"verified"===ev.detail.state&&this.payload.emit(ev.detail.payload)})}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||AltchaCaptchaComponent2)}}static{this.\u0275cmp=core.VBU({type:AltchaCaptchaComponent2,selectors:[["ds-altcha-captcha"]],inputs:{challengeUrl:"challengeUrl",autoload:"autoload",debug:"debug"},outputs:{payload:"payload"},standalone:!0,features:[core.aNF],decls:1,vars:2,consts:[["id","altcha-widget","expire","100000","workers","16",3,"auto","challengeurl"]],template:function(rf,ctx){1&rf&&core.nrm(0,"altcha-widget",0),2&rf&&(core.FS9("auto",ctx.autoload),core.FS9("challengeurl",ctx.challengeUrl))},dependencies:[fesm2022_forms.X1,ngx_translate_core.h],encapsulation:2})}}return AltchaCaptchaComponent2})();function BitstreamRequestACopyPageComponent_Conditional_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",2)(1,"span"),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"a",3),core.EFF(5),core.nI1(6,"translate"),core.k0s()()),2&rf){const ctx_r0=core.XpG();core.R7$(2),core.JRh(core.bMT(3,3,"bitstream-request-a-copy.alert.canDownload1")),core.R7$(2),core.Y8G("routerLink",ctx_r0.getBitstreamLink()),core.R7$(),core.JRh(core.bMT(6,5,"bitstream-request-a-copy.alert.canDownload2"))}}function BitstreamRequestACopyPageComponent_Conditional_12_Template(rf,ctx){if(1&rf&&(core.j41(0,"p"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Lme("",core.bMT(2,2,"bitstream-request-a-copy.intro.bitstream.one")," ",ctx_r0.bitstreamName,"")}}function BitstreamRequestACopyPageComponent_Conditional_13_Template(rf,ctx){1&rf&&(core.j41(0,"p"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"bitstream-request-a-copy.intro.bitstream.all")))}function BitstreamRequestACopyPageComponent_Conditional_22_Conditional_1_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"bitstream-request-a-copy.name.error")," "))}function BitstreamRequestACopyPageComponent_Conditional_22_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",10),core.DNE(1,BitstreamRequestACopyPageComponent_Conditional_22_Conditional_1_Template,3,3,"span"),core.k0s()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.vxM(ctx_r0.name.errors&&ctx_r0.name.errors.required?1:-1)}}function BitstreamRequestACopyPageComponent_Conditional_29_Conditional_1_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"bitstream-request-a-copy.email.error")," "))}function BitstreamRequestACopyPageComponent_Conditional_29_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",10),core.DNE(1,BitstreamRequestACopyPageComponent_Conditional_29_Conditional_1_Template,3,3,"span"),core.k0s()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.vxM(ctx_r0.email.errors?1:-1)}}function BitstreamRequestACopyPageComponent_Conditional_54_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"div")(1,"ds-altcha-captcha",26),core.nI1(2,"async"),core.bIt("payload",function($event){core.eBV(_r2);const ctx_r0=core.XpG();return core.Njj(ctx_r0.handlePayload($event))}),core.k0s()()}if(2&rf){const ctx_r0=core.XpG();core.R7$(),core.FS9("challengeUrl",core.bMT(2,1,ctx_r0.challengeHref$))}}let BitstreamRequestACopyPageComponent=(()=>{class BitstreamRequestACopyPageComponent2{constructor(location,translateService,route,router,authorizationService,auth,formBuilder,itemRequestDataService,notificationsService,dsoNameService,bitstreamService,captchaService,changeDetectorRef){this.location=location,this.translateService=translateService,this.route=route,this.router=router,this.authorizationService=authorizationService,this.auth=auth,this.formBuilder=formBuilder,this.itemRequestDataService=itemRequestDataService,this.notificationsService=notificationsService,this.dsoNameService=dsoNameService,this.bitstreamService=bitstreamService,this.captchaService=captchaService,this.changeDetectorRef=changeDetectorRef,this.subs=[]}ngOnInit(){this.requestCopyForm=this.formBuilder.group({name:new fesm2022_forms.hs("",{validators:[fesm2022_forms.k0.required]}),email:new fesm2022_forms.hs("",{validators:[fesm2022_forms.k0.required,fesm2022_forms.k0.pattern("^[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,4}$")]}),allfiles:new fesm2022_forms.hs(""),message:new fesm2022_forms.hs(""),captchaPayload:new fesm2022_forms.hs("",{validators:[fesm2022_forms.k0.required]})}),this.captchaEnabled$=this.itemRequestDataService.isProtectedByCaptcha(),this.challengeHref$=this.captchaService.getChallengeHref(),this.item$=this.route.data.pipe((0,operators.Tj)(data=>data.dso),(0,shared_operators.ak)()),this.subs.push(this.item$.subscribe(item=>{this.item=item,this.itemName=this.dsoNameService.getName(item)})),this.bitstream$=this.route.queryParams.pipe((0,operators.pb)(params=>(0,empty_util.a4)(params)&&(0,empty_util.a4)(params.bitstream)),(0,operators.nx)(params=>this.bitstreamService.findById(params.bitstream)),(0,shared_operators.ak)()),this.subs.push(this.bitstream$.subscribe(bitstream=>{this.bitstream=bitstream,this.bitstreamName=this.dsoNameService.getName(bitstream)})),this.canDownload$=this.bitstream$.pipe((0,operators.nx)(bitstream=>this.authorizationService.isAuthorized(feature_id._.CanDownload,(0,empty_util.hj)(bitstream)?bitstream.self:void 0)));const canRequestCopy$=this.bitstream$.pipe((0,operators.nx)(bitstream=>this.authorizationService.isAuthorized(feature_id._.CanRequestACopy,(0,empty_util.hj)(bitstream)?bitstream.self:void 0)));this.subs.push((0,cjs.combineLatest)([this.canDownload$,canRequestCopy$]).subscribe(([canDownload,canRequestCopy])=>{!canDownload&&!canRequestCopy&&this.router.navigateByUrl((0,app_routing_paths.bZ)(),{skipLocationChange:!0})})),this.initValues()}get name(){return this.requestCopyForm.get("name")}get email(){return this.requestCopyForm.get("email")}get message(){return this.requestCopyForm.get("message")}get allfiles(){return this.requestCopyForm.get("allfiles")}get captchaPayload(){return this.requestCopyForm.get("captchaPayload")}initValues(){this.getCurrentUser().pipe((0,operators.s)(1)).subscribe(user=>{this.requestCopyForm.patchValue({allfiles:"true"}),(0,empty_util.a4)(user)&&this.requestCopyForm.patchValue({name:user.name,email:user.email})}),this.bitstream$.pipe((0,operators.s)(1)).subscribe(bitstream=>{this.requestCopyForm.patchValue({allfiles:"false"})}),this.subs.push(this.captchaEnabled$.pipe((0,operators.s)(1)).subscribe(enabled=>{enabled||(this.requestCopyForm.get("captchaPayload").clearValidators(),this.requestCopyForm.get("captchaPayload").reset(),this.requestCopyForm.updateValueAndValidity()),this.changeDetectorRef.detectChanges()}))}getCurrentUser(){return this.auth.isAuthenticated().pipe((0,operators.nx)(authenticated=>authenticated?this.auth.getAuthenticatedUserFromStore():(0,cjs.of)(void 0)))}onSubmit(){const itemRequest=new item_request_model.b;(0,empty_util.a4)(this.bitstream)&&(itemRequest.bitstreamId=this.bitstream.uuid),itemRequest.itemId=this.item.uuid,itemRequest.allfiles=this.allfiles.value,itemRequest.requestEmail=this.email.value,itemRequest.requestName=this.name.value,itemRequest.requestMessage=this.message.value,this.itemRequestDataService.requestACopy(itemRequest,this.captchaPayload.value).pipe((0,shared_operators.qD)()).subscribe(rd=>{rd.hasSucceeded?(this.notificationsService.success(this.translateService.get("bitstream-request-a-copy.submit.success")),this.navigateBack()):this.notificationsService.error(this.translateService.get("bitstream-request-a-copy.submit.error"))})}handlePayload(event){this.requestCopyForm.patchValue({captchaPayload:event})}ngOnDestroy(){(0,empty_util.a4)(this.subs)&&this.subs.forEach(sub=>{(0,empty_util.a4)(sub)&&sub.unsubscribe()})}navigateBack(){this.location.back()}getItemPath(){return[(0,item_page_routing_paths._o)(this.item)]}getBitstreamLink(){return[(0,app_routing_paths.hV)(this.bitstream)]}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||BitstreamRequestACopyPageComponent2)(core.rXU(common.aZ),core.rXU(ngx_translate_core.c$),core.rXU(fesm2022_router.nX),core.rXU(fesm2022_router.Ix),core.rXU(authorization_data_service.AuthorizationDataService),core.rXU(auth_service.uR),core.rXU(fesm2022_forms.ze),core.rXU(item_request_data_service.W),core.rXU(notifications_service.I),core.rXU(dso_name_service.f),core.rXU(bitstream_data_service.BitstreamDataService),core.rXU(ProofOfWorkCaptchaDataService),core.rXU(core.gRc))}}static{this.\u0275cmp=core.VBU({type:BitstreamRequestACopyPageComponent2,selectors:[["ds-bitstream-request-a-copy-page"]],standalone:!0,features:[core.aNF],decls:66,vars:55,consts:[[1,"container"],[1,"mb-4"],[1,"alert","alert-success"],[3,"routerLink"],[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"row","mb-4"],[1,"col-12"],["for","name",1,"form-label"],["type","text","id","name","formControlName","name",3,"className"],[1,"invalid-feedback","show-feedback"],["for","email",1,"form-label"],["id","email","formControlName","email",3,"className"],[1,"text-muted","ds-hint"],[1,"ms-2","form-check"],["type","radio","id","allfiles-true","formControlName","allfiles","value","true",3,"className"],["for","allfiles-true",1,"form-check-label"],["type","radio","id","allfiles-false","formControlName","allfiles","value","false",3,"className"],["for","allfiles-false",1,"form-check-label"],["for","message",1,"form-label"],["rows","5","id","message","formControlName","message",3,"className"],[1,"row"],[1,"col-12","text-end"],["role","button",1,"btn","btn-outline-secondary","me-1",3,"click"],[1,"fas","fa-arrow-left"],[1,"btn","btn-default","btn-primary",3,"click","dsBtnDisabled"],["autoload","onload",3,"payload","challengeUrl"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0)(1,"h1",1),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.DNE(4,BitstreamRequestACopyPageComponent_Conditional_4_Template,7,7,"div",2),core.nI1(5,"async"),core.j41(6,"div")(7,"p"),core.EFF(8),core.nI1(9,"translate"),core.j41(10,"a",3),core.EFF(11),core.k0s()(),core.DNE(12,BitstreamRequestACopyPageComponent_Conditional_12_Template,3,4,"p")(13,BitstreamRequestACopyPageComponent_Conditional_13_Template,3,3,"p"),core.k0s(),core.j41(14,"form",4),core.bIt("ngSubmit",function(){return ctx.onSubmit()}),core.j41(15,"div",5)(16,"div",6)(17,"div",7)(18,"label",8),core.EFF(19),core.nI1(20,"translate"),core.k0s(),core.nrm(21,"input",9),core.DNE(22,BitstreamRequestACopyPageComponent_Conditional_22_Template,2,1,"div",10),core.k0s()(),core.j41(23,"div",6)(24,"div",7)(25,"label",11),core.EFF(26),core.nI1(27,"translate"),core.k0s(),core.nrm(28,"input",12),core.DNE(29,BitstreamRequestACopyPageComponent_Conditional_29_Template,2,1,"div",10),core.j41(30,"small",13),core.EFF(31),core.nI1(32,"translate"),core.k0s()()(),core.j41(33,"div",6)(34,"div",7)(35,"div"),core.EFF(36),core.nI1(37,"translate"),core.k0s(),core.j41(38,"div",14),core.nrm(39,"input",15),core.j41(40,"label",16),core.EFF(41),core.nI1(42,"translate"),core.k0s()(),core.j41(43,"div",14),core.nrm(44,"input",17),core.j41(45,"label",18),core.EFF(46),core.nI1(47,"translate"),core.k0s()()()(),core.j41(48,"div",6)(49,"div",7)(50,"label",19),core.EFF(51),core.nI1(52,"translate"),core.k0s(),core.nrm(53,"textarea",20),core.k0s()()()(),core.DNE(54,BitstreamRequestACopyPageComponent_Conditional_54_Template,3,3,"div"),core.nI1(55,"async"),core.nrm(56,"hr"),core.j41(57,"div",21)(58,"div",22)(59,"a",23),core.bIt("click",function(){return ctx.navigateBack()}),core.nrm(60,"i",24),core.EFF(61),core.nI1(62,"translate"),core.k0s(),core.j41(63,"button",25),core.bIt("click",function(){return ctx.onSubmit()}),core.EFF(64),core.nI1(65,"translate"),core.k0s()()()()),2&rf&&(core.R7$(2),core.JRh(core.bMT(3,29,"bitstream-request-a-copy.header")),core.R7$(2),core.vxM(core.bMT(5,31,ctx.canDownload$)?4:-1),core.R7$(4),core.SpI("",core.bMT(9,33,"bitstream-request-a-copy.intro")," "),core.R7$(2),core.Y8G("routerLink",ctx.getItemPath()),core.R7$(),core.JRh(ctx.itemName),core.R7$(),core.vxM(void 0!==ctx.bitstream&&"false"===ctx.allfiles.value?12:-1),core.R7$(),core.vxM("true"===ctx.allfiles.value?13:-1),core.R7$(),core.HbH("ng-invalid"),core.Y8G("formGroup",ctx.requestCopyForm),core.R7$(5),core.JRh(core.bMT(20,35,"bitstream-request-a-copy.name.label")),core.R7$(2),core.Y8G("className",ctx.name.invalid&&(ctx.name.dirty||ctx.name.touched)?"form-control is-invalid":"form-control"),core.R7$(),core.vxM(ctx.name.invalid&&(ctx.name.dirty||ctx.name.touched)?22:-1),core.R7$(4),core.JRh(core.bMT(27,37,"bitstream-request-a-copy.email.label")),core.R7$(2),core.Y8G("className",ctx.email.invalid&&(ctx.email.dirty||ctx.email.touched)?"form-control is-invalid":"form-control"),core.R7$(),core.vxM(ctx.email.invalid&&(ctx.email.dirty||ctx.email.touched)?29:-1),core.R7$(2),core.JRh(core.bMT(32,39,"bitstream-request-a-copy.email.hint")),core.R7$(5),core.JRh(core.bMT(37,41,"bitstream-request-a-copy.allfiles.label")),core.R7$(3),core.Y8G("className","form-check-input"),core.R7$(2),core.JRh(core.bMT(42,43,"bitstream-request-a-copy.files-all-true.label")),core.R7$(3),core.Y8G("className","form-check-input"),core.BMQ("disabled",void 0===ctx.bitstream||null),core.R7$(2),core.JRh(core.bMT(47,45,"bitstream-request-a-copy.files-all-false.label")),core.R7$(5),core.JRh(core.bMT(52,47,"bitstream-request-a-copy.message.label")),core.R7$(2),core.Y8G("className","form-control"),core.R7$(),core.vxM(core.bMT(55,49,ctx.captchaEnabled$)?54:-1),core.R7$(7),core.SpI(" ",core.bMT(62,51,"bitstream-request-a-copy.return")," "),core.R7$(2),core.Y8G("dsBtnDisabled",ctx.requestCopyForm.invalid),core.R7$(),core.JRh(core.bMT(65,53,"bitstream-request-a-copy.submit")))},dependencies:[AltchaCaptchaComponent,common.Jj,btn_disabled_directive.A,fesm2022_forms.X1,fesm2022_forms.qT,fesm2022_forms.me,fesm2022_forms.Fm,fesm2022_forms.BC,fesm2022_forms.cb,fesm2022_forms.j4,fesm2022_forms.JD,fesm2022_router.Wk,ngx_translate_core.h,ngx_translate_core.D9],encapsulation:2})}}return BitstreamRequestACopyPageComponent2})();var environment=__webpack_require__(64369),bundle_data_service=__webpack_require__(51024),request_service=__webpack_require__(64806),bundle_model=__webpack_require__(89172),view_mode_model=__webpack_require__(18839),collection_element_link_type=__webpack_require__(59398),listable_object_component_loader_component=__webpack_require__(90690),click_outside_directive=__webpack_require__(70092),debounce_directive=__webpack_require__(91041),input_suggestions_component=__webpack_require__(69157);const _c0=a0=>({"is-invalid":a0}),_c1=()=>({standalone:!0}),_c2=a0=>({show:a0});function DsoInputSuggestionsComponent_For_11_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"div")(1,"button",8,2),core.bIt("click",function(){const suggestionOption_r3=core.eBV(_r2).$implicit,ctx_r3=core.XpG();return core.Njj(ctx_r3.onClickSuggestion(suggestionOption_r3))}),core.nrm(3,"ds-listable-object-component-loader",9),core.k0s()()}if(2&rf){const suggestionOption_r3=ctx.$implicit,ctx_r3=core.XpG();core.R7$(3),core.Y8G("object",suggestionOption_r3)("viewMode",ctx_r3.viewMode)("linkType",ctx_r3.linkTypes.None)}}let DsoInputSuggestionsComponent=(()=>{class DsoInputSuggestionsComponent2 extends input_suggestions_component.t{constructor(dsoNameService){super(),this.dsoNameService=dsoNameService,this.viewMode=view_mode_model.n.ListElement,this.linkTypes=collection_element_link_type.n,this.suggestions=[]}onSubmit(data){(0,empty_util.a4)(data)&&(this.value=this.dsoNameService.getName(data),this.currentObject=data,this.submitSuggestion.emit(data))}onClickSuggestion(data){return this.value=this.dsoNameService.getName(data),this.currentObject=data,this.clickSuggestion.emit(data),this.close(),this.blockReopen=!0,this.queryInput.nativeElement.focus(),!1}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||DsoInputSuggestionsComponent2)(core.rXU(dso_name_service.f))}}static{this.\u0275cmp=core.VBU({type:DsoInputSuggestionsComponent2,selectors:[["ds-dso-input-suggestions"]],inputs:{suggestions:"suggestions"},standalone:!0,features:[core.Jv_([{provide:fesm2022_forms.kq,useExisting:(0,core.Rfq)(()=>DsoInputSuggestionsComponent2),multi:!0}]),core.Vt3,core.aNF],decls:12,vars:18,consts:[["form","ngForm"],["inputField",""],["suggestion",""],[3,"ngSubmit","keydown.arrowdown","keydown.arrowup","keydown.esc","dsClickOutside","action"],["type","text","autocomplete","off",1,"form-control","suggestion_input","mb-2",3,"ngModelChange","onDebounce","ngModel","name","ngClass","dsDebounce","placeholder","ngModelOptions"],["type","submit",1,"sr-only"],[1,"autocomplete","dropdown-menu",3,"ngClass"],[1,"dropdown-list"],[1,"d-block","dropdown-item",3,"click"],[3,"object","viewMode","linkType"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"form",3,0),core.bIt("ngSubmit",function(){return core.eBV(_r1),core.Njj(ctx.onSubmit(ctx.currentObject))})("keydown.arrowdown",function($event){return core.eBV(_r1),core.Njj(ctx.shiftFocusDown($event))})("keydown.arrowup",function($event){return core.eBV(_r1),core.Njj(ctx.shiftFocusUp($event))})("keydown.esc",function(){return core.eBV(_r1),core.Njj(ctx.close())})("dsClickOutside",function(){return core.eBV(_r1),core.Njj(ctx.close())}),core.j41(2,"input",4,1),core.mxI("ngModelChange",function($event){return core.eBV(_r1),core.DH7(ctx.value,$event)||(ctx.value=$event),core.Njj($event)}),core.bIt("onDebounce",function($event){return core.eBV(_r1),core.Njj(ctx.find($event))}),core.k0s(),core.j41(4,"button",5),core.EFF(5),core.nI1(6,"translate"),core.k0s(),core.j41(7,"div",6),core.nI1(8,"async"),core.j41(9,"div",7),core.Z7z(10,DsoInputSuggestionsComponent_For_11_Template,4,3,"div",null,core.fX1),core.k0s()()()}2&rf&&(core.Y8G("action",ctx.action,core.B4B),core.R7$(2),core.R50("ngModel",ctx.value),core.Y8G("name",ctx.name)("ngClass",core.eq3(13,_c0,!ctx.valid))("dsDebounce",ctx.debounceTime)("placeholder",ctx.placeholder)("ngModelOptions",core.lJ4(15,_c1)),core.R7$(3),core.SpI(" ",core.bMT(6,9,"search.filters.search.submit")," "),core.R7$(2),core.Y8G("ngClass",core.eq3(16,_c2,core.bMT(8,11,ctx.show)&&ctx.isNotEmpty(ctx.suggestions))),core.R7$(3),core.Dyx(ctx.suggestions))},dependencies:[common.Jj,click_outside_directive.z,debounce_directive.R,fesm2022_forms.YN,fesm2022_forms.qT,fesm2022_forms.me,fesm2022_forms.BC,fesm2022_forms.cb,fesm2022_forms.vS,fesm2022_forms.cV,listable_object_component_loader_component.v,common.YU,ngx_translate_core.h,ngx_translate_core.D9],styles:[".autocomplete[_ngcontent-%COMP%]{width:100%}.autocomplete[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{white-space:normal;word-break:break-word;padding:var(--bs-input-padding-y) var(--bs-input-padding-x)}.autocomplete[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]:focus{outline:none}form[_ngcontent-%COMP%]{position:relative}"]})}}return DsoInputSuggestionsComponent2})();var uploader_component=__webpack_require__(73649),uploader_options_model=__webpack_require__(99464),var_directive=__webpack_require__(17543);function UploadBitstreamComponent_Conditional_1_ng_container_5_Conditional_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div")(1,"span",11),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"span"),core.EFF(5),core.k0s()()),2&rf){const item_r2=core.XpG().ngVar,ctx_r2=core.XpG(2);core.R7$(2),core.JRh(core.bMT(3,2,"item.bitstreams.upload.item")),core.R7$(3),core.JRh(ctx_r2.dsoNameService.getName(item_r2))}}function UploadBitstreamComponent_Conditional_1_ng_container_5_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,UploadBitstreamComponent_Conditional_1_ng_container_5_Conditional_1_Template,6,4,"div"),core.bVm()),2&rf){const item_r2=ctx.ngVar;core.R7$(),core.vxM(item_r2?1:-1)}}function UploadBitstreamComponent_Conditional_1_Conditional_14_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"button",12),core.bIt("click",function(){core.eBV(_r5);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.createBundle())}),core.nrm(1,"i",13),core.EFF(2),core.nI1(3,"translate"),core.k0s()}2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"item.bitstreams.upload.bundle.new")," "))}function UploadBitstreamComponent_Conditional_1_Conditional_15_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"ds-uploader",14),core.bIt("onCompleteItem",function($event){core.eBV(_r6);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.onCompleteItem($event))})("onUploadError",function(){core.eBV(_r6);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.onUploadError())}),core.k0s()}if(2&rf){const ctx_r2=core.XpG(2);core.Y8G("dropMsg","item.bitstreams.upload.drop-message")("dropOverDocumentMsg","item.bitstreams.upload.drop-message")("enableDragOverDocument",!0)("uploadFilesOptions",ctx_r2.uploadFilesOptions)}}function UploadBitstreamComponent_Conditional_1_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div",2)(1,"div",3)(2,"h1"),core.EFF(3),core.nI1(4,"translate"),core.k0s(),core.DNE(5,UploadBitstreamComponent_Conditional_1_ng_container_5_Template,2,1,"ng-container",4),core.nI1(6,"async"),core.k0s(),core.j41(7,"div",5)(8,"label",6),core.EFF(9),core.nI1(10,"translate"),core.k0s(),core.j41(11,"ds-dso-input-suggestions",7,0),core.nI1(13,"translate"),core.mxI("ngModelChange",function($event){core.eBV(_r1);const ctx_r2=core.XpG();return core.DH7(ctx_r2.selectedBundleName,$event)||(ctx_r2.selectedBundleName=$event),core.Njj($event)}),core.bIt("typeSuggestion",function(){core.eBV(_r1);const ctx_r2=core.XpG();return core.Njj(ctx_r2.bundleNameChange())})("clickSuggestion",function($event){core.eBV(_r1);const ctx_r2=core.XpG();return core.Njj(ctx_r2.onClick($event))})("click",function(){core.eBV(_r1);const f_r4=core.sdS(12);return core.Njj(f_r4.open())}),core.k0s(),core.DNE(14,UploadBitstreamComponent_Conditional_1_Conditional_14_Template,4,3,"button",8)(15,UploadBitstreamComponent_Conditional_1_Conditional_15_Template,1,4,"ds-uploader",9),core.j41(16,"button",10),core.bIt("click",function(){core.eBV(_r1);const ctx_r2=core.XpG();return core.Njj(ctx_r2.onCancel())}),core.EFF(17),core.nI1(18,"translate"),core.k0s()()()}if(2&rf){let tmp_3_0;const ctx_r2=core.XpG();core.R7$(3),core.JRh(core.bMT(4,12,"item.bitstreams.upload.title")),core.R7$(2),core.Y8G("ngVar",null==(tmp_3_0=core.bMT(6,14,ctx_r2.itemRD$))?null:tmp_3_0.payload),core.R7$(4),core.JRh(core.bMT(10,16,"item.bitstreams.upload.bundle")),core.R7$(2),core.Y8G("suggestions",ctx_r2.bundles)("placeholder",core.bMT(13,18,"item.bitstreams.upload.bundle.placeholder"))("action",ctx_r2.getCurrentUrl())("name","bundle-select")("debounceTime",50),core.R50("ngModel",ctx_r2.selectedBundleName),core.R7$(3),core.vxM(!ctx_r2.selectedBundleId&&(null==ctx_r2.selectedBundleName?null:ctx_r2.selectedBundleName.length)>0?14:-1),core.R7$(),core.vxM(ctx_r2.selectedBundleId?15:-1),core.R7$(2),core.JRh(core.bMT(18,20,"item.bitstreams.upload.cancel"))}}let UploadBitstreamComponent=(()=>{class UploadBitstreamComponent2{constructor(route,router,itemService,bundleService,authService,notificationsService,translate,requestService,dsoNameService){this.route=route,this.router=router,this.itemService=itemService,this.bundleService=bundleService,this.authService=authService,this.notificationsService=notificationsService,this.translate=translate,this.requestService=requestService,this.dsoNameService=dsoNameService,this.bundles=[],this.uploadFilesOptions=Object.assign(new uploader_options_model.H,{url:"placeholder",authToken:null,disableMultipart:!1,itemAlias:null}),this.NOTIFICATIONS_PREFIX="item.bitstreams.upload.notifications.",this.subs=[]}ngOnInit(){this.itemId=this.route.snapshot.params.id,this.entityType=this.route.snapshot.params["entity-type"],this.itemRD$=this.route.data.pipe((0,operators.Tj)(data=>data.dso));const bundlesRD$=this.itemService.getBundles(this.itemId).pipe((0,shared_operators.qD)(),(0,operators.nx)(remoteData=>{if(remoteData.hasSucceeded){if(remoteData.payload.page){this.bundles=remoteData.payload.page;for(const defaultBundle of environment.c.bundle.standardBundles){let check=!0;remoteData.payload.page.forEach(bundle=>{defaultBundle===bundle.name&&(check=!1)}),check&&this.bundles.push(Object.assign(new bundle_model.N,{_name:defaultBundle,type:"bundle"}))}}else this.bundles=environment.c.bundle.standardBundles.map(defaultBundle=>Object.assign(new bundle_model.N,{_name:defaultBundle,type:"bundle"}));return(0,cjs.of)(remoteData.payload.page)}}));this.selectedBundleId=this.route.snapshot.queryParams.bundle,(0,empty_util.hj)(this.selectedBundleId)&&(this.subs.push(this.bundleService.findById(this.selectedBundleId).pipe((0,shared_operators.ak)()).subscribe(bundle=>{this.selectedBundleName=bundle.name})),this.setUploadUrl()),this.subs.push(bundlesRD$.subscribe())}createBundle(){this.itemService.createBundle(this.itemId,this.selectedBundleName).pipe((0,shared_operators.ak)()).subscribe(bundle=>{this.selectedBundleId=bundle.id,this.notificationsService.success(this.translate.instant(this.NOTIFICATIONS_PREFIX+"bundle.created.title"),this.translate.instant(this.NOTIFICATIONS_PREFIX+"bundle.created.content")),this.setUploadUrl()})}bundleNameChange(){this.selectedBundleId=void 0;for(const bundle of this.bundles)if(this.selectedBundleName===bundle.name){this.selectedBundleId=bundle.id;break}}setUploadUrl(){this.bundleService.getBitstreamsEndpoint(this.selectedBundleId).pipe((0,operators.s)(1)).subscribe(href=>{this.uploadFilesOptions.url=href,(0,empty_util.Im)(this.uploadFilesOptions.authToken)&&(this.uploadFilesOptions.authToken=this.authService.buildAuthHeader()),this.uploaderComponent&&(this.uploaderComponent.ngOnInit(),this.uploaderComponent.ngAfterViewInit())})}onCompleteItem(bitstream){this.bundleService.getBitstreamsEndpoint(this.selectedBundleId).pipe((0,operators.s)(1)).subscribe(href=>{this.requestService.removeByHrefSubstring(href)});const queryParams={itemId:this.itemId,entityType:this.entityType};this.router.navigate([(0,app_routing_paths.dF)(),bitstream.id,"edit"],{queryParams})}onUploadError(){this.notificationsService.error(null,this.translate.get(this.NOTIFICATIONS_PREFIX+"upload.failed"))}onClick(bundle){this.selectedBundleId=bundle.id,this.selectedBundleName=bundle.name,bundle.id&&this.setUploadUrl()}onCancel(){this.router.navigate([(0,item_page_routing_paths.DL)(this.entityType,this.itemId),"bitstreams"])}getCurrentUrl(){return this.router.url}ngOnDestroy(){this.subs.filter(subscription=>(0,empty_util.a4)(subscription)).forEach(subscription=>subscription.unsubscribe())}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||UploadBitstreamComponent2)(core.rXU(fesm2022_router.nX),core.rXU(fesm2022_router.Ix),core.rXU(item_data_service.ItemDataService),core.rXU(bundle_data_service.BundleDataService),core.rXU(auth_service.uR),core.rXU(notifications_service.I),core.rXU(ngx_translate_core.c$),core.rXU(request_service.B),core.rXU(dso_name_service.f))}}static{this.\u0275cmp=core.VBU({type:UploadBitstreamComponent2,selectors:[["ds-upload-bitstream"]],viewQuery:function(rf,ctx){if(1&rf&&core.GBs(uploader_component.y,5),2&rf){let _t;core.mGM(_t=core.lsd())&&(ctx.uploaderComponent=_t.first)}},standalone:!0,features:[core.aNF],decls:2,vars:1,consts:[["f",""],[1,"container"],[1,"row"],[1,"col-12","mb-2"],[4,"ngVar"],[1,"col-12"],[1,"fw-bold","form-label"],["id","search-form","ngDefaultControl","",3,"ngModelChange","typeSuggestion","clickSuggestion","click","suggestions","placeholder","action","name","debounceTime","ngModel"],[1,"btn","btn-success","me-2"],[1,"w-100",3,"dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions"],[1,"btn","btn-outline-secondary",3,"click"],[1,"fw-bold"],[1,"btn","btn-success","me-2",3,"click"],[1,"fa","fa-plus"],[1,"w-100",3,"onCompleteItem","onUploadError","dropMsg","dropOverDocumentMsg","enableDragOverDocument","uploadFilesOptions"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",1),core.DNE(1,UploadBitstreamComponent_Conditional_1_Template,19,22,"div",2),core.k0s()),2&rf&&(core.R7$(),core.vxM(ctx.bundles?1:-1))},dependencies:[common.Jj,DsoInputSuggestionsComponent,fesm2022_forms.YN,fesm2022_forms.me,fesm2022_forms.BC,fesm2022_forms.vS,ngx_translate_core.h,ngx_translate_core.D9,uploader_component.y,var_directive.r],encapsulation:2})}}return UploadBitstreamComponent2})();var themed_full_item_page_component=__webpack_require__(3423),item_page_resolver=__webpack_require__(88136),orcid_auth_service=__webpack_require__(51852),alert_component=__webpack_require__(6213),alert_type=__webpack_require__(83113),themed_loading_component=__webpack_require__(18869),window_service=__webpack_require__(97497),remote_data_utils=(__webpack_require__(43575),__webpack_require__(84953));function OrcidAuthComponent_Conditional_4_Conditional_2_For_9_Template(rf,ctx){if(1&rf&&(core.j41(0,"li",15),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const auth_r1=ctx.$implicit,ctx_r1=core.XpG(3);core.R7$(),core.SpI(" ",core.bMT(2,1,ctx_r1.getAuthorizationDescription(auth_r1))," ")}}function OrcidAuthComponent_Conditional_4_Conditional_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",4)(1,"div",6)(2,"div",7),core.EFF(3),core.nI1(4,"translate"),core.k0s(),core.j41(5,"div",8)(6,"div",14)(7,"ul"),core.Z7z(8,OrcidAuthComponent_Conditional_4_Conditional_2_For_9_Template,3,3,"li",15,core.fX1),core.nI1(10,"async"),core.k0s()()()()()),2&rf){const ctx_r1=core.XpG(2);core.R7$(3),core.JRh(core.bMT(4,1,"person.page.orcid.granted-authorizations")),core.R7$(5),core.Dyx(core.bMT(10,3,ctx_r1.profileAuthorizationScopes$))}}function OrcidAuthComponent_Conditional_4_Conditional_11_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-alert",10),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const ctx_r1=core.XpG(2);core.Y8G("type",ctx_r1.AlertType.Success),core.R7$(),core.SpI(" ",core.bMT(2,2,"person.page.orcid.no-missing-authorizations-message")," ")}}function OrcidAuthComponent_Conditional_4_Conditional_13_For_5_Template(rf,ctx){if(1&rf&&(core.j41(0,"li",16),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const auth_r3=ctx.$implicit,ctx_r1=core.XpG(3);core.R7$(),core.SpI(" ",core.bMT(2,1,ctx_r1.getAuthorizationDescription(auth_r3))," ")}}function OrcidAuthComponent_Conditional_4_Conditional_13_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-alert",11),core.EFF(1),core.nI1(2,"translate"),core.j41(3,"ul"),core.Z7z(4,OrcidAuthComponent_Conditional_4_Conditional_13_For_5_Template,3,3,"li",16,core.fX1),core.nI1(6,"async"),core.k0s()()),2&rf){const ctx_r1=core.XpG(2);core.Y8G("type",ctx_r1.AlertType.Warning),core.R7$(),core.SpI(" ",core.bMT(2,2,"person.page.orcid.missing-authorizations-message")," "),core.R7$(3),core.Dyx(core.bMT(6,4,ctx_r1.profileAuthorizationScopes$))}}function OrcidAuthComponent_Conditional_4_Conditional_15_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-alert",12),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const ctx_r1=core.XpG(2);core.Y8G("type",ctx_r1.AlertType.Warning),core.R7$(),core.SpI(" ",core.bMT(2,2,"person.page.orcid.remove-orcid-message")," ")}}function OrcidAuthComponent_Conditional_4_Conditional_18_Conditional_4_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",20),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"person.page.orcid.unlink"),""))}function OrcidAuthComponent_Conditional_4_Conditional_18_Conditional_6_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",21),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"person.page.orcid.unlink.processing"),""))}function OrcidAuthComponent_Conditional_4_Conditional_18_Conditional_8_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"button",22),core.bIt("click",function(){core.eBV(_r5);const ctx_r1=core.XpG(3);return core.Njj(ctx_r1.linkOrcid())}),core.j41(1,"span"),core.nrm(2,"i",23),core.EFF(3),core.nI1(4,"translate"),core.k0s()()}2&rf&&(core.R7$(3),core.SpI(" ",core.bMT(4,1,"person.page.orcid.grant-authorizations"),""))}function OrcidAuthComponent_Conditional_4_Conditional_18_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"div",13)(1,"div",17)(2,"button",18),core.nI1(3,"async"),core.bIt("click",function(){core.eBV(_r4);const ctx_r1=core.XpG(2);return core.Njj(ctx_r1.unlinkOrcid())}),core.DNE(4,OrcidAuthComponent_Conditional_4_Conditional_18_Conditional_4_Template,4,3,"span"),core.nI1(5,"async"),core.DNE(6,OrcidAuthComponent_Conditional_4_Conditional_18_Conditional_6_Template,4,3,"span"),core.nI1(7,"async"),core.k0s(),core.DNE(8,OrcidAuthComponent_Conditional_4_Conditional_18_Conditional_8_Template,5,3,"button",19),core.nI1(9,"async"),core.k0s()()}if(2&rf){const ctx_r1=core.XpG(2);core.R7$(2),core.Y8G("dsBtnDisabled",core.bMT(3,4,ctx_r1.unlinkProcessing)),core.R7$(2),core.vxM(!0!==core.bMT(5,6,ctx_r1.unlinkProcessing)?4:-1),core.R7$(2),core.vxM(core.bMT(7,8,ctx_r1.unlinkProcessing)?6:-1),core.R7$(2),core.vxM(core.bMT(9,10,ctx_r1.hasMissingOrcidAuthorizations$)?8:-1)}}function OrcidAuthComponent_Conditional_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",1)(1,"div",3),core.DNE(2,OrcidAuthComponent_Conditional_4_Conditional_2_Template,11,5,"div",4),core.nI1(3,"async"),core.j41(4,"div",5)(5,"div",6)(6,"div",7),core.EFF(7),core.nI1(8,"translate"),core.k0s(),core.j41(9,"div",8)(10,"div",9),core.DNE(11,OrcidAuthComponent_Conditional_4_Conditional_11_Template,3,4,"ds-alert",10),core.nI1(12,"async"),core.DNE(13,OrcidAuthComponent_Conditional_4_Conditional_13_Template,7,6,"ds-alert",11),core.nI1(14,"async"),core.k0s()()()()(),core.DNE(15,OrcidAuthComponent_Conditional_4_Conditional_15_Template,3,4,"ds-alert",12),core.nI1(16,"async"),core.nI1(17,"async"),core.DNE(18,OrcidAuthComponent_Conditional_4_Conditional_18_Template,10,12,"div",13),core.nI1(19,"async"),core.k0s()),2&rf){const ctx_r1=core.XpG();core.R7$(2),core.vxM(core.bMT(3,6,ctx_r1.hasOrcidAuthorizations$)?2:-1),core.R7$(5),core.JRh(core.bMT(8,8,"person.page.orcid.missing-authorizations")),core.R7$(4),core.vxM(!0!==core.bMT(12,10,ctx_r1.hasMissingOrcidAuthorizations$)?11:-1),core.R7$(2),core.vxM(core.bMT(14,12,ctx_r1.hasMissingOrcidAuthorizations$)?13:-1),core.R7$(2),core.vxM(core.bMT(16,14,ctx_r1.onlyAdminCanDisconnectProfileFromOrcid$)&&!0!==core.bMT(17,16,ctx_r1.ownerCanDisconnectProfileFromOrcid$)?15:-1),core.R7$(3),core.vxM(core.bMT(19,18,ctx_r1.ownerCanDisconnectProfileFromOrcid$)?18:-1)}}function OrcidAuthComponent_Conditional_6_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"div",2)(1,"div",3)(2,"div",24),core.nrm(3,"img",25),core.k0s(),core.j41(4,"div",17)(5,"ds-alert",26),core.EFF(6),core.k0s()()(),core.j41(7,"div",3)(8,"div",17)(9,"button",27),core.bIt("click",function(){core.eBV(_r6);const ctx_r1=core.XpG();return core.Njj(ctx_r1.linkOrcid())}),core.nrm(10,"i",28),core.EFF(11),core.nI1(12,"translate"),core.k0s()()()()}if(2&rf){const ctx_r1=core.XpG();core.R7$(5),core.Y8G("type",ctx_r1.AlertType.Info),core.R7$(),core.JRh(ctx_r1.getOrcidNotLinkedMessage()),core.R7$(5),core.SpI(" ",core.bMT(12,3,"person.page.orcid.link")," ")}}let OrcidAuthComponent=(()=>{class OrcidAuthComponent2{constructor(orcidAuthService,translateService,notificationsService,_window){this.orcidAuthService=orcidAuthService,this.translateService=translateService,this.notificationsService=notificationsService,this._window=_window,this.profileAuthorizationScopes$=new cjs.BehaviorSubject([]),this.missingAuthorizationScopes=new cjs.BehaviorSubject([]),this.orcidAuthorizationScopes=new cjs.BehaviorSubject([]),this.unlinkProcessing=new cjs.BehaviorSubject(!1),this.isOrcidLinked$=new cjs.BehaviorSubject(!1),this.onlyAdminCanDisconnectProfileFromOrcid$=new cjs.BehaviorSubject(!1),this.ownerCanDisconnectProfileFromOrcid$=new cjs.BehaviorSubject(!1),this.unlink=new core.bkB,this.AlertType=alert_type.v}ngOnInit(){this.orcidAuthService.getOrcidAuthorizationScopes().subscribe(scopes=>{this.orcidAuthorizationScopes.next(scopes),this.initOrcidAuthSettings()}),this.hasOrcidAuthorizations$=this.hasOrcidAuthorizations(),this.hasMissingOrcidAuthorizations$=this.hasMissingOrcidAuthorizations()}ngOnChanges(changes){!changes.item.isFirstChange()&&changes.item.currentValue!==changes.item.previousValue&&this.initOrcidAuthSettings()}hasOrcidAuthorizations(){return this.profileAuthorizationScopes$.pipe((0,operators.Tj)(scopes=>scopes.length>0))}hasMissingOrcidAuthorizations(){return this.missingAuthorizationScopes.asObservable().pipe((0,operators.Tj)(scopes=>scopes.length>0))}getOrcidNotLinkedMessage(){const orcid=this.item.firstMetadataValue("person.identifier.orcid");return orcid?this.translateService.instant("person.page.orcid.orcid-not-linked-message",{orcid}):this.translateService.instant("person.page.orcid.no-orcid-message")}getAuthorizationDescription(scope){return"person.page.orcid.scope."+scope.substring(1).replace("/","-")}ownerCanDisconnectProfileFromOrcid(){return this.ownerCanDisconnectProfileFromOrcid$.asObservable()}linkOrcid(){this.orcidAuthService.getOrcidAuthorizeUrl(this.item).subscribe(authorizeUrl=>{this._window.nativeWindow.location.href=authorizeUrl})}unlinkOrcid(){this.unlinkProcessing.next(!0),this.orcidAuthService.unlinkOrcidByItem(this.item).pipe((0,shared_operators.qD)(),(0,cjs.catchError)(remote_data_utils.V7)).subscribe(remoteData=>{this.unlinkProcessing.next(!1),remoteData.hasFailed?this.notificationsService.error(this.translateService.get("person.page.orcid.unlink.error")):(this.notificationsService.success(this.translateService.get("person.page.orcid.unlink.success")),this.unlink.emit())})}initOrcidAuthSettings(){this.setOrcidAuthorizationsFromItem(),this.setMissingOrcidAuthorizations(),this.orcidAuthService.onlyAdminCanDisconnectProfileFromOrcid().subscribe(result=>{this.onlyAdminCanDisconnectProfileFromOrcid$.next(result)}),this.orcidAuthService.ownerCanDisconnectProfileFromOrcid().subscribe(result=>{this.ownerCanDisconnectProfileFromOrcid$.next(result)}),this.isOrcidLinked$.next(this.orcidAuthService.isLinkedToOrcid(this.item))}setMissingOrcidAuthorizations(){const profileScopes=this.orcidAuthService.getOrcidAuthorizationScopesByItem(this.item),missingScopes=this.orcidAuthorizationScopes.value.filter(scope=>!profileScopes.includes(scope));this.missingAuthorizationScopes.next(missingScopes)}setOrcidAuthorizationsFromItem(){this.profileAuthorizationScopes$.next(this.orcidAuthService.getOrcidAuthorizationScopesByItem(this.item))}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||OrcidAuthComponent2)(core.rXU(orcid_auth_service.r),core.rXU(ngx_translate_core.c$),core.rXU(notifications_service.I),core.rXU(window_service.lc))}}static{this.\u0275cmp=core.VBU({type:OrcidAuthComponent2,selectors:[["ds-orcid-auth"]],inputs:{item:"item"},outputs:{unlink:"unlink"},standalone:!0,features:[core.OA$,core.aNF],decls:7,vars:6,consts:[[1,"container","mb-5"],["data-test","orcidLinked"],["data-test","orcidNotLinked"],[1,"row"],["data-test","hasOrcidAuthorizations",1,"col-sm-6","mb-3"],[1,"col-sm-6","mb-3"],[1,"card","h-100"],[1,"card-header"],[1,"card-body"],[1,"container"],["data-test","noMissingOrcidAuthorizations",3,"type"],["data-test","missingOrcidAuthorizations",3,"type"],["data-test","unlinkOnlyAdmin",3,"type"],["data-test","unlinkOwner",1,"row"],[1,"container","p-0"],["data-test","orcidAuthorization"],["data-test","missingOrcidAuthorization"],[1,"col"],["type","submit",1,"btn","btn-danger","float-end",3,"click","dsBtnDisabled"],["type","submit",1,"btn","btn-primary","float-end"],[1,"fas","fa-unlink"],[1,"fas","fa-circle-notch","fa-spin"],["type","submit",1,"btn","btn-primary","float-end",3,"click"],[1,"fas","fa-check"],[1,"col-2"],["alt","orcid-logo","src","../../../../assets/images/orcid.logo.icon.svg"],[3,"type"],[1,"btn","btn-primary","float-end",3,"click"],[1,"fas","fa-link"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0)(1,"h1"),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.DNE(4,OrcidAuthComponent_Conditional_4_Template,20,20,"div",1),core.nI1(5,"async"),core.DNE(6,OrcidAuthComponent_Conditional_6_Template,13,5,"div",2),core.k0s()),2&rf&&(core.R7$(2),core.JRh(core.bMT(3,2,"person.orcid.registry.auth")),core.R7$(2),core.vxM(core.bMT(5,4,ctx.isOrcidLinked$)?4:6))},dependencies:[alert_component.C,common.Jj,btn_disabled_directive.A,ngx_translate_core.h,ngx_translate_core.D9]})}}return OrcidAuthComponent2})();var ng_bootstrap=__webpack_require__(87969),orcid_history_data_service=__webpack_require__(4653),orcid_queue_data_service=__webpack_require__(15327),pagination_service=__webpack_require__(31903),pagination_component=__webpack_require__(42191),pagination_component_options_model=__webpack_require__(54396);function OrcidQueueComponent_Conditional_1_Template(rf,ctx){1&rf&&core.nrm(0,"ds-loading")}function OrcidQueueComponent_Conditional_7_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-alert",1),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const ctx_r0=core.XpG();core.Y8G("type",ctx_r0.AlertTypeEnum.Info),core.R7$(),core.SpI(" ",core.bMT(2,2,"person.page.orcid.sync-queue.empty-message")," ")}}function OrcidQueueComponent_Conditional_10_For_17_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"tr",7)(1,"td",8),core.nrm(2,"i",9),core.nI1(3,"translate"),core.k0s(),core.j41(4,"td",6),core.EFF(5),core.k0s(),core.j41(6,"td",10)(7,"div",11)(8,"button",12),core.nI1(9,"translate"),core.bIt("click",function(){const entry_r4=core.eBV(_r3).$implicit,ctx_r0=core.XpG(2);return core.Njj(ctx_r0.send(entry_r4))}),core.nrm(10,"span",13),core.j41(11,"span",14),core.EFF(12),core.nI1(13,"translate"),core.k0s()(),core.j41(14,"button",15),core.nI1(15,"translate"),core.bIt("click",function(){const entry_r4=core.eBV(_r3).$implicit,ctx_r0=core.XpG(2);return core.Njj(ctx_r0.discardEntry(entry_r4))}),core.nrm(16,"span",16),core.j41(17,"span",14),core.EFF(18),core.nI1(19,"translate"),core.k0s()()()()()}if(2&rf){const entry_r4=ctx.$implicit,ctx_r0=core.XpG(2);core.R7$(2),core.Y8G("ngClass",ctx_r0.getIconClass(entry_r4))("ngbTooltip",core.bMT(3,8,ctx_r0.getIconTooltip(entry_r4))),core.R7$(3),core.SpI(" ",entry_r4.description," "),core.R7$(3),core.Y8G("ngbTooltip",core.bMT(9,10,ctx_r0.getOperationTooltip(entry_r4))),core.R7$(2),core.Y8G("ngClass",ctx_r0.getOperationClass(entry_r4)),core.R7$(2),core.JRh(core.bMT(13,12,ctx_r0.getOperationTooltip(entry_r4))),core.R7$(2),core.Y8G("ngbTooltip",core.bMT(15,14,"person.page.orcid.sync-queue.discard")),core.R7$(4),core.JRh(core.bMT(19,16,"person.page.orcid.sync-queue.discard"))}}function OrcidQueueComponent_Conditional_10_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"ds-pagination",3),core.nI1(1,"async"),core.bIt("paginationChange",function(){core.eBV(_r2);const ctx_r0=core.XpG();return core.Njj(ctx_r0.updateList())}),core.j41(2,"div",4)(3,"table",5)(4,"thead")(5,"tr",6)(6,"th"),core.EFF(7),core.nI1(8,"translate"),core.k0s(),core.j41(9,"th"),core.EFF(10),core.nI1(11,"translate"),core.k0s(),core.j41(12,"th"),core.EFF(13),core.nI1(14,"translate"),core.k0s()()(),core.j41(15,"tbody"),core.Z7z(16,OrcidQueueComponent_Conditional_10_For_17_Template,20,18,"tr",7,core.fX1),core.nI1(18,"async"),core.k0s()()()()}if(2&rf){let tmp_2_0,tmp_8_0;const ctx_r0=core.XpG();core.Y8G("paginationOptions",ctx_r0.paginationOptions)("collectionSize",null==(tmp_2_0=core.bMT(1,7,ctx_r0.list$))||null==tmp_2_0.payload?null:tmp_2_0.payload.totalElements)("retainScrollPosition",!1)("hideGear",!0),core.R7$(7),core.JRh(core.bMT(8,9,"person.page.orcid.sync-queue.table.header.type")),core.R7$(3),core.JRh(core.bMT(11,11,"person.page.orcid.sync-queue.table.header.description")),core.R7$(3),core.JRh(core.bMT(14,13,"person.page.orcid.sync-queue.table.header.action")),core.R7$(3),core.Dyx(null==(tmp_8_0=core.bMT(18,15,ctx_r0.list$))||null==tmp_8_0.payload?null:tmp_8_0.payload.page)}}let OrcidQueueComponent=(()=>{class OrcidQueueComponent2{constructor(orcidAuthService,orcidQueueService,translateService,paginationService,notificationsService,orcidHistoryService){this.orcidAuthService=orcidAuthService,this.orcidQueueService=orcidQueueService,this.translateService=translateService,this.paginationService=paginationService,this.notificationsService=notificationsService,this.orcidHistoryService=orcidHistoryService,this.paginationOptions=Object.assign(new pagination_component_options_model.W,{id:"oqp",pageSize:5}),this.processing$=new cjs.BehaviorSubject(!1),this.list$=new cjs.BehaviorSubject({}),this.AlertTypeEnum=alert_type.v,this.subs=[]}ngOnInit(){this.updateList()}ngOnChanges(changes){!changes.item.isFirstChange()&&changes.item.currentValue!==changes.item.previousValue&&this.updateList()}updateList(){this.subs.push(this.paginationService.getCurrentPagination(this.paginationOptions.id,this.paginationOptions).pipe((0,operators.BL)(100),(0,operators.F)(),(0,operators.Mi)(()=>this.processing$.next(!0)),(0,operators.nx)(config=>this.orcidQueueService.searchByProfileItemId(this.item.id,config,!1)),(0,shared_operators.qD)()).subscribe(result=>{this.processing$.next(!1),this.list$.next(result),this.orcidQueueService.clearFindByProfileItemRequests()}))}getIconClass(orcidQueue){if(!orcidQueue.recordType)return"fa fa-user";switch(orcidQueue.recordType.toLowerCase()){case"publication":return"fas fa-book";case"project":return"fas fa-wallet";case"education":return"fas fa-school";case"affiliation":return"fas fa-university";case"country":return"fas fa-globe-europe";case"external_ids":case"researcher_urls":return"fas fa-external-link-alt";default:return"fa fa-user"}}getIconTooltip(orcidQueue){return orcidQueue.recordType?"person.page.orcid.sync-queue.tooltip."+orcidQueue.recordType.toLowerCase():""}getOperationTooltip(orcidQueue){return orcidQueue.operation?"person.page.orcid.sync-queue.tooltip."+orcidQueue.operation.toLowerCase():""}getOperationClass(orcidQueue){if(!orcidQueue.operation)return"";switch(orcidQueue.operation.toLowerCase()){case"insert":return"fas fa-plus";case"update":return"fas fa-edit";case"delete":return"fas fa-trash-alt";default:return""}}discardEntry(orcidQueue){this.processing$.next(!0),this.subs.push(this.orcidQueueService.deleteById(orcidQueue.id).pipe((0,shared_operators.qD)()).subscribe(remoteData=>{this.processing$.next(!1),remoteData.isSuccess?(this.notificationsService.success(this.translateService.get("person.page.orcid.sync-queue.discard.success")),this.updateList()):this.notificationsService.error(this.translateService.get("person.page.orcid.sync-queue.discard.error"))}))}send(orcidQueue){this.processing$.next(!0),this.subs.push(this.orcidHistoryService.sendToORCID(orcidQueue).pipe((0,shared_operators.qD)()).subscribe(remoteData=>{this.processing$.next(!1),remoteData.isSuccess?this.handleOrcidHistoryRecordCreation(remoteData.payload):422===remoteData.statusCode?this.handleValidationErrors(remoteData):this.notificationsService.error(this.translateService.get("person.page.orcid.sync-queue.send.error"))}))}getUnauthorizedErrorContent(){return this.orcidAuthService.getOrcidAuthorizeUrl(this.item).pipe((0,operators.nx)(authorizeUrl=>this.translateService.get("person.page.orcid.sync-queue.send.unauthorized-error.content",{orcid:authorizeUrl})))}handleOrcidHistoryRecordCreation(orcidHistory){switch(orcidHistory.status){case 200:case 201:case 204:this.notificationsService.success(this.translateService.get("person.page.orcid.sync-queue.send.success")),this.updateList();break;case 400:this.notificationsService.error(this.translateService.get("person.page.orcid.sync-queue.send.bad-request-error"),null,{timeOut:0});break;case 401:(0,cjs.combineLatest)([this.translateService.get("person.page.orcid.sync-queue.send.unauthorized-error.title"),this.getUnauthorizedErrorContent()]).subscribe(([title,content])=>{this.notificationsService.error(title,content,{timeOut:0},!0)});break;case 404:this.notificationsService.warning(this.translateService.get("person.page.orcid.sync-queue.send.not-found-warning"));break;case 409:this.notificationsService.error(this.translateService.get("person.page.orcid.sync-queue.send.conflict-error"),null,{timeOut:0});break;default:this.notificationsService.error(this.translateService.get("person.page.orcid.sync-queue.send.error"),null,{timeOut:0})}}handleValidationErrors(remoteData){const translations=[this.translateService.get("person.page.orcid.sync-queue.send.validation-error")],errorMessage=remoteData.errorMessage;errorMessage&&errorMessage.indexOf("Error codes:")>0&&errorMessage.substring(errorMessage.indexOf(":")+1).trim().split(",").forEach(error=>translations.push(this.translateService.get("person.page.orcid.sync-queue.send.validation-error."+error))),(0,cjs.combineLatest)(translations).subscribe(messages=>{const title=messages.shift(),content="<ul>"+messages.map(message=>`<li>${message}</li>`).join("")+"</ul>";this.notificationsService.error(title,content,{timeOut:0},!0)})}ngOnDestroy(){this.list$=null,this.subs.filter(subscription=>(0,empty_util.a4)(subscription)).forEach(subscription=>subscription.unsubscribe())}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||OrcidQueueComponent2)(core.rXU(orcid_auth_service.r),core.rXU(orcid_queue_data_service.OrcidQueueDataService),core.rXU(ngx_translate_core.c$),core.rXU(pagination_service.m),core.rXU(notifications_service.I),core.rXU(orcid_history_data_service.OrcidHistoryDataService))}}static{this.\u0275cmp=core.VBU({type:OrcidQueueComponent2,selectors:[["ds-orcid-queue"]],inputs:{item:"item"},standalone:!0,features:[core.OA$,core.aNF],decls:13,vars:16,consts:[[1,"container"],[3,"type"],[3,"paginationOptions","collectionSize","retainScrollPosition","hideGear"],[3,"paginationChange","paginationOptions","collectionSize","retainScrollPosition","hideGear"],[1,"table-responsive"],["id","groups",1,"table","table-sm","table-striped","table-hover","table-bordered"],[1,"text-center","align-middle"],["data-test","orcidQueueElementRow"],[1,"text-center","align-middle",2,"width","15%"],["aria-hidden","true",1,"fa-2x",3,"ngClass","ngbTooltip"],[1,"text-center",2,"width","20%"],[1,"btn-group","edit-field"],["container","body",1,"btn","btn-outline-primary","my-1","col-md",3,"click","ngbTooltip"],[3,"ngClass"],[1,"sr-only"],["container","body",1,"btn","btn-outline-danger","my-1","col-md",3,"click","ngbTooltip"],[1,"fas","fa-unlink"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.DNE(1,OrcidQueueComponent_Conditional_1_Template,1,0,"ds-loading"),core.nI1(2,"async"),core.j41(3,"div",0)(4,"h2"),core.EFF(5),core.nI1(6,"translate"),core.k0s(),core.DNE(7,OrcidQueueComponent_Conditional_7_Template,3,4,"ds-alert",1),core.nI1(8,"async"),core.nI1(9,"async"),core.DNE(10,OrcidQueueComponent_Conditional_10_Template,19,17,"ds-pagination",2),core.nI1(11,"async"),core.nI1(12,"async"),core.k0s()()),2&rf){let tmp_2_0,tmp_3_0;core.R7$(),core.vxM(core.bMT(2,4,ctx.processing$)?1:-1),core.R7$(4),core.JRh(core.bMT(6,6,"person.orcid.registry.queue")),core.R7$(2),core.vxM(!0!==core.bMT(8,8,ctx.processing$)&&0===(null==(tmp_2_0=core.bMT(9,10,ctx.list$))||null==tmp_2_0.payload?null:tmp_2_0.payload.totalElements)?7:-1),core.R7$(3),core.vxM(!0!==core.bMT(11,12,ctx.processing$)&&(null==(tmp_3_0=core.bMT(12,14,ctx.list$))||null==tmp_3_0.payload?null:tmp_3_0.payload.totalElements)>0?10:-1)}},dependencies:[alert_component.C,common.MD,common.YU,common.Jj,ng_bootstrap.n8,ng_bootstrap.md,pagination_component.e,themed_loading_component.v,ngx_translate_core.h,ngx_translate_core.D9]})}}return OrcidQueueComponent2})();var researcher_profile_data_service=__webpack_require__(70647);function OrcidSyncSettingsComponent_For_24_Template(rf,ctx){if(1&rf&&(core.j41(0,"option",14),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const syncMode_r3=ctx.$implicit;core.Y8G("value",syncMode_r3.value),core.R7$(),core.JRh(core.bMT(2,2,syncMode_r3.label))}}function OrcidSyncSettingsComponent_For_39_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"div",18)(1,"input",24),core.mxI("ngModelChange",function($event){core.eBV(_r4);const ctx_r4=core.XpG();return core.DH7(ctx_r4.currentSyncPublications,$event)||(ctx_r4.currentSyncPublications=$event),core.Njj($event)}),core.k0s(),core.j41(2,"label",25),core.EFF(3),core.nI1(4,"translate"),core.k0s()()}if(2&rf){const option_r6=ctx.$implicit,ctx_r4=core.XpG();core.R7$(),core.Mz_("id","publicationOption_",option_r6.value,""),core.R50("ngModel",ctx_r4.currentSyncPublications),core.Y8G("value",option_r6.value),core.R7$(),core.Mz_("for","publicationOption_",option_r6.value,""),core.R7$(),core.JRh(core.bMT(4,7,option_r6.label))}}function OrcidSyncSettingsComponent_For_53_Template(rf,ctx){if(1&rf){const _r7=core.RV6();core.j41(0,"div",18)(1,"input",26),core.mxI("ngModelChange",function($event){core.eBV(_r7);const ctx_r4=core.XpG();return core.DH7(ctx_r4.currentSyncFunding,$event)||(ctx_r4.currentSyncFunding=$event),core.Njj($event)}),core.k0s(),core.j41(2,"label",27),core.EFF(3),core.nI1(4,"translate"),core.k0s()()}if(2&rf){const option_r8=ctx.$implicit,ctx_r4=core.XpG();core.R7$(),core.Mz_("id","fundingOption_",option_r8.value,""),core.R50("ngModel",ctx_r4.currentSyncFunding),core.Y8G("value",option_r8.value),core.R7$(),core.Mz_("for","fundingOption_",option_r8.value,""),core.R7$(),core.JRh(core.bMT(4,7,option_r8.label))}}function OrcidSyncSettingsComponent_For_67_Template(rf,ctx){if(1&rf){const _r9=core.RV6();core.j41(0,"div",18)(1,"input",28),core.mxI("ngModelChange",function($event){const option_r10=core.eBV(_r9).$implicit;return core.DH7(option_r10.checked,$event)||(option_r10.checked=$event),core.Njj($event)}),core.k0s(),core.j41(2,"label",27),core.EFF(3),core.nI1(4,"translate"),core.k0s()()}if(2&rf){const option_r10=ctx.$implicit;core.R7$(),core.Mz_("name","syncProfile_",option_r10.value,""),core.Mz_("id","profileOption_",option_r10.value,""),core.R50("ngModel",option_r10.checked),core.Y8G("value",option_r10.value),core.R7$(),core.Mz_("for","profileOption_",option_r10.value,""),core.R7$(),core.JRh(core.bMT(4,9,option_r10.label))}}let OrcidSyncSettingsComponent=(()=>{class OrcidSyncSettingsComponent2{#destroy$;#item$;#researcherProfile$;constructor(researcherProfileService,notificationsService,translateService){this.researcherProfileService=researcherProfileService,this.notificationsService=notificationsService,this.translateService=translateService,this.AlertType=alert_type.v,this.messagePrefix="person.page.orcid",this.settingsUpdated=new core.bkB,this.#destroy$=new core.bkB,this.#item$=new cjs.BehaviorSubject(null)}set item(item){this.#item$.next(item)}ngOnDestroy(){this.#destroy$.next()}ngOnInit(){this.syncModes=[{label:this.messagePrefix+".synchronization-mode.batch",value:"BATCH"},{label:this.messagePrefix+".synchronization-mode.manual",value:"MANUAL"}],this.syncPublicationOptions=["DISABLED","ALL"].map(value=>({label:this.messagePrefix+".sync-publications."+value.toLowerCase(),value})),this.syncFundingOptions=["DISABLED","ALL"].map(value=>({label:this.messagePrefix+".sync-fundings."+value.toLowerCase(),value})),this.updateSyncProfileOptions(this.#item$.asObservable()),this.updateSyncPreferences(this.#item$.asObservable()),this.#researcherProfile$=this.#item$.pipe((0,operators.nx)(item=>this.researcherProfileService.findByRelatedItem(item).pipe((0,shared_operators.qD)(),(0,operators.WL)(remote_data_utils.V7),(0,shared_operators.Bo)())),(0,operators.QK)(this.#destroy$))}onSubmit(form){const operations=[];this.fillOperationsFor(operations,"/orcid/mode",form.value.syncMode),this.fillOperationsFor(operations,"/orcid/publications",form.value.syncPublications),this.fillOperationsFor(operations,"/orcid/fundings",form.value.syncFundings);const syncProfileValue=this.syncProfileOptions.map(syncProfileOption=>syncProfileOption.value).filter(value=>form.value["syncProfile_"+value]).join(",");this.fillOperationsFor(operations,"/orcid/profile",syncProfileValue),0!==operations.length&&this.#researcherProfile$.pipe((0,operators.nx)(researcherProfile=>this.researcherProfileService.patch(researcherProfile,operations)),(0,shared_operators.qD)(),(0,operators.WL)(remote_data_utils.V7),(0,operators.s)(1)).subscribe(remoteData=>{remoteData.hasFailed?this.notificationsService.error(this.translateService.get(this.messagePrefix+".synchronization-settings-update.error")):(this.notificationsService.success(this.translateService.get(this.messagePrefix+".synchronization-settings-update.success")),this.settingsUpdated.emit())})}updateSyncPreferences(item){item.pipe((0,operators.pb)(empty_util.a4),(0,operators.Tj)(i=>this.getCurrentPreference(i,"dspace.orcid.sync-mode",["BATCH","MANUAL"],"MANUAL")),(0,operators.QK)(this.#destroy$)).subscribe(val=>this.currentSyncMode=val),item.pipe((0,operators.pb)(empty_util.a4),(0,operators.Tj)(i=>this.getCurrentPreference(i,"dspace.orcid.sync-publications",["DISABLED","ALL"],"DISABLED")),(0,operators.QK)(this.#destroy$)).subscribe(val=>this.currentSyncPublications=val),item.pipe((0,operators.pb)(empty_util.a4),(0,operators.Tj)(i=>this.getCurrentPreference(i,"dspace.orcid.sync-fundings",["DISABLED","ALL"],"DISABLED")),(0,operators.QK)(this.#destroy$)).subscribe(val=>this.currentSyncFunding=val)}updateSyncProfileOptions(item){item.pipe((0,operators.pb)(empty_util.a4),(0,operators.Tj)(i=>i.allMetadataValues("dspace.orcid.sync-profile")),(0,operators.Tj)(metadata=>["BIOGRAPHICAL","IDENTIFIERS"].map(value=>({label:this.messagePrefix+".sync-profile."+value.toLowerCase(),value,checked:metadata.includes(value)}))),(0,operators.QK)(this.#destroy$)).subscribe(value=>this.syncProfileOptions=value)}getCurrentPreference(item,metadataField,allowedValues,defaultValue){const currentPreference=item.firstMetadataValue(metadataField);return currentPreference&&allowedValues.includes(currentPreference)?currentPreference:defaultValue}fillOperationsFor(operations,path,currentValue){operations.push({path,op:"replace",value:currentValue})}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||OrcidSyncSettingsComponent2)(core.rXU(researcher_profile_data_service.ResearcherProfileDataService),core.rXU(notifications_service.I),core.rXU(ngx_translate_core.c$))}}static{this.\u0275cmp=core.VBU({type:OrcidSyncSettingsComponent2,selectors:[["ds-orcid-sync-setting"]],inputs:{item:"item"},outputs:{settingsUpdated:"settingsUpdated"},standalone:!0,features:[core.aNF],decls:74,vars:38,consts:[["f","ngForm"],[1,"container","mb-5"],[3,"ngSubmit"],[1,"row","mb-3"],[1,"col-md"],["data-test","sync-mode",1,"card"],[1,"card-header"],[1,"card-body"],[1,"container"],[1,"row"],[3,"type"],[1,"mb-3","row"],["for","syncMode",1,"form-label"],["name","syncMode","id","syncMode","required","",1,"form-select",3,"ngModelChange","ngModel"],[3,"value"],[1,"col-md","mb-3"],["data-test","sync-mode-publication",1,"card","h-100"],[1,"mb-3"],[1,"row","form-check"],["data-test","sync-mode-funding",1,"card","h-100"],["data-test","profile-preferences",1,"card","h-100"],[1,"col"],["type","submit",1,"btn","btn-primary","float-end"],[1,"fas","fa-edit"],["type","radio","name","syncPublications","required","",3,"ngModelChange","ngModel","id","value"],[1,"form-label",3,"for"],["type","radio","name","syncFundings","required","",3,"ngModelChange","ngModel","id","value"],[1,"ms-2","form-label",3,"for"],["type","checkbox",3,"ngModelChange","ngModel","name","id","value"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div",1)(1,"h2"),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"form",2,0),core.bIt("ngSubmit",function(){core.eBV(_r1);const f_r2=core.sdS(5);return core.Njj(ctx.onSubmit(f_r2.form))}),core.j41(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6),core.EFF(10),core.nI1(11,"translate"),core.k0s(),core.j41(12,"div",7)(13,"div",8)(14,"div",9)(15,"ds-alert",10),core.EFF(16),core.nI1(17,"translate"),core.k0s()(),core.j41(18,"div",11)(19,"label",12),core.EFF(20),core.nI1(21,"translate"),core.k0s(),core.j41(22,"select",13),core.mxI("ngModelChange",function($event){return core.eBV(_r1),core.DH7(ctx.currentSyncMode,$event)||(ctx.currentSyncMode=$event),core.Njj($event)}),core.Z7z(23,OrcidSyncSettingsComponent_For_24_Template,3,4,"option",14,core.fX1),core.k0s()()()()()()(),core.j41(25,"div",9)(26,"div",15)(27,"div",16)(28,"div",6),core.EFF(29),core.nI1(30,"translate"),core.k0s(),core.j41(31,"div",7)(32,"div",8)(33,"div",9)(34,"ds-alert",10),core.EFF(35),core.nI1(36,"translate"),core.k0s()(),core.j41(37,"div",17),core.Z7z(38,OrcidSyncSettingsComponent_For_39_Template,5,9,"div",18,core.fX1),core.k0s()()()()(),core.j41(40,"div",15)(41,"div",19)(42,"div",6),core.EFF(43),core.nI1(44,"translate"),core.k0s(),core.j41(45,"div",7)(46,"div",8)(47,"div",9)(48,"ds-alert",10),core.EFF(49),core.nI1(50,"translate"),core.k0s()(),core.j41(51,"div",17),core.Z7z(52,OrcidSyncSettingsComponent_For_53_Template,5,9,"div",18,core.fX1),core.k0s()()()()(),core.j41(54,"div",15)(55,"div",20)(56,"div",6),core.EFF(57),core.nI1(58,"translate"),core.k0s(),core.j41(59,"div",7)(60,"div",8)(61,"div",9)(62,"ds-alert",10),core.EFF(63),core.nI1(64,"translate"),core.k0s()(),core.j41(65,"div",17),core.Z7z(66,OrcidSyncSettingsComponent_For_67_Template,5,11,"div",18,core.fX1),core.k0s()()()()()(),core.j41(68,"div",9)(69,"div",21)(70,"button",22),core.nrm(71,"i",23),core.EFF(72),core.nI1(73,"translate"),core.k0s()()()()()}2&rf&&(core.R7$(2),core.JRh(core.bMT(3,16,"person.orcid.sync.setting")),core.R7$(8),core.JRh(core.bMT(11,18,"person.page.orcid.synchronization-mode")),core.R7$(5),core.Y8G("type",ctx.AlertType.Info),core.R7$(),core.SpI(" ",core.bMT(17,20,"person.page.orcid.synchronization-mode-message")," "),core.R7$(4),core.JRh(core.bMT(21,22,"person.page.orcid.synchronization-mode.label")),core.R7$(2),core.R50("ngModel",ctx.currentSyncMode),core.R7$(),core.Dyx(ctx.syncModes),core.R7$(6),core.JRh(core.bMT(30,24,"person.page.orcid.publications-preferences")),core.R7$(5),core.Y8G("type",ctx.AlertType.Info),core.R7$(),core.SpI(" ",core.bMT(36,26,"person.page.orcid.synchronization-mode-publication-message")," "),core.R7$(3),core.Dyx(ctx.syncPublicationOptions),core.R7$(5),core.JRh(core.bMT(44,28,"person.page.orcid.funding-preferences")),core.R7$(5),core.Y8G("type",ctx.AlertType.Info),core.R7$(),core.SpI(" ",core.bMT(50,30,"person.page.orcid.synchronization-mode-funding-message")," "),core.R7$(3),core.Dyx(ctx.syncFundingOptions),core.R7$(5),core.JRh(core.bMT(58,32,"person.page.orcid.profile-preferences")),core.R7$(5),core.Y8G("type",ctx.AlertType.Info),core.R7$(),core.SpI(" ",core.bMT(64,34,"person.page.orcid.synchronization-mode-profile-message")," "),core.R7$(3),core.Dyx(ctx.syncProfileOptions),core.R7$(6),core.SpI(" ",core.bMT(73,36,"person.page.orcid.save.preference.changes")," "))},dependencies:[alert_component.C,fesm2022_forms.YN,fesm2022_forms.qT,fesm2022_forms.xH,fesm2022_forms.y7,fesm2022_forms.me,fesm2022_forms.Zm,fesm2022_forms.wz,fesm2022_forms.Fm,fesm2022_forms.BC,fesm2022_forms.cb,fesm2022_forms.YS,fesm2022_forms.vS,fesm2022_forms.cV,ngx_translate_core.h,ngx_translate_core.D9],styles:[".form-check[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-check[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:auto}"]})}}return OrcidSyncSettingsComponent2})();function OrcidPageComponent_Conditional_0_Template(rf,ctx){1&rf&&(core.nrm(0,"ds-loading",0),core.nI1(1,"translate")),2&rf&&core.Y8G("message",core.bMT(1,1,"person.page.orcid.link.processing"))}function OrcidPageComponent_Conditional_2_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",1)(1,"ds-alert",3),core.EFF(2),core.nI1(3,"translate"),core.k0s()()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Y8G("type",ctx_r0.AlertType.Error),core.R7$(),core.JRh(core.bMT(3,2,"person.page.orcid.link.error.message"))}}function OrcidPageComponent_Conditional_5_Conditional_2_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"ds-orcid-sync-setting",7),core.nI1(1,"async"),core.bIt("settingsUpdated",function(){core.eBV(_r3);const ctx_r0=core.XpG(2);return core.Njj(ctx_r0.updateItem())}),core.k0s()}if(2&rf){const ctx_r0=core.XpG(2);core.Y8G("item",core.bMT(1,1,ctx_r0.item))}}function OrcidPageComponent_Conditional_5_Conditional_3_Template(rf,ctx){if(1&rf&&(core.nrm(0,"ds-orcid-queue",6),core.nI1(1,"async")),2&rf){const ctx_r0=core.XpG(2);core.Y8G("item",core.bMT(1,1,ctx_r0.item))}}function OrcidPageComponent_Conditional_5_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"ds-orcid-auth",4),core.nI1(1,"async"),core.bIt("unlink",function(){core.eBV(_r2);const ctx_r0=core.XpG();return core.Njj(ctx_r0.updateItem())}),core.k0s(),core.DNE(2,OrcidPageComponent_Conditional_5_Conditional_2_Template,2,3,"ds-orcid-sync-setting",5)(3,OrcidPageComponent_Conditional_5_Conditional_3_Template,2,3,"ds-orcid-queue",6)}if(2&rf){const ctx_r0=core.XpG();core.Y8G("item",core.bMT(1,3,ctx_r0.item)),core.R7$(2),core.vxM(ctx_r0.isLinkedToOrcid()?2:-1),core.R7$(),core.vxM(ctx_r0.isLinkedToOrcid()?3:-1)}}function OrcidPageComponent_Conditional_9_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",2)(1,"div",8)(2,"div",9)(3,"a",10),core.nrm(4,"i",11),core.EFF(5),core.nI1(6,"translate"),core.k0s()()()()),2&rf){const ctx_r0=core.XpG();core.R7$(3),core.Y8G("routerLink",ctx_r0.getItemPage()),core.R7$(2),core.SpI(" ",core.bMT(6,2,"item.orcid.return")," ")}}let OrcidPageComponent=(()=>{class OrcidPageComponent2{constructor(platformId,authService,itemService,orcidAuthService,route,router){this.platformId=platformId,this.authService=authService,this.itemService=itemService,this.orcidAuthService=orcidAuthService,this.route=route,this.router=router,this.AlertType=alert_type.v,this.connectionStatus=new cjs.BehaviorSubject(!1),this.item=new cjs.BehaviorSubject(null),this.processingConnection=new cjs.BehaviorSubject(!0)}ngOnInit(){if((0,common.UE)(this.platformId)){const codeParam$=this.route.queryParamMap.pipe((0,operators.s)(1),(0,operators.Tj)(paramMap=>paramMap.get("code"))),item$=this.route.data.pipe((0,operators.Tj)(data=>data.dso),(0,authorized_operators.QD)(this.router,this.authService),(0,shared_operators.ak)());(0,cjs.combineLatest)([codeParam$,item$]).subscribe(([codeParam,item])=>{this.itemId=item.id,(0,empty_util.hj)(codeParam)?this.linkProfileToOrcid(item,codeParam):(this.item.next(item),this.processingConnection.next(!1),this.connectionStatus.next(!0))})}}isLinkedToOrcid(){return this.orcidAuthService.isLinkedToOrcid(this.item.value)}getItemPage(){return(0,item_page_routing_paths._o)(this.item.value)}updateItem(){this.clearRouteParams(),this.itemService.findById(this.itemId,!1).pipe((0,shared_operators.qD)()).subscribe(itemRD=>{itemRD.hasSucceeded&&this.item.next(itemRD.payload)})}linkProfileToOrcid(person,code){this.orcidAuthService.linkOrcidByItem(person,code).pipe((0,shared_operators.qD)()).subscribe(profileRD=>{this.processingConnection.next(!1),profileRD.hasSucceeded?(this.connectionStatus.next(!0),this.updateItem()):(this.item.next(person),this.connectionStatus.next(!1),this.clearRouteParams())})}clearRouteParams(){this.route.queryParamMap.pipe((0,operators.pb)(paramMap=>(0,empty_util.hj)(paramMap.keys)),(0,operators.Tj)(_=>Object.assign({})),(0,operators.s)(1)).subscribe(queryParams=>this.router.navigate([],{relativeTo:this.route,queryParams}))}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||OrcidPageComponent2)(core.rXU(core.Agw),core.rXU(auth_service.uR),core.rXU(item_data_service.ItemDataService),core.rXU(orcid_auth_service.r),core.rXU(fesm2022_router.nX),core.rXU(fesm2022_router.Ix))}}static{this.\u0275cmp=core.VBU({type:OrcidPageComponent2,selectors:[["ds-orcid-page"]],standalone:!0,features:[core.aNF],decls:12,vars:20,consts:[[3,"message"],["data-test","error-box",1,"container"],[1,"container"],[3,"type"],["data-test","orcid-auth",3,"unlink","item"],["data-test","orcid-sync-setting",3,"item"],[3,"item"],["data-test","orcid-sync-setting",3,"settingsUpdated","item"],[1,"button-row","bottom","mb-3"],[1,"text-end"],["role","button","data-test","back-button",1,"btn","btn-outline-secondary",3,"routerLink"],[1,"fas","fa-arrow-left"]],template:function(rf,ctx){1&rf&&(core.DNE(0,OrcidPageComponent_Conditional_0_Template,2,3,"ds-loading",0),core.nI1(1,"async"),core.DNE(2,OrcidPageComponent_Conditional_2_Template,4,4,"div",1),core.nI1(3,"async"),core.nI1(4,"async"),core.DNE(5,OrcidPageComponent_Conditional_5_Template,4,5),core.nI1(6,"async"),core.nI1(7,"async"),core.nI1(8,"async"),core.DNE(9,OrcidPageComponent_Conditional_9_Template,7,4,"div",2),core.nI1(10,"async"),core.nI1(11,"async")),2&rf&&(core.vxM(core.bMT(1,4,ctx.processingConnection)?0:-1),core.R7$(2),core.vxM(!0!==core.bMT(3,6,ctx.processingConnection)&&!0!==core.bMT(4,8,ctx.connectionStatus)?2:-1),core.R7$(3),core.vxM(!0!==core.bMT(6,10,ctx.processingConnection)&&core.bMT(7,12,ctx.item)&&core.bMT(8,14,ctx.connectionStatus)?5:-1),core.R7$(4),core.vxM(!0!==core.bMT(10,16,ctx.processingConnection)&&core.bMT(11,18,ctx.item)?9:-1))},dependencies:[alert_component.C,common.Jj,OrcidAuthComponent,OrcidQueueComponent,OrcidSyncSettingsComponent,fesm2022_router.Wk,themed_loading_component.v,ngx_translate_core.h,ngx_translate_core.D9]})}}return OrcidPageComponent2})();const orcidPageGuard=(0,__webpack_require__(47339).L)(()=>item_page_resolver.Z,()=>(0,cjs.of)(feature_id._.CanSynchronizeWithORCID));var themed_component=__webpack_require__(79241);__webpack_require__(84942);const themed_item_page_component_c0=["*"];function ThemedItemPageComponent_ng_template_0_Template(rf,ctx){}let ThemedItemPageComponent=(()=>{class ThemedItemPageComponent2 extends themed_component.J{getComponentName(){return"ItemPageComponent"}importThemedComponent(themeName){return __webpack_require__(5729)(`./${themeName}/app/item-page/simple/item-page.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,84942))}static{this.\u0275fac=(()=>{let \u0275ThemedItemPageComponent_BaseFactory;return function(__ngFactoryType__){return(\u0275ThemedItemPageComponent_BaseFactory||(\u0275ThemedItemPageComponent_BaseFactory=core.xGo(ThemedItemPageComponent2)))(__ngFactoryType__||ThemedItemPageComponent2)}})()}static{this.\u0275cmp=core.VBU({type:ThemedItemPageComponent2,selectors:[["ds-item-page"]],standalone:!0,features:[core.Vt3,core.aNF],ngContentSelectors:themed_item_page_component_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(core.NAR(),core.DNE(0,ThemedItemPageComponent_ng_template_0_Template,0,0,"ng-template",null,0,core.C5r),core.j41(2,"div",null,1),core.SdG(4),core.k0s())},encapsulation:2})}}return ThemedItemPageComponent2})();var ngrx_store=__webpack_require__(22609),version_data_service=__webpack_require__(54610),resolver_actions=__webpack_require__(14998);const VERSION_PAGE_LINKS_TO_FOLLOW=[(0,__webpack_require__(76715).s)("item")],ROUTES=[{path:":id",resolve:{dso:item_page_resolver.Z,itemRequest:accessTokenResolver,breadcrumb:(route,state,breadcrumbService=(0,core.WQX)(dso_breadcrumbs_service.U),dataService=(0,core.WQX)(item_data_service.ItemDataService))=>{const linksToFollow=(0,item_resolver.U)();return(0,dso_breadcrumb_resolver.G)(route,state,breadcrumbService,dataService,...linksToFollow)}},runGuardsAndResolvers:"always",children:[{path:"",component:ThemedItemPageComponent,pathMatch:"full",data:{menuRoute:menu_route_model.r.ITEM_PAGE},resolve:{tracking:view_tracker_resolver.Y}},{path:"full",component:themed_full_item_page_component.i,data:{menuRoute:menu_route_model.r.ITEM_PAGE},resolve:{tracking:view_tracker_resolver.Y}},{path:item_page_routing_paths.jU,loadChildren:()=>__webpack_require__.e(4592).then(__webpack_require__.bind(__webpack_require__,44592)).then(m=>m.ROUTES)},{path:item_page_routing_paths.aX,component:UploadBitstreamComponent,canActivate:[authenticated_guard.t]},{path:app_routing_paths.RZ,component:BitstreamRequestACopyPageComponent},{path:item_page_routing_paths._z,component:OrcidPageComponent,canActivate:[authenticated_guard.t,orcidPageGuard]},{path:item_page_routing_paths.HN,component:themed_full_item_page_component.i,resolve:{menu:accessTokenResolver}}]},{path:"version",children:[{path:":id",component:(()=>{class VersionPageComponent2{constructor(route,router,versionService,authService){this.route=route,this.router=router,this.versionService=versionService,this.authService=authService}ngOnInit(){this.versionRD$=this.route.data.pipe((0,operators.Tj)(data=>data.dso),(0,authorized_operators.QD)(this.router,this.authService)),this.versionRD$.pipe((0,shared_operators.ak)(),(0,operators.nx)(version=>version.item),(0,authorized_operators.QD)(this.router,this.authService),(0,shared_operators.qD)()).subscribe(itemRD=>{if(itemRD.hasNoContent)this.router.navigateByUrl((0,app_routing_paths.EX)(),{skipLocationChange:!0});else{const itemUrl=(0,item_page_routing_paths._o)(itemRD.payload);this.router.navigateByUrl(itemUrl)}})}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||VersionPageComponent2)(core.rXU(fesm2022_router.nX),core.rXU(fesm2022_router.Ix),core.rXU(version_data_service.VersionDataService),core.rXU(auth_service.uR))}}static{this.\u0275cmp=core.VBU({type:VersionPageComponent2,selectors:[["ds-version-page"]],standalone:!0,features:[core.aNF],decls:0,vars:0,template:function(rf,ctx){}})}}return VersionPageComponent2})(),resolve:{dso:(route,state,versionService=(0,core.WQX)(version_data_service.VersionDataService),store=(0,core.WQX)(ngrx_store.il))=>{const versionRD$=versionService.findById(route.params.id,!0,!1,...VERSION_PAGE_LINKS_TO_FOLLOW).pipe((0,shared_operators.qD)());return versionRD$.subscribe(versionRD=>{store.dispatch(new resolver_actions.j(state.url,versionRD.payload))}),versionRD$}}}]}]},88136:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>itemPageResolver});var _angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(25376),_angular_router__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(18134),_ngrx_store__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(22609),rxjs_operators__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(60444),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(54545),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(94149),_core_resolving_resolver_actions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(14998),_core_shared_authorized_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(36113),_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(39022),_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2794),_item_resolver__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(53046),_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(88292);const itemPageResolver=(route,state,router=(0,_angular_core__WEBPACK_IMPORTED_MODULE_6__.WQX)(_angular_router__WEBPACK_IMPORTED_MODULE_7__.Ix),itemService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_6__.WQX)(_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_1__.ItemDataService),store=(0,_angular_core__WEBPACK_IMPORTED_MODULE_6__.WQX)(_ngrx_store__WEBPACK_IMPORTED_MODULE_8__.il),authService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_6__.WQX)(_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_0__.uR))=>{const itemRD$=itemService.findById(route.params.id,!0,!1,...(0,_item_resolver__WEBPACK_IMPORTED_MODULE_5__.U)()).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.qD)(),(0,_core_shared_authorized_operators__WEBPACK_IMPORTED_MODULE_3__.QD)(router,authService));return itemRD$.subscribe(itemRD=>{store.dispatch(new _core_resolving_resolver_actions__WEBPACK_IMPORTED_MODULE_2__.j(state.url,itemRD.payload))}),itemRD$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_9__.Tj)(rd=>{if(rd.hasSucceeded&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.a4)(rd.payload)){const thisRoute=state.url,itemRoute=router.parseUrl((0,_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_11__._o)(rd.payload)).toString();if(!thisRoute.startsWith(itemRoute)){const itemId=rd.payload.uuid,subRoute=thisRoute.substring(thisRoute.indexOf(itemId)+itemId.length,thisRoute.length);router.navigateByUrl(itemRoute+subRoute)}}return rd}))}},53046:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>itemResolver,U:()=>getItemPageLinksToFollow});var _angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25376),_ngrx_store__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(22609),_environments_environment__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(64369),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(94149),_core_resolving_resolver_actions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(14998),_core_shared_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(39022),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(76715);function getItemPageLinksToFollow(){const followLinks=[(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__.s)("owningCollection",{},(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__.s)("parentCommunity",{},(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__.s)("parentCommunity"))),(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__.s)("relationships"),(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__.s)("version",{},(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__.s)("versionhistory")),(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__.s)("thumbnail")];return _environments_environment__WEBPACK_IMPORTED_MODULE_0__.c.item.showAccessStatuses&&followLinks.push((0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_4__.s)("accessStatus")),followLinks}const itemResolver=(route,state,itemService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_5__.WQX)(_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_1__.ItemDataService),store=(0,_angular_core__WEBPACK_IMPORTED_MODULE_5__.WQX)(_ngrx_store__WEBPACK_IMPORTED_MODULE_6__.il))=>{const itemRD$=itemService.findById(route.params.id,!0,!1,...getItemPageLinksToFollow()).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_3__.qD)());return itemRD$.subscribe(itemRD=>{store.dispatch(new _core_resolving_resolver_actions__WEBPACK_IMPORTED_MODULE_2__.j(state.url,itemRD.payload))}),itemRD$}},41154:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{f:()=>AccessByTokenNotificationComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(87514),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2385),rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(60444),_shared_date_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(13651),_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2794),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(17543),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(25376),_angular_router__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(18134);function AccessByTokenNotificationComponent_ng_container_0_Conditional_1_Conditional_0_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(0,"div",1)(1,"p")(2,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nrm(4,"i",5),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(5),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(6,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(7,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(8),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(9,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.BMQ("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(3,3,"bitstream-request-a-copy.access-by-token.alt-text")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(6,5,"bitstream-request-a-copy.access-by-token.not-granted")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(9,7,"bitstream-request-a-copy.access-by-token.re-request")))}function AccessByTokenNotificationComponent_ng_container_0_Conditional_1_Conditional_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(0,"div",2)(1,"p")(2,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nrm(4,"i",5),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(5),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(6,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(7,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(8),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(9,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s()()),2&rf){const itemRequest_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG(2).ngVar,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.BMQ("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(3,4,"bitstream-request-a-copy.access-by-token.alt-text")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Lme("",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(6,6,"bitstream-request-a-copy.access-by-token.expired")," ",ctx_r1.formatDate(itemRequest_r1.accessExpiry),""),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(9,8,"bitstream-request-a-copy.access-by-token.re-request"))}}function AccessByTokenNotificationComponent_ng_container_0_Conditional_1_Conditional_2_Conditional_7_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(0,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s()),2&rf){const itemRequest_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG(3).ngVar,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.Lme("",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(2,2,"bitstream-request-a-copy.access-by-token.expiry-label")," ",ctx_r1.formatDate(itemRequest_r1.accessExpiry),"")}}function AccessByTokenNotificationComponent_ng_container_0_Conditional_1_Conditional_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.j41(0,"div",3)(1,"p")(2,"span",6),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nrm(4,"i",7),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.EFF(5),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(6,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.DNE(7,AccessByTokenNotificationComponent_ng_container_0_Conditional_1_Conditional_2_Conditional_7_Template,3,4,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_1__.k0s()),2&rf){const itemRequest_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG(2).ngVar,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.BMQ("aria-label",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(3,3,"bitstream-request-a-copy.access-by-token.alt-text")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_1__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(6,5,"bitstream-request-a-copy.access-by-token.warning")),_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_1__.vxM(ctx_r1.hasValue(itemRequest_r1.accessExpiry)&&!itemRequest_r1.accessExpiry.startsWith("+294276")?7:-1)}}function AccessByTokenNotificationComponent_ng_container_0_Conditional_1_Template(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.DNE(0,AccessByTokenNotificationComponent_ng_container_0_Conditional_1_Conditional_0_Template,10,9,"div",1)(1,AccessByTokenNotificationComponent_ng_container_0_Conditional_1_Conditional_1_Template,10,10,"div",2)(2,AccessByTokenNotificationComponent_ng_container_0_Conditional_1_Conditional_2_Template,8,7,"div",3),2&rf){const itemRequest_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_1__.vxM(itemRequest_r1.acceptRequest?itemRequest_r1.accessExpired?1:2:0)}}function AccessByTokenNotificationComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.qex(0),_angular_core__WEBPACK_IMPORTED_MODULE_1__.DNE(1,AccessByTokenNotificationComponent_ng_container_0_Conditional_1_Template,3,1),_angular_core__WEBPACK_IMPORTED_MODULE_1__.bVm()),2&rf){const itemRequest_r1=ctx.ngVar,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_1__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_1__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_1__.vxM(ctx_r1.hasValue(itemRequest_r1)?1:-1)}}let AccessByTokenNotificationComponent=(()=>{class AccessByTokenNotificationComponent2{constructor(route){this.route=route,this.hasValue=_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.a4}ngOnInit(){this.itemRequest$=this.route.data.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.Tj)(data=>data.itemRequest))}formatDate(date){return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_2__.hj)(date)?(0,_shared_date_util__WEBPACK_IMPORTED_MODULE_0__.$T)((0,_shared_date_util__WEBPACK_IMPORTED_MODULE_0__.PR)(date)):""}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||AccessByTokenNotificationComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_4__.nX))}}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_1__.VBU({type:AccessByTokenNotificationComponent2,selectors:[["ds-access-by-token-notification"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_1__.aNF],decls:2,vars:3,consts:[[4,"ngVar"],[1,"alert","alert-danger","wb-100","mb-2","request-a-copy-access-success"],[1,"alert","alert-danger","wb-100","mb-2","request-a-copy-access-expired"],[1,"alert","alert-warning","wb-100","mb-2","request-a-copy-access-denied"],["role","img",1,"request-a-copy-access-error-icon"],[1,"fa-solid","fa-lock"],["role","img",1,"request-a-copy-access-icon"],[1,"fa-solid","fa-lock-open"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_1__.DNE(0,AccessByTokenNotificationComponent_ng_container_0_Template,2,1,"ng-container",0),_angular_core__WEBPACK_IMPORTED_MODULE_1__.nI1(1,"async")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_1__.Y8G("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_1__.bMT(1,1,ctx.itemRequest$))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_5__.Jj,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_6__.D9,_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_7__.r],styles:[".request-a-copy-access-icon[_ngcontent-%COMP%]{margin-right:4px;color:var(--bs-success)}.request-a-copy-access-error-icon[_ngcontent-%COMP%]{margin-right:4px}"]})}}return AccessByTokenNotificationComponent2})()},84942:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ItemPageComponent:()=>ItemPageComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(87514),_angular_core__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(25376),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(2385),rxjs__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(9238),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(60444),src_app_core_coar_notify_notify_info_notify_info_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(87505),_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(76509),_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(86583),_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(94149),_core_data_signposting_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(43457),_core_services_server_response_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(41554),_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(39022),_core_shared_view_mode_model__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(18839),_shared_animations_fade__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(67441),_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(2794),_shared_error_error_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(17561),_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(18869),_shared_object_collection_shared_listable_object_listable_object_component_loader_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(90690),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(17543),_alerts_themed_item_alerts_component__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(26065),_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(88292),_versions_item_versions_component__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(99762),_versions_notice_item_versions_notice_component__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(70135),_access_by_token_notification_access_by_token_notification_component__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(41154),_notify_requests_status_notify_requests_status_component_notify_requests_status_component__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(46647),_qa_event_notification_qa_event_notification_component__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(74594),_angular_router__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(18134),_core_services_link_head_service__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(58698);function ItemPageComponent_div_0_Conditional_1_Conditional_1_Conditional_6_Template(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_18__.nrm(0,"ds-listable-object-component-loader",6),2&rf){const item_r1=_angular_core__WEBPACK_IMPORTED_MODULE_18__.XpG(),ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_18__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("object",item_r1)("viewMode",ctx_r1.viewMode)}}function ItemPageComponent_div_0_Conditional_1_Conditional_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_18__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_18__.nrm(1,"ds-item-alerts",4)(2,"ds-access-by-token-notification")(3,"ds-qa-event-notification",4)(4,"ds-notify-requests-status",5)(5,"ds-item-versions-notice",4),_angular_core__WEBPACK_IMPORTED_MODULE_18__.DNE(6,ItemPageComponent_div_0_Conditional_1_Conditional_1_Conditional_6_Template,1,2,"ds-listable-object-component-loader",6),_angular_core__WEBPACK_IMPORTED_MODULE_18__.nI1(7,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_18__.nrm(8,"ds-item-versions",7),_angular_core__WEBPACK_IMPORTED_MODULE_18__.k0s()),2&rf){const item_r1=ctx,ctx_r1=_angular_core__WEBPACK_IMPORTED_MODULE_18__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("item",item_r1),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("item",item_r1),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("itemUuid",item_r1.uuid),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("item",item_r1),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.vxM(!item_r1.isWithdrawn||_angular_core__WEBPACK_IMPORTED_MODULE_18__.bMT(7,7,ctx_r1.isAdmin$)?6:-1),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("item",item_r1)("displayActions",!1)}}function ItemPageComponent_div_0_Conditional_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_18__.j41(0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_18__.DNE(1,ItemPageComponent_div_0_Conditional_1_Conditional_1_Template,9,9,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_18__.k0s()),2&rf){let tmp_4_0;const itemRD_r3=_angular_core__WEBPACK_IMPORTED_MODULE_18__.XpG().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("@fadeInOut",void 0),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.vxM((tmp_4_0=null==itemRD_r3?null:itemRD_r3.payload)?1:-1,tmp_4_0)}}function ItemPageComponent_div_0_Conditional_2_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_18__.nrm(0,"ds-error",3),_angular_core__WEBPACK_IMPORTED_MODULE_18__.nI1(1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_18__.FS9("message",_angular_core__WEBPACK_IMPORTED_MODULE_18__.bMT(1,1,"error.item"))}function ItemPageComponent_div_0_Conditional_3_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_18__.nrm(0,"ds-loading",3),_angular_core__WEBPACK_IMPORTED_MODULE_18__.nI1(1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_18__.FS9("message",_angular_core__WEBPACK_IMPORTED_MODULE_18__.bMT(1,1,"loading.item"))}function ItemPageComponent_div_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_18__.j41(0,"div",1),_angular_core__WEBPACK_IMPORTED_MODULE_18__.DNE(1,ItemPageComponent_div_0_Conditional_1_Template,2,2,"div",2)(2,ItemPageComponent_div_0_Conditional_2_Template,2,3,"ds-error",3)(3,ItemPageComponent_div_0_Conditional_3_Template,2,3,"ds-loading",3),_angular_core__WEBPACK_IMPORTED_MODULE_18__.k0s()),2&rf){const itemRD_r3=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.vxM(null!=itemRD_r3&&itemRD_r3.hasSucceeded?1:-1),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.vxM(null!=itemRD_r3&&itemRD_r3.hasFailed?2:-1),_angular_core__WEBPACK_IMPORTED_MODULE_18__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_18__.vxM(null!=itemRD_r3&&itemRD_r3.isLoading?3:-1)}}let ItemPageComponent=(()=>{class ItemPageComponent2{constructor(route,router,items,authorizationService,responseService,signpostingDataService,linkHeadService,notifyInfoService,platformId){this.route=route,this.router=router,this.items=items,this.authorizationService=authorizationService,this.responseService=responseService,this.signpostingDataService=signpostingDataService,this.linkHeadService=linkHeadService,this.notifyInfoService=notifyInfoService,this.platformId=platformId,this.viewMode=_core_shared_view_mode_model__WEBPACK_IMPORTED_MODULE_7__.n.StandalonePage,this.signpostingLinks=[],this.inboxTags=[],this.coarRestApiUrls=[],this.hasValue=_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__.a4,this.initPageLinks()}ngOnInit(){this.itemRD$=this.route.data.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.Tj)(data=>data.dso)),this.itemPageRoute$=this.itemRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_6__.Hz)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.Tj)(item=>(0,_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_21__._o)(item))),this.isAdmin$=this.authorizationService.isAuthorized(_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_2__._.AdministratorOf)}initPageLinks(){this.route.params.subscribe(params=>{(0,rxjs__WEBPACK_IMPORTED_MODULE_22__.combineLatest)([this.signpostingDataService.getLinks(params.id).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.s)(1)),this.getCoarLdnLocalInboxUrls()]).subscribe(([signpostingLinks,coarRestApiUrls])=>{let links="";if(this.signpostingLinks=signpostingLinks,signpostingLinks.forEach(link=>{links=links+((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__.hj)(links)?", ":"")+`<${link.href}> ; rel="${link.rel}"`+((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__.hj)(link.type)?` ; type="${link.type}" `:" ")+((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__.hj)(link.profile)?` ; profile="${link.profile}" `:"");let tag={href:link.href,rel:link.rel};(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__.hj)(link.type)&&(tag=Object.assign(tag,{type:link.type})),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__.hj)(link.profile)&&(tag=Object.assign(tag,{profile:link.profile})),this.linkHeadService.addTag(tag)}),coarRestApiUrls.length>0){const inboxLinks=this.initPageInboxLinks(coarRestApiUrls);links=links+((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__.hj)(links)?", ":"")+inboxLinks}(0,_angular_common__WEBPACK_IMPORTED_MODULE_23__.Vy)(this.platformId)&&this.responseService.setHeader("Link",links)})})}getCoarLdnLocalInboxUrls(){return this.notifyInfoService.isCoarConfigEnabled().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.nx)(coarLdnEnabled=>coarLdnEnabled?this.notifyInfoService.getCoarLdnLocalInboxUrls():(0,rxjs__WEBPACK_IMPORTED_MODULE_22__.of)([])))}initPageInboxLinks(coarRestApiUrls){const rel=this.notifyInfoService.getInboxRelationLink();let links="";return coarRestApiUrls.forEach(coarRestApiUrl=>{const tag={href:coarRestApiUrl,rel};this.inboxTags.push(tag),this.linkHeadService.addTag(tag),links=links+((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__.hj)(links)?", ":"")+`<${coarRestApiUrl}> ; rel="${rel}"`}),links}ngOnDestroy(){this.signpostingLinks.forEach(link=>{this.linkHeadService.removeTag(`href='${link.href}'`)}),this.inboxTags.forEach(link=>{this.linkHeadService.removeTag(`href='${link.href}'`)})}getAccessPeriodEndDate(accessPeriod,decisionDate){if((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__.a4)(accessPeriod)&&accessPeriod>0&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_19__.a4)(decisionDate)){const date=new Date(decisionDate);return date.setUTCSeconds(date.getUTCSeconds()+accessPeriod),date}}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ItemPageComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_24__.nX),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_24__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_core_data_item_data_service__WEBPACK_IMPORTED_MODULE_3__.ItemDataService),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_1__.AuthorizationDataService),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_core_services_server_response_service__WEBPACK_IMPORTED_MODULE_5__.w),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_core_data_signposting_data_service__WEBPACK_IMPORTED_MODULE_4__.z),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_core_services_link_head_service__WEBPACK_IMPORTED_MODULE_25__.m),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(src_app_core_coar_notify_notify_info_notify_info_service__WEBPACK_IMPORTED_MODULE_0__.P),_angular_core__WEBPACK_IMPORTED_MODULE_18__.rXU(_angular_core__WEBPACK_IMPORTED_MODULE_18__.Agw))}}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_18__.VBU({type:ItemPageComponent2,selectors:[["ds-base-item-page"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_18__.aNF],decls:2,vars:3,consts:[["class","container",4,"ngVar"],[1,"container"],[1,"item-page"],[3,"message"],[3,"item"],[3,"itemUuid"],[3,"object","viewMode"],[1,"mt-2",3,"item","displayActions"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_18__.DNE(0,ItemPageComponent_div_0_Template,4,3,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_18__.nI1(1,"async")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_18__.Y8G("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_18__.bMT(1,1,ctx.itemRD$))},dependencies:[_access_by_token_notification_access_by_token_notification_component__WEBPACK_IMPORTED_MODULE_15__.f,_angular_common__WEBPACK_IMPORTED_MODULE_23__.Jj,_shared_error_error_component__WEBPACK_IMPORTED_MODULE_9__.A,_versions_item_versions_component__WEBPACK_IMPORTED_MODULE_13__.I,_versions_notice_item_versions_notice_component__WEBPACK_IMPORTED_MODULE_14__.s,_shared_object_collection_shared_listable_object_listable_object_component_loader_component__WEBPACK_IMPORTED_MODULE_11__.v,_notify_requests_status_notify_requests_status_component_notify_requests_status_component__WEBPACK_IMPORTED_MODULE_16__.x,_qa_event_notification_qa_event_notification_component__WEBPACK_IMPORTED_MODULE_17__.f,_alerts_themed_item_alerts_component__WEBPACK_IMPORTED_MODULE_12__.R,_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_10__.v,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_26__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_26__.D9,_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_27__.r],styles:["@media (max-width: 991.98px){.container[_ngcontent-%COMP%]{width:100%;max-width:none}}"],data:{animation:[_shared_animations_fade__WEBPACK_IMPORTED_MODULE_8__.Ws]},changeDetection:0})}}return ItemPageComponent2})()},46647:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{x:()=>NotifyRequestsStatusComponent});var common=__webpack_require__(87514),cjs=__webpack_require__(9238),notify_services_status_data_service=__webpack_require__(55327),operators=__webpack_require__(39022),empty_util=__webpack_require__(2794),ngx_translate_core=__webpack_require__(2385),truncatable_component=__webpack_require__(69901),truncatable_part_component=__webpack_require__(31846),RequestStatusEnum=function(RequestStatusEnum2){return RequestStatusEnum2.ACCEPTED="ACCEPTED",RequestStatusEnum2.REJECTED="REJECTED",RequestStatusEnum2.REQUESTED="REQUESTED",RequestStatusEnum2.TENTATIVE_REJECT="TENTATIVE_REJECT",RequestStatusEnum2}(RequestStatusEnum||{}),core=__webpack_require__(25376);const _c0=a0=>({"align-items-center":a0}),_c1=(a0,a1,a2)=>({serviceName:a0,serviceUrl:a1,offerType:a2});function RequestStatusAlertBoxComponent_Conditional_0_For_6_Template(rf,ctx){if(1&rf&&(core.nrm(0,"div",6),core.nI1(1,"translate")),2&rf){const request_r1=ctx.$implicit,ctx_r1=core.XpG(2);core.Y8G("innerHTML",core.i5U(1,1,ctx_r1.displayOptions.text,core.sMw(4,_c1,request_r1.serviceName,request_r1.serviceUrl,request_r1.offerType)),core.npT)}}function RequestStatusAlertBoxComponent_Conditional_0_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",1),core.nrm(1,"img",2),core.j41(2,"ds-truncatable",3)(3,"ds-truncatable-part",4)(4,"div",5),core.Z7z(5,RequestStatusAlertBoxComponent_Conditional_0_For_6_Template,2,8,"div",6,core.fX1),core.k0s()()()()),2&rf){const ctx_r1=core.XpG();core.ZvI("alert d-flex flex-row sections-gap ",ctx_r1.displayOptions.alertType,""),core.Y8G("ngClass",core.eq3(7,_c0,1===ctx_r1.data.length)),core.R7$(2),core.Y8G("id",ctx_r1.status),core.R7$(),core.Y8G("id",ctx_r1.status)("minLines",1),core.R7$(2),core.Dyx(ctx_r1.data)}}let RequestStatusAlertBoxComponent=(()=>{class RequestStatusAlertBoxComponent2{constructor(){this.data=[]}ngOnInit(){this.prepareDataToDisplay()}prepareDataToDisplay(){switch(this.status){case RequestStatusEnum.ACCEPTED:this.displayOptions={alertType:"alert-info",text:"request-status-alert-box.accepted"};break;case RequestStatusEnum.REJECTED:this.displayOptions={alertType:"alert-danger",text:"request-status-alert-box.rejected"};break;case RequestStatusEnum.TENTATIVE_REJECT:this.displayOptions={alertType:"alert-warning",text:"request-status-alert-box.tentative_rejected"};break;case RequestStatusEnum.REQUESTED:this.displayOptions={alertType:"alert-warning",text:"request-status-alert-box.requested"}}}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||RequestStatusAlertBoxComponent2)}}static{this.\u0275cmp=core.VBU({type:RequestStatusAlertBoxComponent2,selectors:[["ds-request-status-alert-box"]],inputs:{status:"status",data:"data"},standalone:!0,features:[core.aNF],decls:1,vars:1,consts:[[3,"ngClass","class"],[3,"ngClass"],["src","assets/images/qa-coar-notify-logo.png","alt","notify logo",1,"source-logo"],[3,"id"],[3,"id","minLines"],[1,"w-100","d-flex","flex-column"],[3,"innerHTML"]],template:function(rf,ctx){1&rf&&core.DNE(0,RequestStatusAlertBoxComponent_Conditional_0_Template,7,9,"div",0),2&rf&&core.vxM((null==ctx.data?null:ctx.data.length)>0&&ctx.displayOptions?0:-1)},dependencies:[common.YU,ngx_translate_core.h,ngx_translate_core.D9,truncatable_component.d,truncatable_part_component.W],styles:[".source-logo[_ngcontent-%COMP%]{max-height:var(--ds-header-logo-height)}.sections-gap[_ngcontent-%COMP%]{gap:1rem}"],changeDetection:0})}}return RequestStatusAlertBoxComponent2})();function NotifyRequestsStatusComponent_Conditional_0_For_1_Template(rf,ctx){if(1&rf&&core.nrm(0,"ds-request-status-alert-box",0),2&rf){const entry_r1=ctx.$implicit;core.Y8G("status",entry_r1.key)("data",entry_r1.value)}}function NotifyRequestsStatusComponent_Conditional_0_Template(rf,ctx){if(1&rf&&(core.Z7z(0,NotifyRequestsStatusComponent_Conditional_0_For_1_Template,1,2,"ds-request-status-alert-box",0,core.fX1),core.nI1(2,"async"),core.nI1(3,"keyvalue")),2&rf){const ctx_r1=core.XpG();core.Dyx(core.bMT(3,2,core.bMT(2,0,ctx_r1.requestMap$)))}}let NotifyRequestsStatusComponent=(()=>{class NotifyRequestsStatusComponent2{constructor(notifyInfoService){this.notifyInfoService=notifyInfoService}ngOnInit(){this.requestMap$=this.notifyInfoService.getNotifyRequestsStatus(this.itemUuid).pipe((0,operators.qD)(),(0,cjs.filter)(data=>(0,empty_util.a4)(data)),(0,operators.Bo)(),(0,cjs.filter)(data=>(0,empty_util.a4)(data)),(0,cjs.map)(data=>this.groupDataByStatus(data)))}groupDataByStatus(notifyRequestsStatus){const statusMap=new Map;return notifyRequestsStatus.notifyStatus?.forEach(notifyStatus=>{const status=notifyStatus.status;statusMap.has(status)||statusMap.set(status,[]),statusMap.get(status)?.push(notifyStatus)}),statusMap}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||NotifyRequestsStatusComponent2)(core.rXU(notify_services_status_data_service.NotifyRequestsStatusDataService))}}static{this.\u0275cmp=core.VBU({type:NotifyRequestsStatusComponent2,selectors:[["ds-notify-requests-status"]],inputs:{itemUuid:"itemUuid"},standalone:!0,features:[core.aNF],decls:2,vars:3,consts:[[3,"status","data"]],template:function(rf,ctx){if(1&rf&&(core.DNE(0,NotifyRequestsStatusComponent_Conditional_0_Template,4,4),core.nI1(1,"async")),2&rf){let tmp_0_0;core.vxM((null==(tmp_0_0=core.bMT(1,1,ctx.requestMap$))?null:tmp_0_0.size)>0?0:-1)}},dependencies:[common.Jj,common.lG,RequestStatusAlertBoxComponent],changeDetection:0})}}return NotifyRequestsStatusComponent2})()},74594:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{f:()=>QaEventNotificationComponent});var common=__webpack_require__(87514),router=__webpack_require__(18134),ngx_translate_core=__webpack_require__(2385),operators=__webpack_require__(60444),admin_routing_paths=__webpack_require__(82352),request_param_model=__webpack_require__(99629),quality_assurance_source_data_service=__webpack_require__(30466),shared_operators=(__webpack_require__(43575),__webpack_require__(39022)),core=__webpack_require__(25376);let SplitPipe=(()=>{class SplitPipe2{transform(value,separator){return value.split(separator)}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||SplitPipe2)}}static{this.\u0275pipe=core.EJ8({name:"dsSplit",type:SplitPipe2,pure:!0,standalone:!0})}}return SplitPipe2})();const _c0=a0=>({num:a0}),_c1=(a0,a1,a2)=>[a0,a1,"target",a2],_c2=()=>({forward:!0});function QaEventNotificationComponent_Conditional_0_For_1_Conditional_0_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",0)(1,"div",1),core.nrm(2,"img",2),core.nI1(3,"dsSplit"),core.k0s(),core.j41(4,"div",3)(5,"div",4),core.EFF(6),core.nI1(7,"translate"),core.k0s(),core.j41(8,"button",5),core.nI1(9,"dsSplit"),core.EFF(10),core.nI1(11,"translate"),core.k0s()()()),2&rf){const source_r1=core.XpG().$implicit,ctx_r1=core.XpG(2);core.R7$(2),core.Mz_("src","assets/images/qa-",core.i5U(3,8,source_r1.id,":")[0],"-logo.png",core.B4B),core.Mz_("alt","",source_r1.id," logo"),core.R7$(4),core.SpI(" ",core.i5U(7,11,"item.qa-event-notification.check.notification-info",core.eq3(19,_c0,source_r1.totalEvents))," "),core.R7$(2),core.Y8G("routerLink",core.sMw(21,_c1,ctx_r1.getQualityAssuranceRoute(),core.i5U(9,14,source_r1.id,":")[0],ctx_r1.item.id))("queryParams",core.lJ4(25,_c2)),core.R7$(2),core.SpI(" ",core.bMT(11,17,"item.qa-event-notification-info.check.button")," ")}}function QaEventNotificationComponent_Conditional_0_For_1_Template(rf,ctx){1&rf&&core.DNE(0,QaEventNotificationComponent_Conditional_0_For_1_Conditional_0_Template,12,26,"div",0),2&rf&&core.vxM(ctx.$implicit.totalEvents>0?0:-1)}function QaEventNotificationComponent_Conditional_0_Template(rf,ctx){1&rf&&core.Z7z(0,QaEventNotificationComponent_Conditional_0_For_1_Template,1,1,null,null,core.fX1),2&rf&&core.Dyx(ctx)}let QaEventNotificationComponent=(()=>{class QaEventNotificationComponent2{constructor(qualityAssuranceSourceDataService){this.qualityAssuranceSourceDataService=qualityAssuranceSourceDataService}ngOnChanges(changes){changes.item&&changes.item.currentValue.uuid!==changes.item.previousValue?.uuid&&(this.sources$=this.getQualityAssuranceSources$())}getQualityAssuranceSources$(){const findListTopicOptions={searchParams:[new request_param_model.x("target",this.item.uuid)]};return this.qualityAssuranceSourceDataService.getSourcesByTarget(findListTopicOptions,!1).pipe((0,shared_operators.qD)(),(0,operators.Tj)(data=>data.hasSucceeded?data.payload.page:[]),(0,operators.WL)(()=>[]))}getQualityAssuranceRoute(){return(0,admin_routing_paths.b7)()}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||QaEventNotificationComponent2)(core.rXU(quality_assurance_source_data_service.QualityAssuranceSourceDataService))}}static{this.\u0275cmp=core.VBU({type:QaEventNotificationComponent2,selectors:[["ds-qa-event-notification"]],inputs:{item:"item"},standalone:!0,features:[core.Jv_([quality_assurance_source_data_service.QualityAssuranceSourceDataService]),core.OA$,core.aNF],decls:2,vars:3,consts:[[1,"alert","alert-info","d-flex","flex-row"],[1,"source-logo-container"],["onerror","this.src='assets/images/dspace-logo.svg'",1,"source-logo",3,"src","alt"],[1,"w-100","d-flex","justify-content-between"],[1,"ps-4","align-self-center"],[1,"btn","btn-primary","align-self-center",3,"routerLink","queryParams"]],template:function(rf,ctx){if(1&rf&&(core.DNE(0,QaEventNotificationComponent_Conditional_0_Template,2,0),core.nI1(1,"async")),2&rf){let tmp_0_0;core.vxM((tmp_0_0=core.bMT(1,1,ctx.sources$))?0:-1,tmp_0_0)}},dependencies:[common.Jj,router.Wk,SplitPipe,ngx_translate_core.h,ngx_translate_core.D9],styles:[".source-logo[_ngcontent-%COMP%]{max-height:var(--ds-header-logo-height)}.source-logo-container[_ngcontent-%COMP%]{width:var(--ds-qa-logo-width);display:flex;justify-content:center}.sections-gap[_ngcontent-%COMP%]{gap:1rem}"],changeDetection:0})}}return QaEventNotificationComponent2})()},99762:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{I:()=>ItemVersionsComponent});var common=__webpack_require__(87514),fesm2022_forms=__webpack_require__(13054),ngx_translate_core=__webpack_require__(2385),cjs=__webpack_require__(9238),operators=__webpack_require__(60444),configuration_data_service=__webpack_require__(93876),authorization_data_service=__webpack_require__(76509),feature_id=__webpack_require__(86583),version_data_service=__webpack_require__(54610),version_history_data_service=__webpack_require__(47765),pagination_service=__webpack_require__(31903),shared_operators=(__webpack_require__(43575),__webpack_require__(39022)),alert_component=__webpack_require__(6213),alert_type=__webpack_require__(83113),btn_disabled_directive=__webpack_require__(69919),empty_util=__webpack_require__(2794),notifications_service=__webpack_require__(76623),pagination_component=__webpack_require__(42191),pagination_component_options_model=__webpack_require__(54396),paginated_search_options_model=__webpack_require__(86577),follow_link_config_model=__webpack_require__(76715),core=__webpack_require__(25376),router=__webpack_require__(18134),item_data_service=__webpack_require__(94149),workflowitem_data_service=(__webpack_require__(74728),__webpack_require__(56806)),workspaceitem_data_service=__webpack_require__(96148),item_page_routing_paths=__webpack_require__(88292),ng_bootstrap=__webpack_require__(87969);const _c0=a0=>({version:a0});let ItemVersionsDeleteModalComponent=(()=>{class ItemVersionsDeleteModalComponent2{constructor(activeModal){this.activeModal=activeModal,this.response=new core.bkB}onModalClose(){this.response.emit(!1),this.activeModal.dismiss()}onModalSubmit(){this.response.emit(!0),this.activeModal.close()}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ItemVersionsDeleteModalComponent2)(core.rXU(ng_bootstrap.Lw))}}static{this.\u0275cmp=core.VBU({type:ItemVersionsDeleteModalComponent2,selectors:[["ds-item-versions-delete-modal"]],outputs:{response:"response"},standalone:!0,features:[core.aNF],decls:20,vars:21,consts:[[1,"modal-header"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"pb-2"],[1,"modal-footer"],[1,"btn","btn-outline-secondary","btn-sm","cancel",3,"click","title"],[1,"fas","fa-times","fa-fw"],[1,"btn","btn-danger","btn-sm","confirm",3,"click","title"],[1,"fas","fa-check","fa-fw"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div")(1,"div",0),core.EFF(2),core.nI1(3,"translate"),core.j41(4,"button",1),core.bIt("click",function(){return ctx.onModalClose()}),core.k0s()(),core.j41(5,"div",2)(6,"p",3),core.EFF(7),core.nI1(8,"translate"),core.k0s()(),core.j41(9,"div",4)(10,"button",5),core.nI1(11,"translate"),core.bIt("click",function(){return ctx.onModalClose()}),core.nrm(12,"i",6),core.EFF(13),core.nI1(14,"translate"),core.k0s(),core.j41(15,"button",7),core.nI1(16,"translate"),core.bIt("click",function(){return ctx.onModalSubmit()}),core.nrm(17,"i",8),core.EFF(18),core.nI1(19,"translate"),core.k0s()()()),2&rf&&(core.R7$(2),core.SpI("",core.bMT(3,6,"item.version.delete.modal.header")," "),core.R7$(5),core.JRh(core.i5U(8,8,"item.version.delete.modal.text",core.eq3(19,_c0,ctx.versionNumber))),core.R7$(3),core.FS9("title",core.bMT(11,11,"item.version.delete.modal.button.cancel.tooltip")),core.R7$(3),core.SpI(" ",core.bMT(14,13,"item.version.delete.modal.button.cancel")," "),core.R7$(2),core.FS9("title",core.bMT(16,15,"item.version.delete.modal.button.confirm.tooltip")),core.R7$(3),core.SpI(" ",core.bMT(19,17,"item.version.delete.modal.button.confirm")," "))},dependencies:[ngx_translate_core.h,ngx_translate_core.D9]})}}return ItemVersionsDeleteModalComponent2})();var item_versions_shared_service=__webpack_require__(60931),item_versions_summary_modal_component=__webpack_require__(42307);function ItemVersionsRowElementVersionComponent_Conditional_1_Template(rf,ctx){if(1&rf&&core.EFF(0),2&rf){const ctx_r0=core.XpG();core.SpI(" ",ctx_r0.version.version," ")}}function ItemVersionsRowElementVersionComponent_Conditional_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"a",1),core.EFF(1),core.k0s()),2&rf){const ctx_r0=core.XpG();core.Y8G("routerLink",ctx_r0.getVersionRoute(ctx_r0.version.id)),core.R7$(),core.JRh(ctx_r0.version.version)}}function ItemVersionsRowElementVersionComponent_Conditional_5_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.EFF(1,"*"),core.k0s())}function ItemVersionsRowElementVersionComponent_Conditional_6_Template(rf,ctx){1&rf&&(core.j41(0,"span",2),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"item.version.history.table.workspaceItem")," "))}function ItemVersionsRowElementVersionComponent_Conditional_8_Template(rf,ctx){1&rf&&(core.j41(0,"span",3),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"item.version.history.table.workflowItem")," "))}function ItemVersionsRowElementVersionComponent_Conditional_11_Conditional_1_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"button",9),core.nI1(1,"translate"),core.bIt("click",function(){core.eBV(_r2);const ctx_r0=core.XpG(2);return core.Njj(ctx_r0.editWorkspaceItem(ctx_r0.workspaceId$))}),core.nrm(2,"i",10),core.k0s()}2&rf&&core.FS9("title",core.bMT(1,1,"item.version.history.table.action.editWorkspaceItem"))}function ItemVersionsRowElementVersionComponent_Conditional_11_Conditional_3_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"button",11),core.nI1(1,"translate"),core.bIt("click",function(){core.eBV(_r3);const ctx_r0=core.XpG(2);return core.Njj(ctx_r0.createNewVersion(ctx_r0.version))}),core.nrm(2,"i",12),core.k0s()}if(2&rf){const ctx_r0=core.XpG(2);core.FS9("title",core.bMT(1,2,ctx_r0.createVersionTitle)),core.Y8G("dsBtnDisabled",ctx_r0.isAnyBeingEdited()||ctx_r0.hasDraftVersion)}}function ItemVersionsRowElementVersionComponent_Conditional_11_Conditional_5_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"button",13),core.nI1(1,"translate"),core.bIt("click",function(){core.eBV(_r4);const ctx_r0=core.XpG(2);return core.Njj(ctx_r0.deleteVersion(ctx_r0.version,ctx_r0.version.id===ctx_r0.itemVersion.id))}),core.nrm(2,"i",14),core.k0s()}if(2&rf){const ctx_r0=core.XpG(2);core.FS9("title",core.bMT(1,3,"item.version.history.table.action.deleteVersion")),core.Y8G("ngClass",ctx_r0.isAnyBeingEdited()?"btn-outline-primary":"btn-outline-danger")("dsBtnDisabled",ctx_r0.isAnyBeingEdited())}}function ItemVersionsRowElementVersionComponent_Conditional_11_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",5),core.DNE(1,ItemVersionsRowElementVersionComponent_Conditional_11_Conditional_1_Template,3,3,"button",6),core.nI1(2,"async"),core.DNE(3,ItemVersionsRowElementVersionComponent_Conditional_11_Conditional_3_Template,3,4,"button",7),core.nI1(4,"async"),core.DNE(5,ItemVersionsRowElementVersionComponent_Conditional_11_Conditional_5_Template,3,5,"button",8),core.nI1(6,"async"),core.k0s()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.vxM(core.bMT(2,3,ctx_r0.workspaceId$)?1:-1),core.R7$(2),core.vxM(core.bMT(4,5,ctx_r0.canCreateVersion$)?3:-1),core.R7$(2),core.vxM(core.bMT(6,7,ctx_r0.canDeleteVersion$)?5:-1)}}let ItemVersionsRowElementVersionComponent=(()=>{class ItemVersionsRowElementVersionComponent2{constructor(workspaceItemDataService,workflowItemDataService,router2,itemService,authorizationService,itemVersionShared,versionHistoryService,versionService,notificationsService,translateService,modalService){this.workspaceItemDataService=workspaceItemDataService,this.workflowItemDataService=workflowItemDataService,this.router=router2,this.itemService=itemService,this.authorizationService=authorizationService,this.itemVersionShared=itemVersionShared,this.versionHistoryService=versionHistoryService,this.versionService=versionService,this.notificationsService=notificationsService,this.translateService=translateService,this.modalService=modalService,this.versionsHistoryChange=new core.bkB}ngOnInit(){this.workspaceId$=this.getWorkspaceId(this.version.item),this.workflowId$=this.getWorkflowId(this.version.item),this.canDeleteVersion$=this.canDeleteVersion(this.version),this.canCreateVersion$=this.authorizationService.isAuthorized(feature_id._.CanCreateVersion,this.item.self),this.createVersionTitle=this.hasDraftVersion?"item.version.history.table.action.hasDraft":"item.version.history.table.action.newVersion"}getWorkspaceId(versionItem){return this.hasDraftVersion?versionItem.pipe((0,shared_operators.ak)(),(0,operators.Tj)(item=>item.uuid),(0,operators.nx)(itemUuid=>this.workspaceItemDataService.findByItem(itemUuid,!0)),(0,shared_operators.qD)(),(0,operators.Tj)(res=>res?.payload?.id)):(0,cjs.of)(void 0)}getWorkflowId(versionItem){return this.getWorkspaceId(versionItem).pipe((0,cjs.concatMap)(workspaceId=>workspaceId?(0,cjs.of)(void 0):versionItem.pipe((0,shared_operators.ak)(),(0,operators.Tj)(item=>item.uuid),(0,operators.nx)(itemUuid=>this.workflowItemDataService.findByItem(itemUuid,!0)),(0,shared_operators.qD)(),(0,operators.Tj)(res=>res?.payload?.id))))}editWorkspaceItem(id$){id$.subscribe(id=>{this.router.navigateByUrl("workspaceitems/"+id+"/edit")})}canDeleteVersion(version){return this.authorizationService.isAuthorized(feature_id._.CanDeleteVersion,version.self)}getVersionRoute(versionId){return(0,item_page_routing_paths.vf)(versionId)}createNewVersion(version){const versionNumber=version.version,activeModal=this.modalService.open(item_versions_summary_modal_component.L);activeModal.componentInstance.versionNumber=versionNumber,activeModal.componentInstance.createVersionEvent.pipe((0,operators.ZZ)(summary=>(0,cjs.combineLatest)([(0,cjs.of)(summary),version.item.pipe((0,shared_operators.ak)())])),(0,operators.ZZ)(([summary,item])=>this.versionHistoryService.createVersion(item._links.self.href,summary)),(0,shared_operators.qD)(),(0,operators.Mi)(()=>activeModal.close()),(0,operators.Mi)(newVersionRD=>{if(this.itemVersionShared.notifyCreateNewVersion(newVersionRD),newVersionRD.hasSucceeded){const versionHistory$=this.versionService.getHistoryFromVersion(version).pipe((0,operators.Mi)(versionHistory=>{this.itemService.invalidateItemCache(this.item.uuid),this.versionHistoryService.invalidateVersionHistoryCache(versionHistory.id)}));this.versionsHistoryChange.emit(versionHistory$)}}),(0,shared_operators.ak)(),(0,operators.nx)(newVersion=>this.itemService.findByHref(newVersion._links.item.href)),(0,shared_operators.ak)(),(0,operators.nx)(newVersionItem=>this.workspaceItemDataService.findByItem(newVersionItem.uuid,!0,!1)),(0,shared_operators.ak)()).subscribe(wsItem=>{this.router.navigateByUrl("workspaceitems/"+wsItem.id+"/edit")})}deleteVersion(version,redirectToLatest){const versionNumber=version.version,versionItem$=version.item,activeModal=this.modalService.open(ItemVersionsDeleteModalComponent);activeModal.componentInstance.versionNumber=version.version,activeModal.componentInstance.firstVersion=!1,activeModal.componentInstance.response.pipe((0,operators.s)(1)).subscribe(ok=>{ok&&versionItem$.pipe((0,shared_operators.ak)(),(0,operators.ZZ)(item=>(0,cjs.combineLatest)([(0,cjs.of)(item),this.versionHistoryService.getVersionHistoryFromVersion$(version)])),(0,operators.ZZ)(([item,versionHistory])=>(0,cjs.combineLatest)([this.deleteItemAndGetResult$(item),(0,cjs.of)(versionHistory)])),(0,operators.ZZ)(([deleteItemResult,versionHistory])=>(0,cjs.combineLatest)([(0,cjs.of)(deleteItemResult),this.versionHistoryService.getLatestVersionItemFromHistory$(versionHistory).pipe((0,operators.Mi)(()=>{this.versionsHistoryChange.emit((0,cjs.of)(versionHistory))}))]))).subscribe(([deleteHasSucceeded,newLatestVersionItem])=>{if(deleteHasSucceeded?this.notificationsService.success(null,this.translateService.get("item.version.delete.notification.success",{version:versionNumber})):this.notificationsService.error(null,this.translateService.get("item.version.delete.notification.failure",{version:versionNumber})),redirectToLatest){const path=(0,item_page_routing_paths.nF)(newLatestVersionItem);this.router.navigateByUrl(path)}})})}deleteItemAndGetResult$(item){return this.itemService.delete(item.id).pipe((0,shared_operators.qD)(),(0,operators.Tj)(deleteItemRes=>deleteItemRes.hasSucceeded),(0,operators.s)(1))}isAnyBeingEdited(){return null!=this.versionBeingEditedNumber}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ItemVersionsRowElementVersionComponent2)(core.rXU(workspaceitem_data_service.WorkspaceitemDataService),core.rXU(workflowitem_data_service.WorkflowItemDataService),core.rXU(router.Ix),core.rXU(item_data_service.ItemDataService),core.rXU(authorization_data_service.AuthorizationDataService),core.rXU(item_versions_shared_service.h),core.rXU(version_history_data_service.VersionHistoryDataService),core.rXU(version_data_service.VersionDataService),core.rXU(notifications_service.I),core.rXU(ngx_translate_core.c$),core.rXU(ng_bootstrap.Bq))}}static{this.\u0275cmp=core.VBU({type:ItemVersionsRowElementVersionComponent2,selectors:[["ds-item-versions-row-element-version"]],inputs:{hasDraftVersion:"hasDraftVersion",version:"version",itemVersion:"itemVersion",item:"item",displayActions:"displayActions",versionBeingEditedNumber:"versionBeingEditedNumber"},outputs:{versionsHistoryChange:"versionsHistoryChange"},standalone:!0,features:[core.aNF],decls:12,vars:13,consts:[[1,"left-column"],[3,"routerLink"],[1,"text-light","badge","bg-primary","ms-3"],[1,"text-light","badge","bg-info","ms-3"],[1,"right-column"],[1,"btn-group","edit-field","space-children-mr"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-edit",3,"title"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-create",3,"dsBtnDisabled","title"],[1,"btn","btn-sm","version-row-element-delete",3,"ngClass","dsBtnDisabled","title"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-edit",3,"click","title"],[1,"fas","fa-pencil-alt","fa-fw"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-create",3,"click","dsBtnDisabled","title"],[1,"fas","fa-code-branch","fa-fw"],[1,"btn","btn-sm","version-row-element-delete",3,"click","ngClass","dsBtnDisabled","title"],[1,"fas","fa-trash","fa-fw"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0),core.DNE(1,ItemVersionsRowElementVersionComponent_Conditional_1_Template,1,1),core.nI1(2,"async"),core.nI1(3,"async"),core.DNE(4,ItemVersionsRowElementVersionComponent_Conditional_4_Template,2,2,"a",1)(5,ItemVersionsRowElementVersionComponent_Conditional_5_Template,2,0,"span")(6,ItemVersionsRowElementVersionComponent_Conditional_6_Template,3,3,"span",2),core.nI1(7,"async"),core.DNE(8,ItemVersionsRowElementVersionComponent_Conditional_8_Template,3,3,"span",3),core.nI1(9,"async"),core.k0s(),core.j41(10,"div",4),core.DNE(11,ItemVersionsRowElementVersionComponent_Conditional_11_Template,7,9,"div",5),core.k0s()),2&rf&&(core.R7$(),core.vxM(core.bMT(2,5,ctx.workspaceId$)||core.bMT(3,7,ctx.workflowId$)?1:4),core.R7$(4),core.vxM((null==ctx.version?null:ctx.version.id)===(null==ctx.itemVersion?null:ctx.itemVersion.id)?5:-1),core.R7$(),core.vxM(core.bMT(7,9,ctx.workspaceId$)?6:-1),core.R7$(2),core.vxM(core.bMT(9,11,ctx.workflowId$)?8:-1),core.R7$(3),core.vxM(ctx.displayActions?11:-1))},dependencies:[common.Jj,btn_disabled_directive.A,common.YU,router.Wk,ngx_translate_core.h,ngx_translate_core.D9],styles:[".left-column[_ngcontent-%COMP%]{float:left;text-align:left}.right-column[_ngcontent-%COMP%]{float:right;text-align:right}"]})}}return ItemVersionsRowElementVersionComponent2})();const item_versions_component_c0=a0=>({version:a0});function ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_1_Template(rf,ctx){1&rf&&(core.j41(0,"h2",2),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"item.version.history.head")))}function ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_Conditional_7_Template(rf,ctx){1&rf&&(core.j41(0,"th",7),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"item.version.history.table.editor")))}function ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_For_17_Conditional_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"td",11),core.EFF(1),core.k0s()),2&rf){const versionDTO_r4=core.XpG().$implicit;core.R7$(),core.SpI(" ",versionDTO_r4.version.submitterName," ")}}function ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_For_17_Conditional_11_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"input",17),core.nI1(1,"translate"),core.mxI("ngModelChange",function($event){core.eBV(_r5);const ctx_r1=core.XpG(6);return core.DH7(ctx_r1.versionBeingEditedSummary,$event)||(ctx_r1.versionBeingEditedSummary=$event),core.Njj($event)}),core.bIt("keyup.enter",function(){core.eBV(_r5);const ctx_r1=core.XpG(6);return core.Njj(ctx_r1.onSummarySubmit())}),core.k0s()}if(2&rf){const ctx_r1=core.XpG(6);core.R50("ngModel",ctx_r1.versionBeingEditedSummary),core.BMQ("aria-label",core.bMT(1,2,"item.version.history.table.action.editSummary"))}}function ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_For_17_Conditional_12_Template(rf,ctx){if(1&rf&&(core.j41(0,"span"),core.EFF(1),core.k0s()),2&rf){const versionDTO_r4=core.XpG().$implicit;core.R7$(),core.JRh(versionDTO_r4.version.summary)}}function ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_For_17_ng_template_13_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"input",17),core.nI1(1,"translate"),core.mxI("ngModelChange",function($event){core.eBV(_r6);const ctx_r1=core.XpG(6);return core.DH7(ctx_r1.versionBeingEditedSummary,$event)||(ctx_r1.versionBeingEditedSummary=$event),core.Njj($event)}),core.bIt("keyup.enter",function(){core.eBV(_r6);const ctx_r1=core.XpG(6);return core.Njj(ctx_r1.onSummarySubmit())}),core.k0s()}if(2&rf){const ctx_r1=core.XpG(6);core.R50("ngModel",ctx_r1.versionBeingEditedSummary),core.BMQ("aria-label",core.bMT(1,2,"item.version.history.table.action.editSummary"))}}function ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_For_17_Conditional_15_Conditional_1_Template(rf,ctx){if(1&rf){const _r7=core.RV6();core.j41(0,"button",19),core.nI1(1,"translate"),core.bIt("click",function(){core.eBV(_r7);const ctx_r1=core.XpG(7);return core.Njj(ctx_r1.disableVersionEditing())}),core.nrm(2,"i",20),core.k0s(),core.j41(3,"button",21),core.nI1(4,"translate"),core.bIt("click",function(){core.eBV(_r7);const ctx_r1=core.XpG(7);return core.Njj(ctx_r1.onSummarySubmit())}),core.nrm(5,"i",22),core.k0s()}2&rf&&(core.FS9("title",core.bMT(1,2,"item.version.history.table.action.discardSummary")),core.R7$(3),core.FS9("title",core.bMT(4,4,"item.version.history.table.action.saveSummary")))}function ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_For_17_Conditional_15_Conditional_2_Template(rf,ctx){if(1&rf){const _r8=core.RV6();core.j41(0,"button",23),core.nI1(1,"translate"),core.bIt("click",function(){core.eBV(_r8);const versionDTO_r4=core.XpG(2).$implicit,ctx_r1=core.XpG(5);return core.Njj(ctx_r1.enableVersionEditing(versionDTO_r4.version))}),core.nrm(2,"i",24),core.k0s()}if(2&rf){const ctx_r1=core.XpG(7);core.FS9("title",core.bMT(1,2,"item.version.history.table.action.editSummary")),core.Y8G("dsBtnDisabled",ctx_r1.isAnyBeingEdited())}}function ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_For_17_Conditional_15_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",16),core.DNE(1,ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_For_17_Conditional_15_Conditional_1_Template,6,6)(2,ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_For_17_Conditional_15_Conditional_2_Template,3,4,"button",18),core.k0s()),2&rf){const versionDTO_r4=core.XpG().$implicit,ctx_r1=core.XpG(5);core.R7$(),core.vxM(ctx_r1.isThisBeingEdited(versionDTO_r4.version)?1:2)}}function ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_For_17_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"tr",8)(1,"td",9)(2,"ds-item-versions-row-element-version",10),core.nI1(3,"async"),core.bIt("versionsHistoryChange",function($event){core.eBV(_r3);const ctx_r1=core.XpG(5);return core.Njj(ctx_r1.getAllVersions($event))}),core.k0s()(),core.DNE(4,ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_For_17_Conditional_4_Template,2,1,"td",11),core.nI1(5,"async"),core.j41(6,"td",12),core.EFF(7),core.nI1(8,"date"),core.k0s(),core.j41(9,"td",13)(10,"div",14),core.DNE(11,ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_For_17_Conditional_11_Template,2,4,"input",15)(12,ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_For_17_Conditional_12_Template,2,1,"span")(13,ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_For_17_ng_template_13_Template,2,4,"ng-template",null,0,core.C5r),core.k0s(),core.DNE(15,ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_For_17_Conditional_15_Template,3,1,"div",16),core.nI1(16,"async"),core.k0s()()}if(2&rf){const versionDTO_r4=ctx.$implicit,itemVersion_r9=core.XpG(3),ctx_r1=core.XpG(2);core.Y8G("id","version-row-"+versionDTO_r4.version.id),core.R7$(2),core.Y8G("hasDraftVersion",core.bMT(3,11,ctx_r1.hasDraftVersion$))("version",versionDTO_r4.version)("item",ctx_r1.item)("displayActions",ctx_r1.displayActions)("itemVersion",itemVersion_r9)("versionBeingEditedNumber",ctx_r1.versionBeingEditedNumber),core.R7$(2),core.vxM(core.bMT(5,13,ctx_r1.showSubmitter$)?4:-1),core.R7$(3),core.SpI(" ",core.i5U(8,15,versionDTO_r4.version.created,"yyyy-MM-dd HH:mm:ss")," "),core.R7$(4),core.vxM(ctx_r1.isThisBeingEdited(versionDTO_r4.version)?11:12),core.R7$(4),core.vxM(core.bMT(16,18,ctx_r1.displayActions&&versionDTO_r4.canEditVersion)?15:-1)}}function ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"ds-pagination",5),core.bIt("paginationChange",function(){core.eBV(_r1);const ctx_r1=core.XpG(4);return core.Njj(ctx_r1.onPageChange())}),core.j41(1,"table",6)(2,"thead")(3,"tr")(4,"th",7),core.EFF(5),core.nI1(6,"translate"),core.k0s(),core.DNE(7,ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_Conditional_7_Template,3,3,"th",7),core.nI1(8,"async"),core.j41(9,"th",7),core.EFF(10),core.nI1(11,"translate"),core.k0s(),core.j41(12,"th",7),core.EFF(13),core.nI1(14,"translate"),core.k0s()()(),core.j41(15,"tbody"),core.Z7z(16,ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_For_17_Template,17,20,"tr",8,core.fX1),core.k0s()(),core.j41(18,"div"),core.EFF(19),core.nI1(20,"translate"),core.k0s()()}if(2&rf){const versionsDTO_r10=core.XpG(3),ctx_r1=core.XpG();core.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",ctx_r1.options)("collectionSize",versionsDTO_r10.totalElements)("retainScrollPosition",!0),core.R7$(5),core.JRh(core.bMT(6,10,"item.version.history.table.version")),core.R7$(2),core.vxM(core.bMT(8,12,ctx_r1.showSubmitter$)?7:-1),core.R7$(3),core.JRh(core.bMT(11,14,"item.version.history.table.date")),core.R7$(3),core.JRh(core.bMT(14,16,"item.version.history.table.summary")),core.R7$(3),core.Dyx(versionsDTO_r10.versionDTOs),core.R7$(3),core.SpI("*\xa0",core.bMT(20,18,"item.version.history.selected"),"")}}function ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",1),core.DNE(1,ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_1_Template,3,3,"h2",2),core.j41(2,"ds-alert",3),core.EFF(3),core.nI1(4,"translate"),core.k0s(),core.DNE(5,ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Conditional_5_Template,21,20,"ds-pagination",4),core.k0s()),2&rf){const itemVersion_r9=core.XpG(),versionsDTO_r10=core.XpG(),ctx_r1=core.XpG();core.R7$(),core.vxM(ctx_r1.displayTitle?1:-1),core.R7$(),core.Y8G("type",ctx_r1.AlertTypeEnum.Info),core.R7$(),core.SpI(" ",core.i5U(4,4,"item.version.history.selected.alert",core.eq3(7,item_versions_component_c0,itemVersion_r9.version))," "),core.R7$(2),core.vxM(versionsDTO_r10.versionDTOs.length>0?5:-1)}}function ItemVersionsComponent_Conditional_0_Conditional_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.DNE(1,ItemVersionsComponent_Conditional_0_Conditional_1_Conditional_1_Template,6,9,"div",1),core.k0s()),2&rf){const versionsDTO_r10=core.XpG(),ctx_r1=core.XpG();core.R7$(),core.vxM(versionsDTO_r10.versionDTOs.length>0||ctx_r1.displayWhenEmpty?1:-1)}}function ItemVersionsComponent_Conditional_0_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.DNE(1,ItemVersionsComponent_Conditional_0_Conditional_1_Template,2,1,"div"),core.nI1(2,"async"),core.k0s()),2&rf){let tmp_2_0;const ctx_r1=core.XpG();core.R7$(),core.vxM((tmp_2_0=null==(tmp_2_0=core.bMT(2,1,ctx_r1.versionRD$))?null:tmp_2_0.payload)?1:-1,tmp_2_0)}}function ItemVersionsComponent_Conditional_2_Conditional_0_Template(rf,ctx){if(1&rf&&core.nrm(0,"ds-alert",25),2&rf){const ctx_r1=core.XpG(2);core.Y8G("content","item.version.history.empty")("type",ctx_r1.AlertTypeEnum.Info)}}function ItemVersionsComponent_Conditional_2_Template(rf,ctx){if(1&rf&&core.DNE(0,ItemVersionsComponent_Conditional_2_Conditional_0_Template,1,2,"ds-alert",25),2&rf){const ctx_r1=core.XpG();core.vxM(ctx_r1.displayWhenEmpty?0:-1)}}let ItemVersionsComponent=(()=>{class ItemVersionsComponent2{constructor(versionHistoryService,versionService,paginationService,notificationsService,translateService,authorizationService,configurationService){this.versionHistoryService=versionHistoryService,this.versionService=versionService,this.paginationService=paginationService,this.notificationsService=notificationsService,this.translateService=translateService,this.authorizationService=authorizationService,this.configurationService=configurationService,this.displayWhenEmpty=!1,this.displayTitle=!0,this.subs=[],this.AlertTypeEnum=alert_type.v,this.showSubmitter$=this.showSubmitter(),this.pageSize=10,this.options=Object.assign(new pagination_component_options_model.W,{id:"ivo",currentPage:1,pageSize:this.pageSize})}isAnyBeingEdited(){return null!=this.versionBeingEditedNumber}isThisBeingEdited(version){return version?.version===this.versionBeingEditedNumber}enableVersionEditing(version){this.versionBeingEditedSummary=version?.summary,this.versionBeingEditedNumber=version?.version,this.versionBeingEditedId=version?.id}disableVersionEditing(){this.versionBeingEditedSummary=void 0,this.versionBeingEditedNumber=void 0,this.versionBeingEditedId=void 0}onSummarySubmit(){this.versionService.findById(this.versionBeingEditedId).pipe((0,shared_operators.yd)(),(0,operators.nx)(findRes=>{const updatedVersion=Object.assign({},findRes.payload,{summary:this.versionBeingEditedSummary});return this.versionService.update(updatedVersion).pipe((0,shared_operators.qD)())})).subscribe(updatedVersionRD=>{updatedVersionRD.hasSucceeded?(this.notificationsService.success(null,this.translateService.get("item.version.edit.notification.success",{version:this.versionBeingEditedNumber})),this.getAllVersions(this.versionHistory$)):this.notificationsService.warning(null,this.translateService.get("item.version.edit.notification.failure",{version:this.versionBeingEditedNumber})),this.disableVersionEditing()})}canEditVersion$(version){return this.authorizationService.isAuthorized(feature_id._.CanEditVersion,version.self)}showSubmitter(){const includeSubmitter$=this.configurationService.findByPropertyName("versioning.item.history.include.submitter").pipe((0,shared_operators.ak)(),(0,operators.Tj)(configurationProperty=>configurationProperty.values[0]),(0,operators.ql)(!1)),isAdmin$=(0,cjs.combineLatest)([this.authorizationService.isAuthorized(feature_id._.IsCollectionAdmin),this.authorizationService.isAuthorized(feature_id._.IsCommunityAdmin),this.authorizationService.isAuthorized(feature_id._.AdministratorOf)]).pipe((0,operators.Tj)(([isCollectionAdmin,isCommunityAdmin,isSiteAdmin])=>isCollectionAdmin||isCommunityAdmin||isSiteAdmin),(0,operators.s)(1));return(0,cjs.combineLatest)([includeSubmitter$,isAdmin$]).pipe((0,operators.Tj)(([includeSubmitter,isAdmin])=>includeSubmitter&&isAdmin))}getAllVersions(versionHistory$){const currentPagination=this.paginationService.getCurrentPagination(this.options.id,this.options);this.versionsDTO$=(0,cjs.combineLatest)([versionHistory$,currentPagination]).pipe((0,operators.nx)(([versionHistory,options])=>this.versionHistoryService.getVersions(versionHistory.id,new paginated_search_options_model.C({pagination:Object.assign({},options,{currentPage:options.currentPage})}),!1,!0,(0,follow_link_config_model.s)("item"),(0,follow_link_config_model.s)("eperson"))),(0,shared_operators.qD)(),(0,shared_operators.Bo)(),(0,operators.Tj)(versions=>({totalElements:versions.totalElements,versionDTOs:(versions?.page??[]).map(version=>({version,canEditVersion:this.canEditVersion$(version)}))})))}onPageChange(){this.getAllVersions(this.versionHistory$)}ngOnInit(){(0,empty_util.a4)(this.item.version)&&(this.versionRD$=this.item.version,this.versionHistoryRD$=this.versionRD$.pipe((0,shared_operators.v7)(),(0,shared_operators.Bo)(),(0,empty_util.Az)(),(0,operators.nx)(version=>version.versionhistory)),this.versionHistory$=this.versionHistoryRD$.pipe((0,shared_operators.ak)(),(0,empty_util.Az)()),this.hasDraftVersion$=this.versionHistoryRD$.pipe((0,shared_operators.ak)(),(0,operators.Tj)(res=>!!res?.draftVersion)),this.getAllVersions(this.versionHistory$))}ngOnDestroy(){this.cleanupSubscribes(),this.paginationService.clearPagination(this.options.id)}cleanupSubscribes(){this.subs.filter(sub=>(0,empty_util.a4)(sub)).forEach(sub=>sub.unsubscribe())}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ItemVersionsComponent2)(core.rXU(version_history_data_service.VersionHistoryDataService),core.rXU(version_data_service.VersionDataService),core.rXU(pagination_service.m),core.rXU(notifications_service.I),core.rXU(ngx_translate_core.c$),core.rXU(authorization_data_service.AuthorizationDataService),core.rXU(configuration_data_service.ConfigurationDataService))}}static{this.\u0275cmp=core.VBU({type:ItemVersionsComponent2,selectors:[["ds-item-versions"]],inputs:{item:"item",displayWhenEmpty:"displayWhenEmpty",displayTitle:"displayTitle",displayActions:"displayActions"},standalone:!0,features:[core.aNF],decls:3,vars:3,consts:[["editSummary",""],[1,"mb-2"],[1,"h4"],[3,"type"],[3,"hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition"],[3,"paginationChange","hideGear","hidePagerWhenSinglePage","paginationOptions","collectionSize","retainScrollPosition"],[1,"table","table-striped","table-bordered","align-middle","my-2"],["scope","col"],[3,"id"],[1,"version-row-element-version"],[3,"versionsHistoryChange","hasDraftVersion","version","item","displayActions","itemVersion","versionBeingEditedNumber"],[1,"version-row-element-editor"],[1,"version-row-element-date"],[1,"version-row-element-summary"],[1,"float-start"],["type","text",1,"form-control",3,"ngModel"],[1,"float-end","btn-group","edit-field","space-children-mr"],["type","text",1,"form-control",3,"ngModelChange","keyup.enter","ngModel"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-edit",3,"dsBtnDisabled","title"],[1,"btn","btn-sm","btn-outline-warning",3,"click","title"],[1,"fas","fa-undo-alt","fa-fw"],[1,"btn","btn-outline-success","btn-sm",3,"click","title"],[1,"fas","fa-check","fa-fw"],[1,"btn","btn-outline-primary","btn-sm","version-row-element-edit",3,"click","dsBtnDisabled","title"],[1,"fas","fa-edit","fa-fw"],[3,"content","type"]],template:function(rf,ctx){if(1&rf&&(core.DNE(0,ItemVersionsComponent_Conditional_0_Template,3,3,"div"),core.nI1(1,"async"),core.DNE(2,ItemVersionsComponent_Conditional_2_Template,1,1)),2&rf){let tmp_0_0;core.vxM((tmp_0_0=core.bMT(1,1,ctx.versionsDTO$))?0:2,tmp_0_0)}},dependencies:[alert_component.C,common.Jj,btn_disabled_directive.A,common.vh,fesm2022_forms.YN,fesm2022_forms.me,fesm2022_forms.BC,fesm2022_forms.vS,ItemVersionsRowElementVersionComponent,pagination_component.e,ngx_translate_core.h,ngx_translate_core.D9]})}}return ItemVersionsComponent2})()},70135:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{s:()=>ItemVersionsNoticeComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(87514),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(2385),rxjs__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9238),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(60444),_core_data_version_history_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(47765),_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(43575),__webpack_require__(39022)),_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(6213),_shared_alert_alert_type__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(83113),_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2794),_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(88292),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25376);const _c0=a0=>({destination:a0});function ItemVersionsNoticeComponent_Conditional_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.nrm(0,"ds-alert",0),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(3,"translate")),2&rf){let tmp_1_0;const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("content",_angular_core__WEBPACK_IMPORTED_MODULE_5__.i5U(3,7,"item.version.notice",_angular_core__WEBPACK_IMPORTED_MODULE_5__.eq3(10,_c0,ctx_r0.getItemPage(null==(tmp_1_0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(2,5,null==(tmp_1_0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(1,3,ctx_r0.latestVersion$))?null:tmp_1_0.item))?null:tmp_1_0.payload))))("dismissible",!1)("type",ctx_r0.AlertTypeEnum.Warning)}}let ItemVersionsNoticeComponent=(()=>{class ItemVersionsNoticeComponent2{constructor(versionHistoryService){this.versionHistoryService=versionHistoryService,this.AlertTypeEnum=_shared_alert_alert_type__WEBPACK_IMPORTED_MODULE_4__.v}ngOnInit(){(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(this.item.version)&&(this.versionRD$=this.item.version,this.versionHistoryRD$=this.versionRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.v7)(),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.Bo)(),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.Az)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.nx)(version=>version.versionhistory)),this.latestVersion$=this.versionHistoryRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.nx)(vhRD=>vhRD.hasSucceeded?this.versionHistoryService.getLatestVersionFromHistory$(vhRD.payload):rxjs__WEBPACK_IMPORTED_MODULE_8__.EMPTY)),this.showLatestVersionNotice$=this.versionRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.nx)(versionRD=>versionRD.hasSucceeded?this.versionHistoryService.isLatest$(versionRD.payload).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.Tj)(isLatest=>null!=isLatest&&!isLatest)):(0,rxjs__WEBPACK_IMPORTED_MODULE_8__.of)(!1)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.ql)(!1)))}getItemPage(item){if((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(item))return(0,_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_9__._o)(item)}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ItemVersionsNoticeComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_core_data_version_history_data_service__WEBPACK_IMPORTED_MODULE_0__.VersionHistoryDataService))}}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_5__.VBU({type:ItemVersionsNoticeComponent2,selectors:[["ds-item-versions-notice"]],inputs:{item:"item"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_5__.aNF],decls:2,vars:3,consts:[[3,"content","dismissible","type"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.DNE(0,ItemVersionsNoticeComponent_Conditional_0_Template,4,12,"ds-alert",0),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(1,"async")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_5__.vxM(!0===_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(1,1,ctx.showLatestVersionNotice$)?0:-1)},dependencies:[_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_3__.C,_angular_common__WEBPACK_IMPORTED_MODULE_10__.Jj,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__.D9],encapsulation:2})}}return ItemVersionsNoticeComponent2})()},42176:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/item-page/alerts/item-alerts.component":[34238,4238]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=42176,module.exports=webpackAsyncContext},63614:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/item-page/full/field-components/file-section/full-file-section.component":[17054,7054]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=63614,module.exports=webpackAsyncContext},4872:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/item-page/full/full-item-page.component":[22230,2230]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=4872,module.exports=webpackAsyncContext},5729:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/item-page/simple/item-page.component":[9303,9303]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=5729,module.exports=webpackAsyncContext}};