"use strict";exports.id=1517,exports.ids=[1517],exports.modules={11517:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ROUTES:()=>ROUTES});var common=__webpack_require__(87514),ngx_translate_core=__webpack_require__(2385),cjs=__webpack_require__(9238),operators=__webpack_require__(60444),auth_service=__webpack_require__(54545),paginated_list_model=__webpack_require__(29481),pagination_service=__webpack_require__(31903),shared_operators=__webpack_require__(39022),page_info_model=__webpack_require__(23474),alert_component=__webpack_require__(6213),alert_type=__webpack_require__(83113),empty_util=__webpack_require__(2794),themed_loading_component=__webpack_require__(18869),pagination_component=__webpack_require__(42191),pagination_component_options_model=__webpack_require__(54396),core=__webpack_require__(25376),router=__webpack_require__(18134),app_routing_paths=__webpack_require__(31788),dso_name_service=__webpack_require__(11481),btn_disabled_directive=(__webpack_require__(27434),__webpack_require__(69919)),confirmation_modal_component=__webpack_require__(3849),themed_type_badge_component=__webpack_require__(88395),subscription_modal_component=(__webpack_require__(22983),__webpack_require__(47488)),subscriptions_data_service=__webpack_require__(29712),ng_bootstrap=__webpack_require__(87969);const _c0=["ds-subscription-view",""];function SubscriptionViewComponent_Conditional_1_Template(rf,ctx){if(1&rf&&(core.nrm(0,"ds-type-badge",9),core.j41(1,"p")(2,"a",10),core.EFF(3),core.k0s()()),2&rf){const ctx_r0=core.XpG();core.Y8G("object",ctx_r0.dso),core.R7$(2),core.Y8G("routerLink",ctx_r0.getPageRoute(ctx_r0.dso)),core.R7$(),core.JRh(ctx_r0.dsoNameService.getName(ctx_r0.dso))}}function SubscriptionViewComponent_Conditional_2_Template(rf,ctx){1&rf&&(core.j41(0,"p",11),core.EFF(1),core.nI1(2,"translate"),core.k0s(),core.j41(3,"p",12),core.EFF(4),core.nI1(5,"translate"),core.k0s()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,2,"subscriptions.table.not-available")),core.R7$(3),core.JRh(core.bMT(5,4,"subscriptions.table.not-available-message")))}function SubscriptionViewComponent_Conditional_4_Template(rf,ctx){if(1&rf&&(core.j41(0,"span",1),core.EFF(1),core.k0s()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.JRh(ctx_r0.subscription.subscriptionType)}}function SubscriptionViewComponent_Conditional_6_For_1_Conditional_3_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.EFF(1,","),core.k0s())}function SubscriptionViewComponent_Conditional_6_For_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"span"),core.EFF(1),core.nI1(2,"translate"),core.DNE(3,SubscriptionViewComponent_Conditional_6_For_1_Conditional_3_Template,2,0,"span"),core.k0s()),2&rf){const parameterList_r2=ctx.$implicit,\u0275$index_29_r3=ctx.$index,ctx_r0=core.XpG(2);core.R7$(),core.SpI(" ",core.bMT(2,2,"subscriptions.frequency."+parameterList_r2.value),""),core.R7$(2),core.vxM(\u0275$index_29_r3<ctx_r0.subscription.subscriptionParameterList.length-1?3:-1)}}function SubscriptionViewComponent_Conditional_6_Template(rf,ctx){if(1&rf&&core.Z7z(0,SubscriptionViewComponent_Conditional_6_For_1_Template,4,4,"span",null,core.fX1),2&rf){const ctx_r0=core.XpG();core.Dyx(ctx_r0.subscription.subscriptionParameterList)}}let SubscriptionViewComponent=(()=>{class SubscriptionViewComponent2{constructor(modalService,subscriptionService,dsoNameService){this.modalService=modalService,this.subscriptionService=subscriptionService,this.dsoNameService=dsoNameService,this.reload=new core.bkB}getPageRoute(dso){return(0,app_routing_paths.wN)(dso)}deleteSubscriptionPopup(subscription){if((0,empty_util.a4)(subscription.id)){const modalRef=this.modalService.open(confirmation_modal_component.M);modalRef.componentInstance.name=this.dsoNameService.getName(this.dso),modalRef.componentInstance.headerLabel="confirmation-modal.delete-subscription.header",modalRef.componentInstance.infoLabel="confirmation-modal.delete-subscription.info",modalRef.componentInstance.cancelLabel="confirmation-modal.delete-subscription.cancel",modalRef.componentInstance.confirmLabel="confirmation-modal.delete-subscription.confirm",modalRef.componentInstance.brandColor="danger",modalRef.componentInstance.confirmIcon="fas fa-trash",modalRef.componentInstance.response.pipe((0,operators.s)(1)).subscribe(confirm=>{confirm&&this.subscriptionService.deleteSubscription(subscription.id).subscribe(res=>{this.reload.emit()})})}}openSubscriptionModal(){this.modalRef=this.modalService.open(subscription_modal_component.w),this.modalRef.componentInstance.dso=this.dso,this.modalRef.componentInstance.subscription=this.subscription,this.modalRef.componentInstance.updateSubscription.pipe((0,operators.s)(1)).subscribe(subscription=>{this.subscription=subscription})}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||SubscriptionViewComponent2)(core.rXU(ng_bootstrap.Bq),core.rXU(subscriptions_data_service.SubscriptionsDataService),core.rXU(dso_name_service.f))}}static{this.\u0275cmp=core.VBU({type:SubscriptionViewComponent2,selectors:[["","ds-subscription-view",""]],inputs:{subscription:"subscription",dso:"dso",eperson:"eperson"},outputs:{reload:"reload"},standalone:!0,features:[core.aNF],attrs:_c0,decls:15,vars:11,consts:[[1,"dso-info"],[1,"subscription-type"],[1,"subscription-parameters"],[1,"subscription-actions"],[1,"btn-group","edit-field"],[1,"btn","btn-outline-primary","btn-sm","access-control-editEPersonButton",3,"click","dsBtnDisabled","title"],[1,"fas","fa-edit","fa-fw"],[1,"btn","btn-outline-danger","btn-sm","access-control-deleteEPersonButton",3,"click","title"],[1,"fas","fa-trash-alt","fa-fw"],[3,"object"],[3,"routerLink"],[1,"my-0"],[1,"text-muted","my-0"]],template:function(rf,ctx){1&rf&&(core.j41(0,"td",0),core.DNE(1,SubscriptionViewComponent_Conditional_1_Template,4,3)(2,SubscriptionViewComponent_Conditional_2_Template,6,6),core.k0s(),core.j41(3,"td"),core.DNE(4,SubscriptionViewComponent_Conditional_4_Template,2,1,"span",1),core.k0s(),core.j41(5,"td",2),core.DNE(6,SubscriptionViewComponent_Conditional_6_Template,2,0),core.k0s(),core.j41(7,"td",3)(8,"div",4)(9,"button",5),core.nI1(10,"translate"),core.bIt("click",function($event){return $event.preventDefault(),ctx.openSubscriptionModal()}),core.nrm(11,"i",6),core.k0s(),core.j41(12,"button",7),core.nI1(13,"translate"),core.bIt("click",function(){return ctx.deleteSubscriptionPopup(ctx.subscription)}),core.nrm(14,"i",8),core.k0s()()()),2&rf&&(core.R7$(),core.vxM(ctx.dso?1:-1),core.R7$(),core.vxM(ctx.dso?-1:2),core.R7$(2),core.vxM(ctx.subscription?4:-1),core.R7$(2),core.vxM(ctx.subscription?6:-1),core.R7$(3),core.Y8G("dsBtnDisabled",!ctx.dso)("title",core.bMT(10,7,"subscriptions.table.edit")),core.R7$(3),core.Y8G("title",core.bMT(13,9,"subscriptions.table.delete")))},dependencies:[btn_disabled_directive.A,router.Wk,themed_type_badge_component.C,ngx_translate_core.h,ngx_translate_core.D9]})}}return SubscriptionViewComponent2})();var var_directive=__webpack_require__(17543);function SubscriptionsPageComponent_Conditional_8_Template(rf,ctx){1&rf&&core.nrm(0,"ds-loading")}function SubscriptionsPageComponent_ng_container_10_Conditional_1_For_19_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"tr",11),core.nI1(1,"async"),core.nI1(2,"async"),core.bIt("reload",function(){core.eBV(_r1);const ctx_r1=core.XpG(3);return core.Njj(ctx_r1.refresh())}),core.k0s()}if(2&rf){let tmp_13_0,tmp_14_0;const subscription_r3=ctx.$implicit;core.Y8G("dso",null==(tmp_13_0=core.bMT(1,3,null==subscription_r3?null:subscription_r3.resource))?null:tmp_13_0.payload)("eperson",null==(tmp_14_0=core.bMT(2,5,null==subscription_r3?null:subscription_r3.eperson))||null==tmp_14_0.payload?null:tmp_14_0.payload.id)("subscription",subscription_r3)}}function SubscriptionsPageComponent_ng_container_10_Conditional_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-pagination",4)(1,"div",6)(2,"table",7)(3,"thead")(4,"tr")(5,"th",8),core.EFF(6),core.nI1(7,"translate"),core.k0s(),core.j41(8,"th",9),core.EFF(9),core.nI1(10,"translate"),core.k0s(),core.j41(11,"th",9),core.EFF(12),core.nI1(13,"translate"),core.k0s(),core.j41(14,"th",9),core.EFF(15),core.nI1(16,"translate"),core.k0s()()(),core.j41(17,"tbody"),core.Z7z(18,SubscriptionsPageComponent_ng_container_10_Conditional_1_For_19_Template,3,7,"tr",10,core.fX1),core.k0s()()()()),2&rf){const subscriptions_r4=core.XpG().ngVar,ctx_r1=core.XpG();core.Y8G("paginationOptions",ctx_r1.config)("collectionSize",null==subscriptions_r4||null==subscriptions_r4.pageInfo?null:subscriptions_r4.pageInfo.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0),core.R7$(6),core.JRh(core.bMT(7,8,"subscriptions.table.dso")),core.R7$(3),core.JRh(core.bMT(10,10,"subscriptions.table.subscription_type")),core.R7$(3),core.JRh(core.bMT(13,12,"subscriptions.table.subscription_frequency")),core.R7$(3),core.JRh(core.bMT(16,14,"subscriptions.table.action")),core.R7$(3),core.Dyx(null==subscriptions_r4?null:subscriptions_r4.page)}}function SubscriptionsPageComponent_ng_container_10_Conditional_3_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-alert",5),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf){const ctx_r1=core.XpG(2);core.Y8G("type",ctx_r1.AlertType.Info),core.R7$(),core.SpI(" ",core.bMT(2,2,"subscriptions.table.empty.message")," ")}}function SubscriptionsPageComponent_ng_container_10_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,SubscriptionsPageComponent_ng_container_10_Conditional_1_Template,20,16,"ds-pagination",4),core.nI1(2,"async"),core.DNE(3,SubscriptionsPageComponent_ng_container_10_Conditional_3_Template,3,4,"ds-alert",5),core.nI1(4,"async"),core.bVm()),2&rf){const subscriptions_r4=ctx.ngVar,ctx_r1=core.XpG();core.R7$(),core.vxM((null==subscriptions_r4||null==subscriptions_r4.pageInfo?null:subscriptions_r4.pageInfo.totalElements)>0&&!0!==core.bMT(2,2,ctx_r1.loading$)?1:-1),core.R7$(2),core.vxM(0===(null==subscriptions_r4||null==subscriptions_r4.pageInfo?null:subscriptions_r4.pageInfo.totalElements)&&!0!==core.bMT(4,4,ctx_r1.loading$)?3:-1)}}const ROUTES=[{path:"",data:{title:"subscriptions.title"},children:[{path:"",component:(()=>{class SubscriptionsPageComponent2{constructor(paginationService,authService,subscriptionService){this.paginationService=paginationService,this.authService=authService,this.subscriptionService=subscriptionService,this.subscriptions$=new cjs.BehaviorSubject((0,paginated_list_model.g)(new page_info_model.Q,[])),this.config=Object.assign(new pagination_component_options_model.W,{id:"elp",pageSize:10,currentPage:1}),this.loading$=new cjs.BehaviorSubject(!1),this.sub=null,this.AlertType=alert_type.v}ngOnInit(){this.ePersonId$=this.authService.getAuthenticatedUserFromStore().pipe((0,operators.s)(1),(0,operators.Tj)(ePerson=>ePerson.id),(0,cjs.shareReplay)({refCount:!1})),this.retrieveSubscriptions()}retrieveSubscriptions(){this.sub=this.paginationService.getCurrentPagination(this.config.id,this.config).pipe((0,cjs.combineLatestWith)(this.ePersonId$),(0,operators.Mi)(()=>this.loading$.next(!0)),(0,operators.nx)(([currentPagination,ePersonId])=>this.subscriptionService.findByEPerson(ePersonId,{currentPage:currentPagination.currentPage,elementsPerPage:currentPagination.pageSize})),(0,shared_operators.bD)()).subscribe(res=>{res.hasSucceeded&&this.subscriptions$.next(res.payload),this.loading$.next(!1)})}refresh(){(0,empty_util.a4)(this.sub)&&this.sub.unsubscribe(),this.retrieveSubscriptions()}ngOnDestroy(){(0,empty_util.a4)(this.sub)&&this.sub.unsubscribe()}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||SubscriptionsPageComponent2)(core.rXU(pagination_service.m),core.rXU(auth_service.uR),core.rXU(subscriptions_data_service.SubscriptionsDataService))}}static{this.\u0275cmp=core.VBU({type:SubscriptionsPageComponent2,selectors:[["ds-subscriptions-page"]],standalone:!0,features:[core.aNF],decls:12,vars:9,consts:[[1,"container"],[1,"row"],[1,"col-md-12","m-40"],[4,"ngVar"],[3,"paginationOptions","collectionSize","hideGear","hidePagerWhenSinglePage"],["data-test","empty-alert",3,"type"],[1,"table-responsive"],["id","formats","data-test","subscription-table",1,"table","table-striped","table-hover"],["scope","col",2,"width","50%"],["scope","col"],["ds-subscription-view","",3,"dso","eperson","subscription"],["ds-subscription-view","",3,"reload","dso","eperson","subscription"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1"),core.EFF(4),core.nI1(5,"translate"),core.k0s(),core.j41(6,"div",1)(7,"div",2),core.DNE(8,SubscriptionsPageComponent_Conditional_8_Template,1,0,"ds-loading"),core.nI1(9,"async"),core.DNE(10,SubscriptionsPageComponent_ng_container_10_Template,5,6,"ng-container",3),core.nI1(11,"async"),core.k0s()()()()()),2&rf&&(core.R7$(4),core.JRh(core.bMT(5,3,"subscriptions.title")),core.R7$(4),core.vxM(core.bMT(9,5,ctx.loading$)?8:-1),core.R7$(2),core.Y8G("ngVar",core.bMT(11,7,ctx.subscriptions$)))},dependencies:[alert_component.C,common.Jj,pagination_component.e,SubscriptionViewComponent,themed_loading_component.v,ngx_translate_core.h,ngx_translate_core.D9,var_directive.r]})}}return SubscriptionsPageComponent2})()}]}]}};