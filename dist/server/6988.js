"use strict";exports.id=6988,exports.ids=[6988,748,3390,2019],exports.modules={46988:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ROUTES:()=>ROUTES});var i18n_breadcrumb_resolver=__webpack_require__(12213),cjs=__webpack_require__(9238),feature_id=__webpack_require__(86583);const collectionAdministratorGuard=(0,__webpack_require__(10908).L)(()=>(0,cjs.of)(feature_id._.IsCollectionAdmin));var resource_policy_create_component=__webpack_require__(67149),resource_policy_edit_component=__webpack_require__(79537),resource_policy_resolver=__webpack_require__(59278),resource_policy_target_resolver=__webpack_require__(23250),common=__webpack_require__(87514),ng_bootstrap=__webpack_require__(87969),ngx_translate_core=__webpack_require__(2385),operators=__webpack_require__(60444),dso_name_service=__webpack_require__(11481),sort_options_model=__webpack_require__(60795),item_data_service=__webpack_require__(94149),dspace_object_type_model=__webpack_require__(59293),shared_operators=__webpack_require__(39022),search_service=__webpack_require__(58807),search_configuration_service=__webpack_require__(11013),my_dspace_configuration_service=__webpack_require__(16948),fade=__webpack_require__(67441),empty_util=__webpack_require__(2794),notifications_service=__webpack_require__(76623),fesm2022_forms=__webpack_require__(13054),router=__webpack_require__(18134),item_page_routing_paths=__webpack_require__(88292),btn_disabled_directive=__webpack_require__(69919),error_component=__webpack_require__(17561),themed_loading_component=__webpack_require__(18869),pagination_component=__webpack_require__(42191),var_directive=__webpack_require__(17543),object_select_model=__webpack_require__(72004),object_select_component=__webpack_require__(44631),core=__webpack_require__(25376);const _c0=()=>["dc.contributor.author","dc.creator","dc.contributor.*"],_c1=a0=>["/collections",a0],_c2=(a0,a1)=>({"btn-danger":a0,"btn-primary":a1});function ItemSelectComponent_ng_container_0_Conditional_1_Conditional_9_Template(rf,ctx){1&rf&&(core.j41(0,"th",8),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"item.select.table.collection")))}function ItemSelectComponent_ng_container_0_Conditional_1_For_18_Conditional_7_span_1_Conditional_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"a",10),core.EFF(1),core.k0s()),2&rf){const collection_r4=core.XpG().ngVar,ctx_r2=core.XpG(5);core.Y8G("routerLink",core.eq3(2,_c1,null==collection_r4?null:collection_r4.id)),core.R7$(),core.SpI(" ",ctx_r2.dsoNameService.getName(collection_r4)," ")}}function ItemSelectComponent_ng_container_0_Conditional_1_For_18_Conditional_7_span_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"span"),core.DNE(1,ItemSelectComponent_ng_container_0_Conditional_1_For_18_Conditional_7_span_1_Conditional_1_Template,2,4,"a",10),core.k0s()),2&rf){const collection_r4=ctx.ngVar;core.R7$(),core.vxM(collection_r4?1:-1)}}function ItemSelectComponent_ng_container_0_Conditional_1_For_18_Conditional_7_Template(rf,ctx){if(1&rf&&(core.j41(0,"td"),core.DNE(1,ItemSelectComponent_ng_container_0_Conditional_1_For_18_Conditional_7_span_1_Template,2,1,"span",1),core.nI1(2,"async"),core.k0s()),2&rf){let tmp_15_0;const selectItem_r2=core.XpG().$implicit;core.R7$(),core.Y8G("ngVar",null==(tmp_15_0=core.bMT(2,1,selectItem_r2.dso.owningCollection))?null:tmp_15_0.payload)}}function ItemSelectComponent_ng_container_0_Conditional_1_For_18_Conditional_9_Template(rf,ctx){if(1&rf&&(core.j41(0,"span"),core.EFF(1),core.k0s()),2&rf){const selectItem_r2=core.XpG().$implicit;core.R7$(),core.JRh(selectItem_r2.dso.firstMetadataValue(core.lJ4(1,_c0)))}}function ItemSelectComponent_ng_container_0_Conditional_1_For_18_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"tr")(1,"td")(2,"input",9,0),core.nI1(4,"async"),core.nI1(5,"async"),core.nI1(6,"translate"),core.bIt("change",function(){const selectItem_r2=core.eBV(_r1).$implicit,ctx_r2=core.XpG(3);return core.Njj(ctx_r2.switch(selectItem_r2.dso.id))}),core.k0s()(),core.DNE(7,ItemSelectComponent_ng_container_0_Conditional_1_For_18_Conditional_7_Template,3,3,"td"),core.j41(8,"td"),core.DNE(9,ItemSelectComponent_ng_container_0_Conditional_1_For_18_Conditional_9_Template,2,2,"span"),core.k0s(),core.j41(10,"td")(11,"a",10),core.EFF(12),core.k0s()()()}if(2&rf){const selectItem_r2=ctx.$implicit,selectItemBtn_r5=core.sdS(3),ctx_r2=core.XpG(3);core.R7$(2),core.FS9("name",selectItem_r2.dso.id),core.Y8G("disabled",!1===core.bMT(4,8,selectItem_r2.canSelect$))("ngModel",core.bMT(5,10,selectItem_r2.selected$)),core.BMQ("aria-label",core.bMT(6,12,selectItemBtn_r5.checked?"item.select.table.deselect":"item.select.table.select")),core.R7$(5),core.vxM(ctx_r2.hideCollection?-1:7),core.R7$(2),core.vxM(selectItem_r2.dso.hasMetadata(core.lJ4(14,_c0))?9:-1),core.R7$(2),core.Y8G("routerLink",selectItem_r2.route),core.R7$(),core.JRh(ctx_r2.dsoNameService.getName(selectItem_r2.dso))}}function ItemSelectComponent_ng_container_0_Conditional_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-pagination",2)(1,"div",5)(2,"table",6)(3,"thead")(4,"tr")(5,"th")(6,"span",7),core.EFF(7),core.nI1(8,"translate"),core.k0s()(),core.DNE(9,ItemSelectComponent_ng_container_0_Conditional_1_Conditional_9_Template,3,3,"th",8),core.j41(10,"th",8),core.EFF(11),core.nI1(12,"translate"),core.k0s(),core.j41(13,"th",8),core.EFF(14),core.nI1(15,"translate"),core.k0s()()(),core.j41(16,"tbody"),core.Z7z(17,ItemSelectComponent_ng_container_0_Conditional_1_For_18_Template,13,15,"tr",null,core.fX1),core.nI1(19,"async"),core.k0s()()()()),2&rf){const itemsRD_r6=core.XpG().ngVar,ctx_r2=core.XpG();core.Y8G("paginationOptions",ctx_r2.paginationOptions)("sortOptions",ctx_r2.sortOptions)("collectionSize",null==itemsRD_r6||null==itemsRD_r6.payload?null:itemsRD_r6.payload.totalElements)("hidePagerWhenSinglePage",!0)("hideGear",!0),core.R7$(7),core.JRh(core.bMT(8,9,"item.select.table.selected")),core.R7$(2),core.vxM(ctx_r2.hideCollection?-1:9),core.R7$(2),core.JRh(core.bMT(12,11,"item.select.table.author")),core.R7$(3),core.JRh(core.bMT(15,13,"item.select.table.title")),core.R7$(3),core.Dyx(core.bMT(19,15,ctx_r2.selectItems$))}}function ItemSelectComponent_ng_container_0_Conditional_2_Template(rf,ctx){1&rf&&(core.j41(0,"div",3),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"item.select.empty")," "))}function ItemSelectComponent_ng_container_0_Conditional_3_Template(rf,ctx){1&rf&&(core.nrm(0,"ds-error",4),core.nI1(1,"translate")),2&rf&&core.FS9("message",core.bMT(1,1,"error.items"))}function ItemSelectComponent_ng_container_0_Conditional_4_Template(rf,ctx){1&rf&&(core.nrm(0,"ds-loading",4),core.nI1(1,"translate")),2&rf&&core.FS9("message",core.bMT(1,1,"loading.items"))}function ItemSelectComponent_ng_container_0_div_5_Template(rf,ctx){if(1&rf){const _r7=core.RV6();core.j41(0,"div")(1,"button",11),core.bIt("click",function(){core.eBV(_r7);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.onCancel())}),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"button",12),core.bIt("click",function(){core.eBV(_r7);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.confirmSelected())}),core.EFF(5),core.nI1(6,"translate"),core.k0s()()}if(2&rf){const selectedIds_r8=ctx.ngVar,ctx_r2=core.XpG(2);core.R7$(2),core.JRh(core.bMT(3,4,ctx_r2.cancelButton)),core.R7$(2),core.Y8G("ngClass",core.l_i(8,_c2,ctx_r2.dangerConfirm,!ctx_r2.dangerConfirm))("dsBtnDisabled",0===(null==selectedIds_r8?null:selectedIds_r8.length)),core.R7$(),core.SpI(" ",core.bMT(6,6,ctx_r2.confirmButton)," ")}}function ItemSelectComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,ItemSelectComponent_ng_container_0_Conditional_1_Template,20,17,"ds-pagination",2)(2,ItemSelectComponent_ng_container_0_Conditional_2_Template,3,3,"div",3)(3,ItemSelectComponent_ng_container_0_Conditional_3_Template,2,3,"ds-error",4)(4,ItemSelectComponent_ng_container_0_Conditional_4_Template,2,3,"ds-loading",4)(5,ItemSelectComponent_ng_container_0_div_5_Template,7,11,"div",1),core.nI1(6,"async"),core.bVm()),2&rf){const itemsRD_r6=ctx.ngVar,ctx_r2=core.XpG();core.R7$(),core.vxM((null==itemsRD_r6||null==itemsRD_r6.payload?null:itemsRD_r6.payload.totalElements)>0?1:-1),core.R7$(),core.vxM(0===(null==itemsRD_r6||null==itemsRD_r6.payload?null:itemsRD_r6.payload.totalElements)||0===(null==itemsRD_r6||null==itemsRD_r6.payload||null==itemsRD_r6.payload.page?null:itemsRD_r6.payload.page.length)?2:-1),core.R7$(),core.vxM(null!=itemsRD_r6&&itemsRD_r6.hasFailed?3:-1),core.R7$(),core.vxM(!itemsRD_r6||null!=itemsRD_r6&&itemsRD_r6.isLoading?4:-1),core.R7$(),core.Y8G("ngVar",core.bMT(6,5,ctx_r2.selectedIds$))}}let ItemSelectComponent=(()=>{class ItemSelectComponent2 extends object_select_component.h{constructor(){super(...arguments),this.hideCollection=!1}ngOnInit(){super.ngOnInit(),(0,empty_util.hj)(this.confirmButton)||(this.confirmButton="item.select.confirm"),this.selectItems$=this.dsoRD$.pipe((0,empty_util.Az)(),(0,shared_operators.Hz)(),(0,operators.Tj)(items=>items.page.map(item=>Object.assign(new object_select_model.A,{dso:item,canSelect$:this.canSelect(item),selected$:this.getSelected(item.id),route:(0,item_page_routing_paths._o)(item)}))))}static{this.\u0275fac=(()=>{let \u0275ItemSelectComponent_BaseFactory;return function(__ngFactoryType__){return(\u0275ItemSelectComponent_BaseFactory||(\u0275ItemSelectComponent_BaseFactory=core.xGo(ItemSelectComponent2)))(__ngFactoryType__||ItemSelectComponent2)}})()}static{this.\u0275cmp=core.VBU({type:ItemSelectComponent2,selectors:[["ds-item-select"]],inputs:{hideCollection:"hideCollection"},standalone:!0,features:[core.Vt3,core.aNF],decls:2,vars:3,consts:[["selectItemBtn",""],[4,"ngVar"],[3,"paginationOptions","sortOptions","collectionSize","hidePagerWhenSinglePage","hideGear"],["role","alert",1,"alert","alert-info","w-100"],[3,"message"],[1,"table-responsive","mt-2"],["id","item-select",1,"table","table-striped","table-hover"],[1,"sr-only"],["scope","col"],["type","checkbox",1,"item-checkbox",3,"change","disabled","ngModel","name"],[3,"routerLink"],[1,"btn","btn-outline-secondary","item-cancel","float-start",3,"click"],[1,"btn","item-confirm","float-end",3,"click","ngClass","dsBtnDisabled"]],template:function(rf,ctx){1&rf&&(core.DNE(0,ItemSelectComponent_ng_container_0_Template,7,7,"ng-container",1),core.nI1(1,"async")),2&rf&&core.Y8G("ngVar",core.bMT(1,1,ctx.dsoRD$))},dependencies:[common.Jj,btn_disabled_directive.A,error_component.A,fesm2022_forms.YN,fesm2022_forms.Zm,fesm2022_forms.BC,fesm2022_forms.vS,common.YU,pagination_component.e,router.Wk,themed_loading_component.v,ngx_translate_core.h,ngx_translate_core.D9,var_directive.r],encapsulation:2})}}return ItemSelectComponent2})();var paginated_search_options_model=__webpack_require__(86577),themed_search_form_component=__webpack_require__(25667),browser_only_pipe=__webpack_require__(96340),follow_link_config_model=__webpack_require__(76715);const collection_item_mapper_component_c0=["tabs"],collection_item_mapper_component_c1=a0=>({name:a0});function CollectionItemMapperComponent_ng_template_18_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"div",11)(1,"ds-item-select",12),core.nI1(2,"async"),core.bIt("confirm",function($event){core.eBV(_r2);const ctx_r2=core.XpG();return core.Njj(ctx_r2.mapItems($event,!0))})("cancel",function(){core.eBV(_r2);const ctx_r2=core.XpG();return core.Njj(ctx_r2.onCancel())}),core.k0s()()}if(2&rf){let tmp_4_0;const ctx_r2=core.XpG();core.R7$(),core.Y8G("key","browse")("dsoRD$",ctx_r2.collectionItemsRD$)("paginationOptions",null==(tmp_4_0=core.bMT(2,7,ctx_r2.searchOptions$))?null:tmp_4_0.pagination)("confirmButton","collection.edit.item-mapper.remove")("cancelButton","collection.edit.item-mapper.cancel")("dangerConfirm",!0)("hideCollection",!0)}}function CollectionItemMapperComponent_ng_template_24_Conditional_6_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"div")(1,"ds-item-select",17),core.nI1(2,"async"),core.bIt("confirm",function($event){core.eBV(_r5);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.mapItems($event))})("cancel",function(){core.eBV(_r5);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.onCancel())}),core.k0s()()}if(2&rf){let tmp_5_0;const ctx_r2=core.XpG(2);core.R7$(),core.Y8G("key","map")("dsoRD$",ctx_r2.mappedItemsRD$)("paginationOptions",null==(tmp_5_0=core.bMT(2,6,ctx_r2.searchOptions$))?null:tmp_5_0.pagination)("featureId",ctx_r2.FeatureIds.CanManageMappings)("confirmButton","collection.edit.item-mapper.confirm")("cancelButton","collection.edit.item-mapper.cancel")}}function CollectionItemMapperComponent_ng_template_24_Conditional_7_Template(rf,ctx){1&rf&&(core.j41(0,"div",16),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"collection.edit.item-mapper.no-search")," "))}function CollectionItemMapperComponent_ng_template_24_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"div",13)(1,"div",14)(2,"ds-search-form",15),core.nI1(3,"async"),core.nI1(4,"async"),core.nI1(5,"translate"),core.bIt("submitSearch",function(){core.eBV(_r4);const ctx_r2=core.XpG();return core.Njj(ctx_r2.performedSearch=!0)}),core.k0s()()(),core.DNE(6,CollectionItemMapperComponent_ng_template_24_Conditional_6_Template,3,8,"div")(7,CollectionItemMapperComponent_ng_template_24_Conditional_7_Template,3,3,"div",16)}if(2&rf){let tmp_2_0,tmp_3_0;const ctx_r2=core.XpG();core.R7$(2),core.Y8G("query",null==(tmp_2_0=core.bMT(3,7,ctx_r2.searchOptions$))?null:tmp_2_0.query)("scope",null==(tmp_3_0=core.bMT(4,9,ctx_r2.searchOptions$))?null:tmp_3_0.scope)("currentUrl","./")("inPlaceSearch",!0)("searchPlaceholder",core.bMT(5,11,"collection.edit.item-mapper.search-form.placeholder")),core.R7$(4),core.vxM(ctx_r2.performedSearch?6:-1),core.R7$(),core.vxM(ctx_r2.performedSearch?-1:7)}}let CollectionItemMapperComponent=(()=>{class CollectionItemMapperComponent2{constructor(route,router2,searchConfigService,searchService,notificationsService,itemDataService,translateService,dsoNameService){this.route=route,this.router=router2,this.searchConfigService=searchConfigService,this.searchService=searchService,this.notificationsService=notificationsService,this.itemDataService=itemDataService,this.translateService=translateService,this.dsoNameService=dsoNameService,this.FeatureIds=feature_id._,this.defaultSortOptions=new sort_options_model.z("dc.title",sort_options_model.U.ASC),this.performedSearch=!1}ngOnInit(){this.collectionRD$=this.route.parent.data.pipe((0,operators.Tj)(data=>data.dso),(0,shared_operators.yd)()),this.collectionName$=this.collectionRD$.pipe((0,operators.Tj)(rd=>this.dsoNameService.getName(rd.payload))),this.searchOptions$=this.searchConfigService.paginatedSearchOptions,this.loadItemLists()}loadItemLists(){this.shouldUpdate$=new cjs.BehaviorSubject(!0);const collectionAndOptions$=(0,cjs.combineLatest)(this.collectionRD$,this.searchOptions$,this.shouldUpdate$);this.collectionItemsRD$=collectionAndOptions$.pipe((0,operators.nx)(([collectionRD,options,shouldUpdate])=>(!0===shouldUpdate&&this.shouldUpdate$.next(!1),this.itemDataService.findListByHref(collectionRD.payload._links.mappedItems.href,Object.assign(options,{currentPage:options.pagination.currentPage,elementsPerPage:options.pagination.pageSize,sort:this.defaultSortOptions}),!shouldUpdate,!1,(0,follow_link_config_model.s)("owningCollection")).pipe((0,shared_operators.v7)())))),this.mappedItemsRD$=collectionAndOptions$.pipe((0,operators.nx)(([collectionRD,options,shouldUpdate])=>this.searchService.search(Object.assign(new paginated_search_options_model.C(options),{query:this.buildQuery(collectionRD.payload.id,options.query),scope:void 0,dsoTypes:[dspace_object_type_model.W.ITEM],sort:this.defaultSortOptions}),1e4,void 0,void 0,(0,follow_link_config_model.s)("owningCollection")).pipe((0,shared_operators.jY)(),(0,operators.ql)(void 0))))}mapItems(ids,remove){const responses$=this.collectionRD$.pipe((0,shared_operators.yd)(),(0,operators.Tj)(collectionRD=>collectionRD.payload),(0,operators.nx)(collection=>(0,cjs.combineLatest)(ids.map(id=>remove?this.itemDataService.removeMappingFromCollection(id,collection.id).pipe((0,shared_operators.qD)()):this.itemDataService.mapToCollection(id,collection._links.self.href).pipe((0,shared_operators.qD)())))));this.showNotifications(responses$,remove)}showNotifications(responses$,remove){const messageInsertion=remove?"unmap":"map";responses$.subscribe(responses=>{const successful=responses.filter(response=>response.hasSucceeded),unsuccessful=responses.filter(response=>response.hasFailed);successful.length>0&&((0,cjs.combineLatest)(this.translateService.get(`collection.edit.item-mapper.notifications.${messageInsertion}.success.head`),this.translateService.get(`collection.edit.item-mapper.notifications.${messageInsertion}.success.content`,{amount:successful.length})).subscribe(([head,content])=>{this.notificationsService.success(head,content)}),this.shouldUpdate$.next(!0)),unsuccessful.length>0&&(0,cjs.combineLatest)(this.translateService.get(`collection.edit.item-mapper.notifications.${messageInsertion}.error.head`),this.translateService.get(`collection.edit.item-mapper.notifications.${messageInsertion}.error.content`,{amount:unsuccessful.length})).subscribe(([head,content])=>{this.notificationsService.error(head,content)}),this.switchToFirstTab()})}tabChange(event){this.performedSearch=!1,this.router.navigateByUrl(this.getCurrentUrl())}getCurrentUrl(){return this.router.url.indexOf("?")>-1?this.router.url.substring(0,this.router.url.indexOf("?")):this.router.url}buildQuery(collectionId,query){const excludeColQuery=`-location.coll:"${collectionId}"`;return(0,empty_util.hj)(query)?`${excludeColQuery} AND ${query}`:excludeColQuery}switchToFirstTab(){this.tabs.select("browseTab")}onCancel(){this.collectionRD$.pipe((0,shared_operators.yd)(),(0,shared_operators.Bo)(),(0,operators.s)(1)).subscribe(collection=>{this.router.navigate(["/collections/",collection.id])})}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||CollectionItemMapperComponent2)(core.rXU(router.nX),core.rXU(router.Ix),core.rXU(my_dspace_configuration_service.EN),core.rXU(search_service.S),core.rXU(notifications_service.I),core.rXU(item_data_service.ItemDataService),core.rXU(ngx_translate_core.c$),core.rXU(dso_name_service.f))}}static{this.\u0275cmp=core.VBU({type:CollectionItemMapperComponent2,selectors:[["ds-collection-item-mapper"]],viewQuery:function(rf,ctx){if(1&rf&&core.GBs(collection_item_mapper_component_c0,5),2&rf){let _t;core.mGM(_t=core.lsd())&&(ctx.tabs=_t.first)}},standalone:!0,features:[core.Jv_([{provide:my_dspace_configuration_service.EN,useClass:search_configuration_service.g}]),core.aNF],decls:26,vars:26,consts:[["tabs","ngbNav"],[1,"container"],[1,"row"],[1,"col-12"],["id","collection-name",3,"innerHTML"],["ngbNav","",1,"nav-tabs",3,"navChange","destroyOnHide"],["role","presentation","data-test","browseTab",3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],["role","presentation","data-test","mapTab",3,"ngbNavItem"],[3,"ngbNavOutlet"],[1,"mt-2"],[1,"mt-2",3,"confirm","cancel","key","dsoRD$","paginationOptions","confirmButton","cancelButton","dangerConfirm","hideCollection"],[1,"row","mt-2"],[1,"col-12","col-lg-6"],["id","search-form",3,"submitSearch","query","scope","currentUrl","inPlaceSearch","searchPlaceholder"],["role","alert",1,"alert","alert-info","w-100"],[1,"mt-2",3,"confirm","cancel","key","dsoRD$","paginationOptions","featureId","confirmButton","cancelButton"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2"),core.EFF(4),core.nI1(5,"translate"),core.k0s(),core.nrm(6,"p",4),core.nI1(7,"async"),core.nI1(8,"translate"),core.j41(9,"p"),core.EFF(10),core.nI1(11,"translate"),core.k0s(),core.j41(12,"ul",5,0),core.bIt("navChange",function($event){return core.eBV(_r1),core.Njj(ctx.tabChange($event))}),core.j41(14,"li",6)(15,"a",7),core.EFF(16),core.nI1(17,"translate"),core.k0s(),core.DNE(18,CollectionItemMapperComponent_ng_template_18_Template,3,9,"ng-template",8),core.k0s(),core.j41(19,"li",9),core.nI1(20,"dsBrowserOnly"),core.j41(21,"a",7),core.EFF(22),core.nI1(23,"translate"),core.k0s(),core.DNE(24,CollectionItemMapperComponent_ng_template_24_Template,8,13,"ng-template",8),core.k0s()(),core.nrm(25,"div",10),core.k0s()()()}if(2&rf){const tabs_r6=core.sdS(13);core.R7$(4),core.JRh(core.bMT(5,9,"collection.edit.item-mapper.head")),core.R7$(2),core.Y8G("innerHTML",core.i5U(8,13,"collection.edit.item-mapper.collection",core.eq3(24,collection_item_mapper_component_c1,core.bMT(7,11,ctx.collectionName$))),core.npT),core.R7$(4),core.JRh(core.bMT(11,16,"collection.edit.item-mapper.description")),core.R7$(2),core.Y8G("destroyOnHide",!0),core.R7$(2),core.Y8G("ngbNavItem","browseTab"),core.R7$(2),core.JRh(core.bMT(17,18,"collection.edit.item-mapper.tabs.browse")),core.R7$(3),core.Y8G("ngbNavItem",core.bMT(20,20,"mapTab")),core.R7$(3),core.JRh(core.bMT(23,22,"collection.edit.item-mapper.tabs.map")),core.R7$(3),core.Y8G("ngbNavOutlet",tabs_r6)}},dependencies:[common.Jj,browser_only_pipe.L,ItemSelectComponent,ng_bootstrap.Pv,ng_bootstrap.Um,ng_bootstrap.X9,ng_bootstrap.sy,ng_bootstrap.Ri,ng_bootstrap.m_,themed_search_form_component.d,ngx_translate_core.h,ngx_translate_core.D9],data:{animation:[fade.qG,fade.Ws]},changeDetection:0})}}return CollectionItemMapperComponent2})();var access_control_form_container_component=__webpack_require__(58840);function CollectionAccessControlComponent_Conditional_0_Template(rf,ctx){1&rf&&core.nrm(0,"ds-access-control-form-container",0),2&rf&&core.Y8G("itemRD",ctx)("showLimitToSpecificBitstreams",!1)}let CollectionAccessControlComponent=(()=>{class CollectionAccessControlComponent2{constructor(route){this.route=route}ngOnInit(){this.itemRD$=this.route.parent.parent.data.pipe((0,operators.Tj)(data=>data.dso)).pipe((0,shared_operators.yd)())}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||CollectionAccessControlComponent2)(core.rXU(router.nX))}}static{this.\u0275cmp=core.VBU({type:CollectionAccessControlComponent2,selectors:[["ds-collection-access-control"]],standalone:!0,features:[core.aNF],decls:2,vars:3,consts:[["titleMessage","collection-access-control-title",3,"itemRD","showLimitToSpecificBitstreams"]],template:function(rf,ctx){if(1&rf&&(core.DNE(0,CollectionAccessControlComponent_Conditional_0_Template,1,2,"ds-access-control-form-container",0),core.nI1(1,"async")),2&rf){let tmp_0_0;core.vxM((tmp_0_0=core.bMT(1,1,ctx.itemRD$))?0:-1,tmp_0_0)}},dependencies:[access_control_form_container_component.o,common.Jj]})}}return CollectionAccessControlComponent2})();var resource_policies_component=__webpack_require__(61249);let CollectionAuthorizationsComponent=(()=>{class CollectionAuthorizationsComponent2{constructor(route){this.route=route}ngOnInit(){this.dsoRD$=this.route.parent.parent.data.pipe((0,operators.$1)(),(0,operators.Tj)(data=>data.dso))}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||CollectionAuthorizationsComponent2)(core.rXU(router.nX))}}static{this.\u0275cmp=core.VBU({type:CollectionAuthorizationsComponent2,selectors:[["ds-collection-authorizations"]],standalone:!0,features:[core.aNF],decls:3,vars:4,consts:[[1,"container"],[3,"resourceType","resourceUUID"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",0),core.nrm(1,"ds-resource-policies",1),core.nI1(2,"async"),core.k0s()),2&rf){let tmp_1_0;core.R7$(),core.Y8G("resourceType","collection")("resourceUUID",null==(tmp_1_0=core.bMT(2,2,ctx.dsoRD$))||null==tmp_1_0.payload?null:tmp_1_0.payload.id)}},dependencies:[common.Jj,resource_policies_component.e],encapsulation:2})}}return CollectionAuthorizationsComponent2})();var curation_form_component=__webpack_require__(80607);const collection_curate_component_c0=a0=>({collection:a0});let CollectionCurateComponent=(()=>{class CollectionCurateComponent2{constructor(route,dsoNameService){this.route=route,this.dsoNameService=dsoNameService}ngOnInit(){this.dsoRD$=this.route.parent.data.pipe((0,operators.s)(1),(0,operators.Tj)(data=>data.dso)),this.collectionName$=this.dsoRD$.pipe((0,operators.pb)(rd=>(0,empty_util.a4)(rd)),(0,operators.Tj)(rd=>this.dsoNameService.getName(rd.payload)))}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||CollectionCurateComponent2)(core.rXU(router.nX),core.rXU(dso_name_service.f))}}static{this.\u0275cmp=core.VBU({type:CollectionCurateComponent2,selectors:[["ds-collection-curate"]],standalone:!0,features:[core.aNF],decls:7,vars:11,consts:[[1,"container"],[3,"dsoHandle"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",0)(1,"h2"),core.EFF(2),core.nI1(3,"async"),core.nI1(4,"translate"),core.k0s(),core.nrm(5,"ds-curation-form",1),core.nI1(6,"async"),core.k0s()),2&rf){let tmp_1_0;core.R7$(2),core.JRh(core.i5U(4,4,"collection.curate.header",core.eq3(9,collection_curate_component_c0,core.bMT(3,2,ctx.collectionName$)))),core.R7$(3),core.Y8G("dsoHandle",null==(tmp_1_0=core.bMT(6,7,ctx.dsoRD$))?null:tmp_1_0.payload.handle)}},dependencies:[common.Jj,curation_form_component.X,ngx_translate_core.h,ngx_translate_core.D9],encapsulation:2})}}return CollectionCurateComponent2})();var collection_data_service=__webpack_require__(8108),item_template_data_service=__webpack_require__(79986),request_service=__webpack_require__(64806),collection_model=__webpack_require__(70652),item_model=__webpack_require__(43575),comcol_metadata_component=__webpack_require__(31258),collection_form_component=__webpack_require__(94819),collection_page_routing_paths=__webpack_require__(35408);function CollectionMetadataComponent_div_0_Conditional_5_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"button",8),core.bIt("click",function(){core.eBV(_r1);const ctx_r1=core.XpG(2);return core.Njj(ctx_r1.addItemTemplate())}),core.nrm(1,"i",9),core.j41(2,"span",10),core.EFF(3),core.nI1(4,"translate"),core.k0s()()}2&rf&&(core.R7$(3),core.SpI("\xa0",core.bMT(4,1,"collection.edit.template.add-button"),""))}function CollectionMetadataComponent_div_0_Conditional_6_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"button",11),core.bIt("click",function(){core.eBV(_r3);const ctx_r1=core.XpG(2);return core.Njj(ctx_r1.deleteItemTemplate())}),core.nrm(1,"i",12),core.j41(2,"span",10),core.EFF(3),core.nI1(4,"translate"),core.k0s()()}2&rf&&(core.R7$(3),core.SpI("\xa0",core.bMT(4,1,"collection.edit.template.delete-button"),""))}function CollectionMetadataComponent_div_0_Conditional_7_Template(rf,ctx){if(1&rf&&(core.j41(0,"button",7),core.nI1(1,"async"),core.nrm(2,"i",13),core.j41(3,"span",10),core.EFF(4),core.nI1(5,"translate"),core.k0s()()),2&rf){let tmp_3_0;const ctx_r1=core.XpG(2);core.Y8G("routerLink","/collections/"+(null==(tmp_3_0=core.bMT(1,2,ctx_r1.dsoRD$))?null:tmp_3_0.payload.uuid)+"/itemtemplate"),core.R7$(4),core.SpI("\xa0",core.bMT(5,4,"collection.edit.template.edit-button"),"")}}function CollectionMetadataComponent_div_0_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",2)(1,"span",3),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"div",4),core.DNE(5,CollectionMetadataComponent_div_0_Conditional_5_Template,5,3,"button",5)(6,CollectionMetadataComponent_div_0_Conditional_6_Template,5,3,"button",6)(7,CollectionMetadataComponent_div_0_Conditional_7_Template,6,6,"button",7),core.k0s()()),2&rf){const itemTemplateRD_r4=ctx.ngVar;core.R7$(2),core.JRh(core.bMT(3,4,"collection.edit.template.label")),core.R7$(3),core.vxM(null!=itemTemplateRD_r4&&itemTemplateRD_r4.payload?-1:5),core.R7$(),core.vxM(null!=itemTemplateRD_r4&&itemTemplateRD_r4.payload?6:-1),core.R7$(),core.vxM(null!=itemTemplateRD_r4&&itemTemplateRD_r4.payload?7:-1)}}let CollectionMetadataComponent=(()=>{class CollectionMetadataComponent2 extends comcol_metadata_component.W{constructor(collectionDataService,itemTemplateService,router2,route,notificationsService,translate,requestService,chd){super(collectionDataService,router2,route,notificationsService,translate),this.collectionDataService=collectionDataService,this.itemTemplateService=itemTemplateService,this.router=router2,this.route=route,this.notificationsService=notificationsService,this.translate=translate,this.requestService=requestService,this.chd=chd,this.frontendURL="/collections/",this.type=collection_model.p.type}ngOnInit(){this.router.events.subscribe(event=>{(event instanceof router.wF||event instanceof router.OY&&event.routerEvent instanceof router.wF)&&(super.ngOnInit(),this.initTemplateItem(),this.chd.detectChanges())})}initTemplateItem(){this.itemTemplateRD$=this.dsoRD$.pipe((0,shared_operators.ak)(),(0,operators.nx)(collection=>this.itemTemplateService.findByCollectionID(collection.uuid)))}addItemTemplate(){const collection$=this.dsoRD$.pipe((0,shared_operators.ak)()),template$=collection$.pipe((0,operators.nx)(collection=>this.itemTemplateService.createByCollectionID(new item_model.q,collection.uuid).pipe((0,shared_operators.ak)()))),templateHref$=collection$.pipe((0,operators.nx)(collection=>this.itemTemplateService.getCollectionEndpoint(collection.id)));(0,cjs.combineLatest)(collection$,template$,templateHref$).subscribe(([collection,template,templateHref])=>{this.requestService.setStaleByHrefSubstring(templateHref),this.router.navigate([(0,collection_page_routing_paths.dv)(collection.uuid)])})}deleteItemTemplate(){this.dsoRD$.pipe((0,shared_operators.ak)(),(0,operators.nx)(collection=>this.itemTemplateService.findByCollectionID(collection.uuid)),(0,shared_operators.ak)(),(0,operators.nx)(template=>this.itemTemplateService.delete(template.uuid)),(0,shared_operators.qD)(),(0,operators.Tj)(response=>(0,empty_util.a4)(response)&&response.hasSucceeded)).subscribe(success=>{success?this.notificationsService.success(null,this.translate.get("collection.edit.template.notifications.delete.success")):this.notificationsService.error(null,this.translate.get("collection.edit.template.notifications.delete.error")),this.initTemplateItem()})}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||CollectionMetadataComponent2)(core.rXU(collection_data_service.CollectionDataService),core.rXU(item_template_data_service.d),core.rXU(router.Ix),core.rXU(router.nX),core.rXU(notifications_service.I),core.rXU(ngx_translate_core.c$),core.rXU(request_service.B),core.rXU(core.gRc))}}static{this.\u0275cmp=core.VBU({type:CollectionMetadataComponent2,selectors:[["ds-collection-metadata"]],standalone:!0,features:[core.Vt3,core.aNF],decls:4,vars:7,consts:[["class","container-fluid mb-2",4,"ngVar"],[3,"submitForm","back","finish","dso","isCreation"],[1,"container-fluid","mb-2"],[1,"d-inline-block","mb-2"],[1,"button-row","space-children-mr"],[1,"btn","btn-success"],[1,"btn","btn-danger"],[1,"btn","btn-primary",3,"routerLink"],[1,"btn","btn-success",3,"click"],["aria-hidden","true",1,"fas","fa-plus"],[1,"d-none","d-sm-inline"],[1,"btn","btn-danger",3,"click"],["aria-hidden","true",1,"fas","fa-trash-alt"],["aria-hidden","true",1,"fas","fa-edit"]],template:function(rf,ctx){if(1&rf&&(core.DNE(0,CollectionMetadataComponent_div_0_Template,8,6,"div",0),core.nI1(1,"async"),core.j41(2,"ds-collection-form",1),core.nI1(3,"async"),core.bIt("submitForm",function($event){return ctx.onSubmit($event)})("back",function(){return ctx.navigateToHomePage()})("finish",function(){return ctx.navigateToHomePage()}),core.k0s()),2&rf){let tmp_1_0;core.Y8G("ngVar",core.bMT(1,3,ctx.itemTemplateRD$)),core.R7$(2),core.Y8G("dso",null==(tmp_1_0=core.bMT(3,5,ctx.dsoRD$))?null:tmp_1_0.payload)("isCreation",!1)}},dependencies:[common.Jj,collection_form_component.q,router.Wk,ngx_translate_core.h,ngx_translate_core.D9,var_directive.r],encapsulation:2})}}return CollectionMetadataComponent2})();var comcol_role_component=__webpack_require__(64534);function CollectionRolesComponent_For_2_Template(rf,ctx){if(1&rf&&(core.nrm(0,"ds-comcol-role",1),core.nI1(1,"async")),2&rf){const comcolRole_r1=ctx.$implicit,ctx_r1=core.XpG();core.Y8G("dso",core.bMT(1,2,ctx_r1.collection$))("comcolRole",comcolRole_r1)}}let CollectionRolesComponent=(()=>{class CollectionRolesComponent2{constructor(route){this.route=route}ngOnInit(){this.dsoRD$=this.route.parent.data.pipe((0,operators.$1)(),(0,operators.Tj)(data=>data.dso)),this.collection$=this.dsoRD$.pipe((0,shared_operators.yd)(),(0,shared_operators.Bo)()),this.comcolRoles$=this.collection$.pipe((0,operators.Tj)(collection=>{let workflowGroups=(0,empty_util.a4)(collection._links.workflowGroups)?collection._links.workflowGroups:[];return Array.isArray(workflowGroups)||(workflowGroups=[workflowGroups]),[{name:"collection-admin",href:collection._links.adminGroup.href},{name:"submitters",href:collection._links.submittersGroup.href},{name:"item_read",href:collection._links.itemReadGroup.href},{name:"bitstream_read",href:collection._links.bitstreamReadGroup.href},...workflowGroups]}))}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||CollectionRolesComponent2)(core.rXU(router.nX))}}static{this.\u0275cmp=core.VBU({type:CollectionRolesComponent2,selectors:[["ds-collection-roles"]],standalone:!0,features:[core.aNF],decls:4,vars:2,consts:[[1,"custom-alignment"],[3,"dso","comcolRole"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0),core.Z7z(1,CollectionRolesComponent_For_2_Template,2,4,"ds-comcol-role",1,core.fX1),core.nI1(3,"async"),core.k0s()),2&rf&&(core.R7$(),core.Dyx(core.bMT(3,0,ctx.comcolRoles$)))},dependencies:[common.Jj,comcol_role_component.J],encapsulation:2})}}return CollectionRolesComponent2})();var fesm2020_core=__webpack_require__(19519),cloneDeep=__webpack_require__(98905),cloneDeep_default=__webpack_require__.n(cloneDeep),environment=__webpack_require__(64369),object_updates_service=__webpack_require__(55434),content_source_model=__webpack_require__(59389),form_component=__webpack_require__(27790),abstract_trackable_component=__webpack_require__(77998),bitstream_data_service=__webpack_require__(94999),process_data_service=__webpack_require__(22019),script_data_service=__webpack_require__(83183),content_source_set_serializer=__webpack_require__(69e3),process_status_model=__webpack_require__(82866),http=__webpack_require__(98465);function CollectionSourceControlsComponent_div_0_Conditional_1_Conditional_31_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"button",5),core.bIt("click",function(){core.eBV(_r1);const contentSource_r2=core.XpG(2).ngVar,ctx_r2=core.XpG();return core.Njj(ctx_r2.testConfiguration(contentSource_r2))}),core.j41(1,"span"),core.EFF(2),core.nI1(3,"translate"),core.k0s()()}if(2&rf){const ctx_r2=core.XpG(3);core.Y8G("dsBtnDisabled",!ctx_r2.isEnabled),core.R7$(2),core.JRh(core.bMT(3,2,"collection.source.controls.test.submit"))}}function CollectionSourceControlsComponent_div_0_Conditional_1_Conditional_33_Template(rf,ctx){1&rf&&(core.j41(0,"button",3),core.nrm(1,"span",6),core.j41(2,"span"),core.EFF(3),core.nI1(4,"translate"),core.k0s()()),2&rf&&(core.Y8G("dsBtnDisabled",!0),core.R7$(3),core.JRh(core.bMT(4,2,"collection.source.controls.test.running")))}function CollectionSourceControlsComponent_div_0_Conditional_1_Conditional_35_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"button",7),core.bIt("click",function(){core.eBV(_r4);const ctx_r2=core.XpG(3);return core.Njj(ctx_r2.importNow())}),core.j41(1,"span",8),core.EFF(2),core.nI1(3,"translate"),core.k0s()()}if(2&rf){const ctx_r2=core.XpG(3);core.Y8G("dsBtnDisabled",!ctx_r2.isEnabled),core.R7$(2),core.JRh(core.bMT(3,2,"collection.source.controls.import.submit"))}}function CollectionSourceControlsComponent_div_0_Conditional_1_Conditional_37_Template(rf,ctx){1&rf&&(core.j41(0,"button",4),core.nrm(1,"span",6),core.j41(2,"span",8),core.EFF(3),core.nI1(4,"translate"),core.k0s()()),2&rf&&(core.Y8G("dsBtnDisabled",!0),core.R7$(3),core.JRh(core.bMT(4,2,"collection.source.controls.import.running")))}function CollectionSourceControlsComponent_div_0_Conditional_1_Conditional_39_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"button",7),core.bIt("click",function(){core.eBV(_r5);const ctx_r2=core.XpG(3);return core.Njj(ctx_r2.resetAndReimport())}),core.j41(1,"span",8),core.EFF(2),core.nI1(3,"translate"),core.k0s()()}if(2&rf){const ctx_r2=core.XpG(3);core.Y8G("dsBtnDisabled",!ctx_r2.isEnabled),core.R7$(2),core.SpI("\xa0",core.bMT(3,2,"collection.source.controls.reset.submit"),"")}}function CollectionSourceControlsComponent_div_0_Conditional_1_Conditional_41_Template(rf,ctx){1&rf&&(core.j41(0,"button",4),core.nrm(1,"span",6),core.j41(2,"span",8),core.EFF(3),core.nI1(4,"translate"),core.k0s()()),2&rf&&(core.Y8G("dsBtnDisabled",!0),core.R7$(3),core.SpI("\xa0",core.bMT(4,2,"collection.source.controls.reset.running"),""))}function CollectionSourceControlsComponent_div_0_Conditional_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",1)(1,"h3"),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"div")(5,"span",2),core.EFF(6),core.nI1(7,"translate"),core.k0s(),core.j41(8,"span"),core.EFF(9),core.k0s()(),core.j41(10,"div")(11,"span",2),core.EFF(12),core.nI1(13,"translate"),core.k0s(),core.j41(14,"span"),core.EFF(15),core.nI1(16,"translate"),core.k0s()(),core.j41(17,"div")(18,"span",2),core.EFF(19),core.nI1(20,"translate"),core.k0s(),core.j41(21,"span"),core.EFF(22),core.nI1(23,"translate"),core.k0s()(),core.j41(24,"div")(25,"span",2),core.EFF(26),core.nI1(27,"translate"),core.k0s(),core.j41(28,"span"),core.EFF(29),core.nI1(30,"translate"),core.k0s()(),core.DNE(31,CollectionSourceControlsComponent_div_0_Conditional_1_Conditional_31_Template,4,4,"button",3),core.nI1(32,"async"),core.DNE(33,CollectionSourceControlsComponent_div_0_Conditional_1_Conditional_33_Template,5,4,"button",3),core.nI1(34,"async"),core.DNE(35,CollectionSourceControlsComponent_div_0_Conditional_1_Conditional_35_Template,4,4,"button",4),core.nI1(36,"async"),core.DNE(37,CollectionSourceControlsComponent_div_0_Conditional_1_Conditional_37_Template,5,4,"button",4),core.nI1(38,"async"),core.DNE(39,CollectionSourceControlsComponent_div_0_Conditional_1_Conditional_39_Template,4,4,"button",4),core.nI1(40,"async"),core.DNE(41,CollectionSourceControlsComponent_div_0_Conditional_1_Conditional_41_Template,5,4,"button",4),core.nI1(42,"async"),core.k0s()),2&rf){const contentSource_r2=core.XpG().ngVar,ctx_r2=core.XpG();core.R7$(2),core.JRh(core.bMT(3,15,"collection.source.controls.head")),core.R7$(4),core.JRh(core.bMT(7,17,"collection.source.controls.harvest.status")),core.R7$(3),core.JRh(null==contentSource_r2?null:contentSource_r2.harvestStatus),core.R7$(3),core.JRh(core.bMT(13,19,"collection.source.controls.harvest.start")),core.R7$(3),core.JRh(null!=contentSource_r2&&contentSource_r2.harvestStartTime?null==contentSource_r2?null:contentSource_r2.harvestStartTime:core.bMT(16,21,"collection.source.controls.harvest.no-information")),core.R7$(4),core.JRh(core.bMT(20,23,"collection.source.controls.harvest.last")),core.R7$(3),core.JRh(null!=contentSource_r2&&contentSource_r2.lastHarvested?null==contentSource_r2?null:contentSource_r2.lastHarvested:core.bMT(23,25,"collection.source.controls.harvest.no-information")),core.R7$(4),core.JRh(core.bMT(27,27,"collection.source.controls.harvest.message")),core.R7$(3),core.JRh(null!=contentSource_r2&&contentSource_r2.message?null==contentSource_r2?null:contentSource_r2.message:core.bMT(30,29,"collection.source.controls.harvest.no-information")),core.R7$(2),core.vxM(!0!==core.bMT(32,31,ctx_r2.testConfigRunning$)?31:-1),core.R7$(2),core.vxM(core.bMT(34,33,ctx_r2.testConfigRunning$)?33:-1),core.R7$(2),core.vxM(!0!==core.bMT(36,35,ctx_r2.importRunning$)?35:-1),core.R7$(2),core.vxM(core.bMT(38,37,ctx_r2.importRunning$)?37:-1),core.R7$(2),core.vxM(!0!==core.bMT(40,39,ctx_r2.reImportRunning$)?39:-1),core.R7$(2),core.vxM(core.bMT(42,41,ctx_r2.reImportRunning$)?41:-1)}}function CollectionSourceControlsComponent_div_0_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.DNE(1,CollectionSourceControlsComponent_div_0_Conditional_1_Template,43,43,"div",1),core.k0s()),2&rf){const ctx_r2=core.XpG();core.R7$(),core.vxM(ctx_r2.shouldShow?1:-1)}}let CollectionSourceControlsComponent=(()=>{class CollectionSourceControlsComponent2{constructor(scriptDataService,processDataService,requestService,notificationsService,collectionService,translateService,httpClient,bitstreamService){this.scriptDataService=scriptDataService,this.processDataService=processDataService,this.requestService=requestService,this.notificationsService=notificationsService,this.collectionService=collectionService,this.translateService=translateService,this.httpClient=httpClient,this.bitstreamService=bitstreamService,this.subs=[],this.autoRefreshIDs=[],this.testConfigRunning$=new cjs.BehaviorSubject(!1),this.importRunning$=new cjs.BehaviorSubject(!1),this.reImportRunning$=new cjs.BehaviorSubject(!1)}ngOnInit(){this.contentSource$=this.collectionService.findByHref(this.collection._links.self.href,!1).pipe((0,shared_operators.Hz)(),(0,operators.nx)(collection=>this.collectionService.getContentSource(collection.uuid,!1)),(0,shared_operators.Hz)())}testConfiguration(contentSource){this.testConfigRunning$.next(!0),this.subs.push(this.scriptDataService.invoke("harvest",[{name:"-g",value:null},{name:"-a",value:contentSource.oaiSource},{name:"-i",value:(new content_source_set_serializer.f).Serialize(contentSource.oaiSetId)}],[]).pipe((0,shared_operators.qD)(),(0,operators.Mi)(rd=>{rd.hasFailed&&(this.notificationsService.error(this.translateService.get("collection.source.controls.test.submit.error")),this.testConfigRunning$.next(!1))}),(0,operators.pb)(rd=>rd.hasSucceeded&&(0,empty_util.a4)(rd.payload)),(0,operators.nx)(rd=>(this.autoRefreshIDs.push(rd.payload.processId),this.processDataService.autoRefreshUntilCompletion(rd.payload.processId))),(0,operators.Tj)(rd=>rd.payload)).subscribe(process=>{process.processStatus.toString()===process_status_model.K[process_status_model.K.FAILED].toString()&&(this.notificationsService.error(this.translateService.get("collection.source.controls.test.failed")),this.testConfigRunning$.next(!1)),process.processStatus.toString()===process_status_model.K[process_status_model.K.COMPLETED].toString()&&(this.bitstreamService.findByHref(process._links.output.href).pipe((0,shared_operators.ak)()).subscribe(bitstream=>{this.httpClient.get(bitstream._links.content.href,{responseType:"text"}).subscribe(data=>{const output=data.replaceAll(new RegExp(".*\\@(.*)","g"),"$1").replaceAll("The script has started","").replaceAll("The script has completed","");this.notificationsService.info(this.translateService.get("collection.source.controls.test.completed"),output)})}),this.testConfigRunning$.next(!1))}))}importNow(){this.importRunning$.next(!0),this.subs.push(this.scriptDataService.invoke("harvest",[{name:"-r",value:null},{name:"-c",value:this.collection.uuid}],[]).pipe((0,shared_operators.qD)(),(0,operators.Mi)(rd=>{rd.hasFailed?(this.notificationsService.error(this.translateService.get("collection.source.controls.import.submit.error")),this.importRunning$.next(!1)):this.notificationsService.success(this.translateService.get("collection.source.controls.import.submit.success"))}),(0,operators.pb)(rd=>rd.hasSucceeded&&(0,empty_util.a4)(rd.payload)),(0,operators.nx)(rd=>(this.autoRefreshIDs.push(rd.payload.processId),this.processDataService.autoRefreshUntilCompletion(rd.payload.processId))),(0,operators.Tj)(rd=>rd.payload)).subscribe(process=>{process.processStatus.toString()===process_status_model.K[process_status_model.K.FAILED].toString()&&(this.notificationsService.error(this.translateService.get("collection.source.controls.import.failed")),this.importRunning$.next(!1)),process.processStatus.toString()===process_status_model.K[process_status_model.K.COMPLETED].toString()&&(this.notificationsService.success(this.translateService.get("collection.source.controls.import.completed")),this.requestService.setStaleByHrefSubstring(this.collection._links.self.href),this.importRunning$.next(!1))}))}resetAndReimport(){this.reImportRunning$.next(!0),this.subs.push(this.scriptDataService.invoke("harvest",[{name:"-o",value:null},{name:"-c",value:this.collection.uuid}],[]).pipe((0,shared_operators.qD)(),(0,operators.Mi)(rd=>{rd.hasFailed?(this.notificationsService.error(this.translateService.get("collection.source.controls.reset.submit.error")),this.reImportRunning$.next(!1)):this.notificationsService.success(this.translateService.get("collection.source.controls.reset.submit.success"))}),(0,operators.pb)(rd=>rd.hasSucceeded&&(0,empty_util.a4)(rd.payload)),(0,operators.nx)(rd=>(this.autoRefreshIDs.push(rd.payload.processId),this.processDataService.autoRefreshUntilCompletion(rd.payload.processId))),(0,operators.Tj)(rd=>rd.payload)).subscribe(process=>{process.processStatus.toString()===process_status_model.K[process_status_model.K.FAILED].toString()&&(this.notificationsService.error(this.translateService.get("collection.source.controls.reset.failed")),this.reImportRunning$.next(!1)),process.processStatus.toString()===process_status_model.K[process_status_model.K.COMPLETED].toString()&&(this.notificationsService.success(this.translateService.get("collection.source.controls.reset.completed")),this.requestService.setStaleByHrefSubstring(this.collection._links.self.href),this.reImportRunning$.next(!1))}))}ngOnDestroy(){this.subs.forEach(sub=>{(0,empty_util.a4)(sub)&&sub.unsubscribe()}),this.autoRefreshIDs.forEach(id=>{this.processDataService.stopAutoRefreshing(id)})}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||CollectionSourceControlsComponent2)(core.rXU(script_data_service.ScriptDataService),core.rXU(process_data_service.ProcessDataService),core.rXU(request_service.B),core.rXU(notifications_service.I),core.rXU(collection_data_service.CollectionDataService),core.rXU(ngx_translate_core.c$),core.rXU(http.Qq),core.rXU(bitstream_data_service.BitstreamDataService))}}static{this.\u0275cmp=core.VBU({type:CollectionSourceControlsComponent2,selectors:[["ds-collection-source-controls"]],inputs:{isEnabled:"isEnabled",collection:"collection",shouldShow:"shouldShow"},standalone:!0,features:[core.aNF],decls:2,vars:3,consts:[[4,"ngVar"],[1,"container-fluid","space-children-mr"],[1,"fw-bold"],[1,"btn","btn-secondary",3,"dsBtnDisabled"],[1,"btn","btn-primary",3,"dsBtnDisabled"],[1,"btn","btn-secondary",3,"click","dsBtnDisabled"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","spinner-button"],[1,"btn","btn-primary",3,"click","dsBtnDisabled"],[1,"d-none","d-sm-inline"]],template:function(rf,ctx){1&rf&&(core.DNE(0,CollectionSourceControlsComponent_div_0_Template,2,1,"div",0),core.nI1(1,"async")),2&rf&&core.Y8G("ngVar",core.bMT(1,1,ctx.contentSource$))},dependencies:[common.Jj,btn_disabled_directive.A,ngx_translate_core.h,ngx_translate_core.D9,var_directive.r],styles:[".spinner-button[_ngcontent-%COMP%]{margin-bottom:calc((var(--bs-line-height-base) * 1rem - var(--bs-font-size-base)) / 2)}"]})}}return CollectionSourceControlsComponent2})();function CollectionSourceComponent_Conditional_2_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"button",13),core.nI1(1,"async"),core.bIt("click",function(){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.discard())}),core.nrm(2,"i",14),core.j41(3,"span",6),core.EFF(4),core.nI1(5,"translate"),core.k0s()()}if(2&rf){const ctx_r1=core.XpG();core.Y8G("dsBtnDisabled",!0!==core.bMT(1,2,ctx_r1.hasChanges$)),core.R7$(4),core.SpI("\xa0",core.bMT(5,4,"item.edit.metadata.discard-button"),"")}}function CollectionSourceComponent_Conditional_4_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"button",15),core.bIt("click",function(){core.eBV(_r3);const ctx_r1=core.XpG();return core.Njj(ctx_r1.reinstate())}),core.nrm(1,"i",16),core.j41(2,"span",6),core.EFF(3),core.nI1(4,"translate"),core.k0s()()}2&rf&&(core.R7$(3),core.SpI("\xa0",core.bMT(4,1,"item.edit.metadata.reinstate-button"),""))}function CollectionSourceComponent_Conditional_15_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"div",7)(1,"input",17),core.bIt("change",function(){core.eBV(_r4);const ctx_r1=core.XpG();return core.Njj(ctx_r1.changeExternalSource())}),core.k0s(),core.j41(2,"label",18),core.EFF(3),core.nI1(4,"translate"),core.k0s()()}if(2&rf){const ctx_r1=core.XpG();core.R7$(),core.Y8G("checked",(null==ctx_r1.contentSource?null:ctx_r1.contentSource.harvestType)!==ctx_r1.harvestTypeNone),core.R7$(2),core.JRh(core.bMT(4,2,"collection.edit.tabs.source.external"))}}function CollectionSourceComponent_Conditional_16_Template(rf,ctx){1&rf&&(core.nrm(0,"ds-loading",8),core.nI1(1,"translate")),2&rf&&core.Y8G("message",core.bMT(1,1,"loading.content-source"))}function CollectionSourceComponent_Conditional_17_Template(rf,ctx){1&rf&&(core.j41(0,"h3"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"collection.edit.tabs.source.form.head")))}function CollectionSourceComponent_Conditional_19_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"ds-form",19),core.bIt("dfChange",function($event){core.eBV(_r5);const ctx_r1=core.XpG();return core.Njj(ctx_r1.onChange($event))})("submitForm",function(){core.eBV(_r5);const ctx_r1=core.XpG();return core.Njj(ctx_r1.onSubmit())})("cancel",function(){core.eBV(_r5);const ctx_r1=core.XpG();return core.Njj(ctx_r1.onCancel())}),core.k0s()}if(2&rf){const ctx_r1=core.XpG();core.Y8G("formId","collection-source-form-id")("formGroup",ctx_r1.formGroup)("formModel",ctx_r1.formModel)("formLayout",ctx_r1.formLayout)("displaySubmit",!1)("displayCancel",!1)}}function CollectionSourceComponent_Conditional_20_Conditional_4_Template(rf,ctx){if(1&rf){const _r7=core.RV6();core.j41(0,"button",13),core.nI1(1,"async"),core.bIt("click",function(){core.eBV(_r7);const ctx_r1=core.XpG(2);return core.Njj(ctx_r1.discard())}),core.nrm(2,"i",14),core.j41(3,"span",6),core.EFF(4),core.nI1(5,"translate"),core.k0s()()}if(2&rf){const ctx_r1=core.XpG(2);core.Y8G("dsBtnDisabled",!0!==core.bMT(1,2,ctx_r1.hasChanges$)),core.R7$(4),core.SpI("\xa0",core.bMT(5,4,"item.edit.metadata.discard-button"),"")}}function CollectionSourceComponent_Conditional_20_Conditional_6_Template(rf,ctx){if(1&rf){const _r8=core.RV6();core.j41(0,"button",15),core.bIt("click",function(){core.eBV(_r8);const ctx_r1=core.XpG(2);return core.Njj(ctx_r1.reinstate())}),core.nrm(1,"i",16),core.j41(2,"span",6),core.EFF(3),core.nI1(4,"translate"),core.k0s()()}2&rf&&(core.R7$(3),core.SpI("\xa0",core.bMT(4,1,"item.edit.metadata.reinstate-button"),""))}function CollectionSourceComponent_Conditional_20_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"div",11)(1,"div",9)(2,"div",20)(3,"div",21),core.DNE(4,CollectionSourceComponent_Conditional_20_Conditional_4_Template,6,6,"button",2),core.nI1(5,"async"),core.DNE(6,CollectionSourceComponent_Conditional_20_Conditional_6_Template,5,3,"button",3),core.nI1(7,"async"),core.j41(8,"button",4),core.nI1(9,"async"),core.bIt("click",function(){core.eBV(_r6);const ctx_r1=core.XpG();return core.Njj(ctx_r1.onSubmit())}),core.nrm(10,"i",5),core.j41(11,"span",6),core.EFF(12),core.nI1(13,"translate"),core.k0s()()()()()()}if(2&rf){const ctx_r1=core.XpG();core.R7$(4),core.vxM(!0!==core.bMT(5,4,ctx_r1.isReinstatable$)?4:-1),core.R7$(2),core.vxM(core.bMT(7,6,ctx_r1.isReinstatable$)?6:-1),core.R7$(2),core.Y8G("dsBtnDisabled",!0!==core.bMT(9,8,ctx_r1.hasChanges$)||!ctx_r1.isValid()||ctx_r1.initialHarvestType===ctx_r1.harvestTypeNone&&ctx_r1.contentSource.harvestType===ctx_r1.initialHarvestType),core.R7$(4),core.SpI("\xa0",core.bMT(13,10,"item.edit.metadata.save-button"),"")}}let CollectionSourceComponent=(()=>{class CollectionSourceComponent2 extends abstract_trackable_component.F{constructor(objectUpdatesService,notificationsService,translateService,router2,location,formService,route,collectionService,requestService){super(objectUpdatesService,notificationsService,translateService,router2),this.objectUpdatesService=objectUpdatesService,this.notificationsService=notificationsService,this.translateService=translateService,this.router=router2,this.location=location,this.formService=formService,this.route=route,this.collectionService=collectionService,this.requestService=requestService,this.LABEL_KEY_PREFIX="collection.edit.tabs.source.form.",this.ERROR_KEY_PREFIX="collection.edit.tabs.source.form.errors.",this.OPTIONS_KEY_PREFIX="collection.edit.tabs.source.form.options.",this.oaiSourceModel=new fesm2020_core.rA_({id:"oaiSource",name:"oaiSource",required:!0,validators:{required:null},errorMessages:{required:"You must provide a set id of the target collection."}}),this.oaiSetIdModel=new fesm2020_core.rA_({id:"oaiSetId",name:"oaiSetId"}),this.metadataConfigIdModel=new fesm2020_core.z4z({id:"metadataConfigId",name:"metadataConfigId"}),this.harvestTypeModel=new fesm2020_core.tK_({id:"harvestType",name:"harvestType",options:[{value:content_source_model.s.Metadata},{value:content_source_model.s.MetadataAndRef},{value:content_source_model.s.MetadataAndBitstreams}]}),this.inputModels=[this.oaiSourceModel,this.oaiSetIdModel,this.metadataConfigIdModel,this.harvestTypeModel],this.formModel=[new fesm2020_core.iO5({id:"oaiSourceContainer",group:[this.oaiSourceModel]}),new fesm2020_core.iO5({id:"oaiSetContainer",group:[this.oaiSetIdModel,this.metadataConfigIdModel]}),new fesm2020_core.iO5({id:"harvestTypeContainer",group:[this.harvestTypeModel]})],this.formLayout={oaiSource:{grid:{host:"col-12 d-inline-block"}},oaiSetId:{grid:{host:"col col-sm-6 d-inline-block"}},metadataConfigId:{grid:{host:"col col-sm-6 d-inline-block"}},harvestType:{grid:{host:"col-12",option:"btn-outline-secondary"}},oaiSetContainer:{grid:{host:"row"}},oaiSourceContainer:{grid:{host:"row"}},harvestTypeContainer:{grid:{host:"row"}}},this.harvestTypeNone=content_source_model.s.None,this.previouslySelectedHarvestType=content_source_model.s.Metadata,this.displayedNotifications=[],this.subs=[]}ngOnInit(){super.ngOnInit(),this.notificationsPrefix="collection.edit.tabs.source.notifications.",this.discardTimeOut=environment.c.collection.edit.undoTimeout,this.formGroup=this.formService.createFormGroup(this.formModel),this.collectionRD$=this.route.parent.data.pipe((0,operators.$1)(),(0,operators.Tj)(data=>data.dso)),this.collectionRD$.pipe((0,shared_operators.yd)(),(0,operators.Tj)(col=>col.payload.uuid),(0,operators.nx)(uuid=>this.collectionService.getContentSource(uuid)),(0,shared_operators.qD)()).subscribe(rd=>{this.initializeOriginalContentSource(rd.payload)}),this.updateFieldTranslations(),this.subs.push(this.translateService.onLangChange.subscribe(()=>{this.updateFieldTranslations()}))}initializeOriginalContentSource(contentSource){this.contentSource=contentSource,this.initialHarvestType=contentSource.harvestType,this.initializeMetadataConfigs();const initialContentSource=cloneDeep_default()(this.contentSource);this.objectUpdatesService.initialize(this.url,[initialContentSource],new Date),this.update$=this.objectUpdatesService.getFieldUpdates(this.url,[initialContentSource]).pipe((0,operators.Tj)(updates=>updates[initialContentSource.uuid])),this.subs.push(this.update$.subscribe(update=>{if(update){const field=update.field;let configId;(0,empty_util.a4)(this.contentSource)&&(0,empty_util.hj)(this.contentSource.metadataConfigs)&&(configId=this.contentSource.metadataConfigs[0].id),(0,empty_util.a4)(field)&&(0,empty_util.a4)(field.metadataConfigId)&&(configId=field.metadataConfigId),(0,empty_util.a4)(field)&&(this.formGroup.patchValue({oaiSourceContainer:{oaiSource:field.oaiSource},oaiSetContainer:{oaiSetId:field.oaiSetId,metadataConfigId:configId},harvestTypeContainer:{harvestType:field.harvestType}}),this.contentSource=cloneDeep_default()(field)),this.contentSource.metadataConfigId=configId}}))}initializeMetadataConfigs(){this.metadataConfigIdModel.options=this.contentSource.metadataConfigs.map(metadataConfig=>Object.assign({value:metadataConfig.id,label:metadataConfig.label})),this.metadataConfigIdModel.options.length>0&&this.formGroup.patchValue({oaiSetContainer:{metadataConfigId:this.metadataConfigIdModel.options[0].value}})}updateFieldTranslations(){this.inputModels.forEach(fieldModel=>{this.updateFieldTranslation(fieldModel)})}updateFieldTranslation(fieldModel){fieldModel.label=this.translateService.instant(this.LABEL_KEY_PREFIX+fieldModel.id),(0,empty_util.hj)(fieldModel.validators)&&(fieldModel.errorMessages={},Object.keys(fieldModel.validators).forEach(key=>{fieldModel.errorMessages[key]=this.translateService.instant(this.ERROR_KEY_PREFIX+fieldModel.id+"."+key)})),fieldModel instanceof fesm2020_core.X7I&&(0,empty_util.hj)(fieldModel.options)&&fieldModel.options.forEach(option=>{(0,empty_util.Tn)(option.label)&&(option.label=this.translateService.instant(this.OPTIONS_KEY_PREFIX+fieldModel.id+"."+option.value))})}onChange(event){this.updateContentSourceField(event.model,!0),this.saveFieldUpdate()}onSubmit(){this.collectionRD$.pipe((0,shared_operators.yd)(),(0,operators.Tj)(col=>col.payload.uuid),(0,operators.nx)(uuid=>this.collectionService.getHarvesterEndpoint(uuid)),(0,operators.s)(1)).subscribe(endpoint=>this.requestService.removeByHrefSubstring(endpoint)),this.requestService.setStaleByHrefSubstring(this.contentSource._links.self.href),this.collectionRD$.pipe((0,shared_operators.yd)(),(0,operators.Tj)(col=>col.payload.uuid),(0,operators.nx)(uuid=>this.collectionService.updateContentSource(uuid,this.contentSource)),(0,operators.s)(1)).subscribe(result=>{(0,empty_util.a4)(result.harvestType)?(this.clearNotifications(),this.initializeOriginalContentSource(result),this.displayedNotifications.push(this.notificationsService.success(this.getNotificationTitle("saved"),this.getNotificationContent("saved")))):this.displayedNotifications.push(result)})}onCancel(){this.location.back()}isValid(){return this.contentSource.harvestType===content_source_model.s.None||this.formGroup.valid}changeExternalSource(){this.contentSource.harvestType===content_source_model.s.None?this.contentSource.harvestType=this.previouslySelectedHarvestType:(this.previouslySelectedHarvestType=this.contentSource.harvestType,this.contentSource.harvestType=content_source_model.s.None),this.updateContentSource(!1)}updateContentSource(updateHarvestType){this.inputModels.forEach(fieldModel=>{this.updateContentSourceField(fieldModel,updateHarvestType)}),this.saveFieldUpdate()}updateContentSourceField(fieldModel,updateHarvestType){(0,empty_util.a4)(fieldModel.value)&&(fieldModel.id!==this.harvestTypeModel.id||updateHarvestType)&&(this.contentSource[fieldModel.id]=fieldModel.value)}saveFieldUpdate(){this.objectUpdatesService.saveAddFieldUpdate(this.url,cloneDeep_default()(this.contentSource))}clearNotifications(){this.displayedNotifications.forEach(notification=>{this.notificationsService.remove(notification)}),this.displayedNotifications=[]}ngOnDestroy(){this.subs.forEach(sub=>sub.unsubscribe())}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||CollectionSourceComponent2)(core.rXU(object_updates_service.F),core.rXU(notifications_service.I),core.rXU(ngx_translate_core.c$),core.rXU(router.Ix),core.rXU(common.aZ),core.rXU(fesm2020_core.J9r),core.rXU(router.nX),core.rXU(collection_data_service.CollectionDataService),core.rXU(request_service.B))}}static{this.\u0275cmp=core.VBU({type:CollectionSourceComponent2,selectors:[["ds-collection-source"]],standalone:!0,features:[core.Vt3,core.aNF],decls:24,vars:27,consts:[[1,"container-fluid"],[1,"d-inline-block","float-end","space-children-mr"],[1,"btn","btn-danger",3,"dsBtnDisabled"],[1,"btn","btn-warning"],[1,"btn","btn-primary",3,"click","dsBtnDisabled"],[1,"fas","fa-save"],[1,"d-none","d-sm-inline"],[1,"form-check","mb-4"],[3,"message"],[1,"row"],[3,"formId","formGroup","formModel","formLayout","displaySubmit","displayCancel"],[1,"container","mt-2"],[3,"isEnabled","shouldShow","collection"],[1,"btn","btn-danger",3,"click","dsBtnDisabled"],[1,"fas","fa-times"],[1,"btn","btn-warning",3,"click"],[1,"fas","fa-undo-alt"],["type","checkbox","id","externalSourceCheck",1,"form-check-input",3,"change","checked"],["for","externalSourceCheck",1,"form-check-label"],[3,"dfChange","submitForm","cancel","formId","formGroup","formModel","formLayout","displaySubmit","displayCancel"],[1,"col-12"],[1,"d-inline-block","float-end","ms-1","space-children-mr"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",0)(1,"div",1),core.DNE(2,CollectionSourceComponent_Conditional_2_Template,6,6,"button",2),core.nI1(3,"async"),core.DNE(4,CollectionSourceComponent_Conditional_4_Template,5,3,"button",3),core.nI1(5,"async"),core.j41(6,"button",4),core.nI1(7,"async"),core.bIt("click",function(){return ctx.onSubmit()}),core.nrm(8,"i",5),core.j41(9,"span",6),core.EFF(10),core.nI1(11,"translate"),core.k0s()()(),core.j41(12,"h2"),core.EFF(13),core.nI1(14,"translate"),core.k0s(),core.DNE(15,CollectionSourceComponent_Conditional_15_Template,5,4,"div",7)(16,CollectionSourceComponent_Conditional_16_Template,2,3,"ds-loading",8)(17,CollectionSourceComponent_Conditional_17_Template,3,3,"h3"),core.k0s(),core.j41(18,"div",9),core.DNE(19,CollectionSourceComponent_Conditional_19_Template,1,6,"ds-form",10),core.k0s(),core.DNE(20,CollectionSourceComponent_Conditional_20_Template,14,12,"div",11),core.nrm(21,"ds-collection-source-controls",12),core.nI1(22,"async"),core.nI1(23,"async")),2&rf){let tmp_12_0;core.R7$(2),core.vxM(!0!==core.bMT(3,13,ctx.isReinstatable$)?2:-1),core.R7$(2),core.vxM(core.bMT(5,15,ctx.isReinstatable$)?4:-1),core.R7$(2),core.Y8G("dsBtnDisabled",!0!==core.bMT(7,17,ctx.hasChanges$)||!ctx.isValid()||ctx.initialHarvestType===ctx.harvestTypeNone&&ctx.contentSource.harvestType===ctx.initialHarvestType),core.R7$(4),core.SpI("\xa0",core.bMT(11,19,"item.edit.metadata.save-button"),""),core.R7$(3),core.JRh(core.bMT(14,21,"collection.edit.tabs.source.head")),core.R7$(2),core.vxM(ctx.contentSource?15:-1),core.R7$(),core.vxM(ctx.contentSource?-1:16),core.R7$(),core.vxM(ctx.contentSource&&(null==ctx.contentSource?null:ctx.contentSource.harvestType)!==ctx.harvestTypeNone?17:-1),core.R7$(2),core.vxM(ctx.formGroup&&ctx.contentSource&&(null==ctx.contentSource?null:ctx.contentSource.harvestType)!==ctx.harvestTypeNone?19:-1),core.R7$(),core.vxM((null==ctx.contentSource?null:ctx.contentSource.harvestType)!==ctx.harvestTypeNone?20:-1),core.R7$(),core.Y8G("isEnabled",!0!==core.bMT(22,23,ctx.hasChanges$))("shouldShow",(null==ctx.contentSource?null:ctx.contentSource.harvestType)!==ctx.harvestTypeNone)("collection",null==(tmp_12_0=core.bMT(23,25,ctx.collectionRD$))?null:tmp_12_0.payload)}},dependencies:[common.Jj,btn_disabled_directive.A,CollectionSourceControlsComponent,form_component.s,themed_loading_component.v,ngx_translate_core.h,ngx_translate_core.D9],encapsulation:2})}}return CollectionSourceComponent2})();var edit_comcol_page_component=__webpack_require__(80249);const edit_collection_page_component_c0=a0=>({active:a0}),edit_collection_page_component_c1=a0=>[a0];function EditCollectionPageComponent_For_16_Template(rf,ctx){if(1&rf&&(core.j41(0,"li",9)(1,"a",14),core.EFF(2),core.nI1(3,"translate"),core.k0s()()),2&rf){const page_r1=ctx.$implicit,ctx_r1=core.XpG();core.R7$(),core.Y8G("ngClass",core.eq3(7,edit_collection_page_component_c0,page_r1===ctx_r1.currentPage))("routerLink",core.eq3(9,edit_collection_page_component_c1,"./"+page_r1)),core.BMQ("aria-selected",page_r1===ctx_r1.currentPage)("data-test",page_r1),core.R7$(),core.SpI(" ",core.bMT(3,5,ctx_r1.type+".edit.tabs."+page_r1+".head")," ")}}function EditCollectionPageComponent_Conditional_21_Template(rf,ctx){if(1&rf&&(core.j41(0,"a",13),core.nI1(1,"async"),core.nrm(2,"i",15),core.EFF(3),core.nI1(4,"translate"),core.k0s()),2&rf){let tmp_1_0;const ctx_r1=core.XpG();core.Y8G("routerLink",ctx_r1.getPageUrl(null==(tmp_1_0=core.bMT(1,2,ctx_r1.dsoRD$))?null:tmp_1_0.payload)),core.R7$(3),core.SpI(" ",core.bMT(4,4,ctx_r1.type+".edit.return")," ")}}const ROUTES=[{path:"",resolve:{breadcrumb:i18n_breadcrumb_resolver.S},data:{breadcrumbKey:"collection.edit"},component:(()=>{class EditCollectionPageComponent2 extends edit_comcol_page_component.M{constructor(router2,route){super(router2,route),this.router=router2,this.route=route,this.type="collection"}getPageUrl(collection){return(0,collection_page_routing_paths.JW)(collection.id)}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||EditCollectionPageComponent2)(core.rXU(router.Ix),core.rXU(router.nX))}}static{this.\u0275cmp=core.VBU({type:EditCollectionPageComponent2,selectors:[["ds-edit-collection"]],standalone:!0,features:[core.Vt3,core.aNF],decls:22,vars:10,consts:[[1,"container"],[1,"row"],[1,"col-12"],[1,"d-flex","justify-content-between","border-bottom"],[1,"my-auto"],["data-test","delete-button",1,"btn","btn-danger",3,"routerLink"],["aria-hidden","true",1,"fas","fa-trash"],[1,"pt-2"],["role","tablist",1,"nav","nav-tabs","justify-content-start","mb-2"],["role","presentation",1,"nav-item"],[1,"tab-pane","active"],[1,"mb-4"],[1,"col-12","text-end","custom-alignment"],[1,"btn","btn-outline-secondary",3,"routerLink"],["role","tab",1,"nav-link",3,"ngClass","routerLink"],["aria-hidden","true",1,"fas","fa-arrow-left"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1"),core.EFF(5),core.nI1(6,"translate"),core.k0s(),core.j41(7,"div",4)(8,"a",5),core.nI1(9,"async"),core.nrm(10,"i",6),core.EFF(11),core.nI1(12,"translate"),core.k0s()()(),core.j41(13,"div",7)(14,"ul",8),core.Z7z(15,EditCollectionPageComponent_For_16_Template,4,11,"li",9,core.fX1),core.k0s(),core.j41(17,"div",10)(18,"div",11),core.nrm(19,"router-outlet"),core.k0s(),core.j41(20,"div",12),core.DNE(21,EditCollectionPageComponent_Conditional_21_Template,5,6,"a",13),core.k0s()()()()()()),2&rf){let tmp_1_0;core.R7$(5),core.JRh(core.bMT(6,4,ctx.type+".edit.head")),core.R7$(3),core.Y8G("routerLink",("community"===ctx.type?"/communities/":"/collections/")+(null==(tmp_1_0=core.bMT(9,6,ctx.dsoRD$))?null:tmp_1_0.payload.uuid)+"/delete"),core.R7$(3),core.SpI(" ",core.bMT(12,8,ctx.type+".edit.delete"),""),core.R7$(4),core.Dyx(ctx.pages),core.R7$(6),core.vxM(ctx.hideReturnButton?-1:21)}},dependencies:[common.Jj,common.YU,router.Wk,router.n3,ngx_translate_core.h,ngx_translate_core.D9],styles:["[_nghost-%COMP%]     #oaiSetContainer>:first-child{padding-left:0}[_nghost-%COMP%]     #oaiSetContainer>:last-child{padding-right:0}"]})}}return EditCollectionPageComponent2})(),canActivate:[collectionAdministratorGuard],children:[{path:"",redirectTo:"metadata",pathMatch:"full"},{path:"metadata",component:CollectionMetadataComponent,data:{title:"collection.edit.tabs.metadata.title",hideReturnButton:!0,showBreadcrumbs:!0}},{path:"roles",component:CollectionRolesComponent,data:{title:"collection.edit.tabs.roles.title",showBreadcrumbs:!0}},{path:"source",component:CollectionSourceComponent,data:{title:"collection.edit.tabs.source.title",showBreadcrumbs:!0}},{path:"curate",component:CollectionCurateComponent,data:{title:"collection.edit.tabs.curate.title",showBreadcrumbs:!0}},{path:"access-control",component:CollectionAccessControlComponent,data:{title:"collection.edit.tabs.access-control.title",showBreadcrumbs:!0}},{path:"authorizations",data:{showBreadcrumbs:!0},children:[{path:"create",resolve:{resourcePolicyTarget:resource_policy_target_resolver.Q},component:resource_policy_create_component.m,data:{title:"resource-policies.create.page.title"}},{path:"edit",resolve:{resourcePolicy:resource_policy_resolver.n},component:resource_policy_edit_component._,data:{title:"resource-policies.edit.page.title"}},{path:"",component:CollectionAuthorizationsComponent,data:{title:"collection.edit.tabs.authorizations.title",showBreadcrumbs:!0}}]},{path:"mapper",component:CollectionItemMapperComponent,data:{title:"collection.edit.tabs.item-mapper.title",hideReturnButton:!0,showBreadcrumbs:!0}}]}]},30748:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{BulkAccessConfigDataService:()=>BulkAccessConfigDataService});var _cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(80996),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(63311),_data_request_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(64806),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(26139),_config_data_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(72684),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25376);let BulkAccessConfigDataService=(()=>{class BulkAccessConfigDataService2 extends _config_data_service__WEBPACK_IMPORTED_MODULE_4__.O{constructor(requestService,rdbService,objectCache,halService){super("bulkaccessconditionoptions",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||BulkAccessConfigDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_data_request_service__WEBPACK_IMPORTED_MODULE_2__.B),_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_5__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_3__.Y))}}static{this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_5__.jDH({token:BulkAccessConfigDataService2,factory:BulkAccessConfigDataService2.\u0275fac,providedIn:"root"})}}return BulkAccessConfigDataService2})()},72684:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{O:()=>ConfigDataService});var rxjs_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(60444),_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(61640),_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(39022);class ConfigDataService extends _data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_0__.W{findByHref(href,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){return super.findByHref(href,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_1__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_2__.Tj)(rd=>{if(rd.hasFailed)throw new Error("Couldn't retrieve the config");return rd}))}findByName(name,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){return super.findById(name,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}}},55434:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>ObjectUpdatesService});var _ngrx_store__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(22609),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(60444),_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(2794),_core_selectors__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4770),_field_change_type_model__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(83070),_object_updates_actions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(67922),_object_updates_reducer__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(77029),_angular_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(25376);function filterByUrlObjectUpdatesStateSelector(url){return(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_4__.Mz)(function objectUpdatesStateSelector(){return(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_4__.Mz)(_core_selectors__WEBPACK_IMPORTED_MODULE_0__.N,state=>state["cache/object-updates"])}(),state=>state[url])}let ObjectUpdatesService=(()=>{class ObjectUpdatesService2{constructor(store,injector){this.store=store,this.injector=injector}initialize(url,fields,lastModified,patchOperationService){this.store.dispatch(new _object_updates_actions__WEBPACK_IMPORTED_MODULE_2__.g$(url,fields,lastModified,patchOperationService))}saveFieldUpdate(url,field,changeType){this.store.dispatch(new _object_updates_actions__WEBPACK_IMPORTED_MODULE_2__.XO(url,field,changeType))}getObjectEntry(url){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_4__.Lt)(filterByUrlObjectUpdatesStateSelector(url)))}getFieldState(url,uuid){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_4__.Lt)(function filterByUrlAndUUIDFieldStateSelector(url,uuid){return(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_4__.Mz)(filterByUrlObjectUpdatesStateSelector(url),state=>state.fieldStates[uuid])}(url,uuid)))}getFieldUpdates(url,initialFields,ignoreStates){return this.getObjectEntry(url).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.nx)(objectEntry=>{const fieldUpdates={};return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(objectEntry)&&Object.keys(ignoreStates?objectEntry.fieldUpdates:objectEntry.fieldStates).forEach(uuid=>{fieldUpdates[uuid]=objectEntry.fieldUpdates[uuid]}),this.getFieldUpdatesExclusive(url,initialFields).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.Tj)(fieldUpdatesExclusive=>(Object.keys(fieldUpdatesExclusive).forEach(uuid=>{fieldUpdates[uuid]=fieldUpdatesExclusive[uuid]}),fieldUpdates)))}))}getFieldUpdatesExclusive(url,initialFields){return this.getObjectEntry(url).pipe((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.Az)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.Tj)(objectEntry=>{const fieldUpdates={};for(const object of initialFields){let fieldUpdate=objectEntry.fieldUpdates[object.uuid];(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.Im)(fieldUpdate)&&(fieldUpdate={field:object,changeType:void 0}),fieldUpdates[object.uuid]=fieldUpdate}return fieldUpdates}))}isEditable(url,uuid){return this.getFieldState(url,uuid).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.pb)(fieldState=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(fieldState)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.Tj)(fieldState=>fieldState.editable),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.F)())}isValid(url,uuid){return this.getFieldState(url,uuid).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.pb)(fieldState=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(fieldState)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.Tj)(fieldState=>fieldState.isValid),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.F)())}isValidPage(url){return this.getObjectEntry(url).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.Tj)(entry=>Object.values(entry.fieldStates).findIndex(state=>!state.isValid)<0),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.F)())}saveAddFieldUpdate(url,field){const update$=this.getFieldUpdatesExclusive(url,[field]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.pb)(fieldUpdates=>fieldUpdates[field.uuid].changeType===_field_change_type_model__WEBPACK_IMPORTED_MODULE_1__.B.ADD),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.s)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.Tj)(()=>!0));return this.saveFieldUpdate(url,field,_field_change_type_model__WEBPACK_IMPORTED_MODULE_1__.B.ADD),update$}saveRemoveFieldUpdate(url,field){const update$=this.getFieldUpdatesExclusive(url,[field]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.pb)(fieldUpdates=>fieldUpdates[field.uuid].changeType===_field_change_type_model__WEBPACK_IMPORTED_MODULE_1__.B.REMOVE),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.s)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.Tj)(()=>!0));return this.saveFieldUpdate(url,field,_field_change_type_model__WEBPACK_IMPORTED_MODULE_1__.B.REMOVE),update$}saveChangeFieldUpdate(url,field){this.saveFieldUpdate(url,field,_field_change_type_model__WEBPACK_IMPORTED_MODULE_1__.B.UPDATE)}isSelectedVirtualMetadata(url,relationship,item){return this.store.pipe((0,_ngrx_store__WEBPACK_IMPORTED_MODULE_4__.Lt)(function virtualMetadataSourceSelector(url,source){return(0,_ngrx_store__WEBPACK_IMPORTED_MODULE_4__.Mz)(filterByUrlObjectUpdatesStateSelector(url),state=>state.virtualMetadataSources[source])}(url,relationship)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.Tj)(virtualMetadataSource=>virtualMetadataSource&&virtualMetadataSource[item]))}setSelectedVirtualMetadata(url,relationship,uuid,selected){this.store.dispatch(new _object_updates_actions__WEBPACK_IMPORTED_MODULE_2__.nY(url,relationship,uuid,selected))}setEditableFieldUpdate(url,uuid,editable){this.store.dispatch(new _object_updates_actions__WEBPACK_IMPORTED_MODULE_2__.KD(url,uuid,editable))}setValidFieldUpdate(url,uuid,valid){this.store.dispatch(new _object_updates_actions__WEBPACK_IMPORTED_MODULE_2__.wS(url,uuid,valid))}discardFieldUpdates(url,undoNotification){this.store.dispatch(new _object_updates_actions__WEBPACK_IMPORTED_MODULE_2__.Y8(url,undoNotification))}discardAllFieldUpdates(url,undoNotification){this.store.dispatch(new _object_updates_actions__WEBPACK_IMPORTED_MODULE_2__.Y8(url,undoNotification,!0))}reinstateFieldUpdates(url){this.store.dispatch(new _object_updates_actions__WEBPACK_IMPORTED_MODULE_2__.jX(url))}removeSingleFieldUpdate(url,uuid){this.store.dispatch(new _object_updates_actions__WEBPACK_IMPORTED_MODULE_2__.mW(url,uuid))}getUpdatedFields(url,initialFields){return this.getObjectEntry(url).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.Tj)(objectEntry=>{const fields=[];return Object.keys(objectEntry.fieldStates).forEach(uuid=>{const fieldUpdate=objectEntry.fieldUpdates[uuid];if((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.Tn)(fieldUpdate)||fieldUpdate.changeType!==_field_change_type_model__WEBPACK_IMPORTED_MODULE_1__.B.REMOVE){let field;field=(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.hj)(fieldUpdate)?fieldUpdate.field:initialFields.find(object=>object.uuid===uuid),fields.push(field)}}),fields}))}hasUpdates(url){return this.getObjectEntry(url).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.Tj)(objectEntry=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(objectEntry)&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.hj)(objectEntry.fieldUpdates)))}isReinstatable(url){return this.hasUpdates(url+_object_updates_reducer__WEBPACK_IMPORTED_MODULE_3__.U)}getLastModified(url){return this.getObjectEntry(url).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.Tj)(entry=>entry.lastModified))}createPatch(url){return this.getObjectEntry(url).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.Tj)(entry=>{let patch=[];return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_6__.a4)(entry.patchOperationService)&&(patch=this.injector.get(entry.patchOperationService).fieldUpdatesToPatchOperations(entry.fieldUpdates)),patch}))}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ObjectUpdatesService2)(_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_ngrx_store__WEBPACK_IMPORTED_MODULE_4__.il),_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_angular_core__WEBPACK_IMPORTED_MODULE_7__.zZn))}}static{this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_7__.jDH({token:ObjectUpdatesService2,factory:ObjectUpdatesService2.\u0275fac,providedIn:"root"})}}return ObjectUpdatesService2})()},22019:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ProcessDataService:()=>ProcessDataService,TIMER_FACTORY:()=>TIMER_FACTORY});var _angular_core__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(25376),rxjs_operators__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(60444),src_app_process_page_processes_process_status_model__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(82866),_shared_empty_util__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2794),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(76623),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(80996),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(63311),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(26139),_shared_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(39022),_base_delete_data__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(92788),_base_find_all_data__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(27554),_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(61640),_base_search_data__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(98861),_bitstream_data_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(94999),_request_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(64806);const TIMER_FACTORY=new _angular_core__WEBPACK_IMPORTED_MODULE_12__.nKC("timer",{providedIn:"root",factory:()=>setTimeout});let ProcessDataService=(()=>{class ProcessDataService2 extends _base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_8__.W{constructor(requestService,rdbService,objectCache,halService,bitstreamDataService,notificationsService,zone,timer){super("processes",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.bitstreamDataService=bitstreamDataService,this.notificationsService=notificationsService,this.zone=zone,this.timer=timer,this.activelyBeingPolled=new Map,this.subs=new Map,this.findAllData=new _base_find_all_data__WEBPACK_IMPORTED_MODULE_7__.H(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive),this.deleteData=new _base_delete_data__WEBPACK_IMPORTED_MODULE_6__.I(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive,this.constructIdEndpoint),this.searchData=new _base_search_data__WEBPACK_IMPORTED_MODULE_9__.X(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive)}static statusIs(process,status){return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_13__.a4)(process)&&process.processStatus===status}static hasCompletedOrFailed(process){return ProcessDataService2.statusIs(process,src_app_process_page_processes_process_status_model__WEBPACK_IMPORTED_MODULE_0__.K.COMPLETED)||ProcessDataService2.statusIs(process,src_app_process_page_processes_process_status_model__WEBPACK_IMPORTED_MODULE_0__.K.FAILED)}getFilesEndpoint(processId){return this.getBrowseEndpoint().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.nx)(href=>this.halService.getEndpoint("files",`${href}/${processId}`)))}getFiles(processId){const href$=this.getFilesEndpoint(processId);return this.bitstreamDataService.findListByHref(href$)}findAll(options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow){return this.findAllData.findAll(options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}searchBy(searchMethod,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow){return this.searchData.searchBy(searchMethod,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}autoRefreshingSearchBy(id,searchMethod,options,pollingIntervalInMs=5e3,...linksToFollow){const result$=this.searchBy(searchMethod,options,!0,!0,...linksToFollow).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_5__.bD)()),sub=result$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.pb)(()=>!this.activelyBeingPolled.has(id))).subscribe(processListRd=>{this.clearCurrentTimeout(id);const nextTimeout=this.timer(()=>{this.activelyBeingPolled.delete(id),this.requestService.setStaleByHrefSubstring(processListRd.payload._links.self.href)},pollingIntervalInMs);this.activelyBeingPolled.set(id,nextTimeout)});return this.subs.set(id,sub),result$}stopAutoRefreshing(id){this.clearCurrentTimeout(id),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_13__.a4)(this.subs.get(id))&&(this.subs.get(id).unsubscribe(),this.subs.delete(id))}delete(objectId,copyVirtualMetadata){return this.deleteData.delete(objectId,copyVirtualMetadata)}deleteByHref(href,copyVirtualMetadata){return this.deleteData.deleteByHref(href,copyVirtualMetadata)}clearCurrentTimeout(id){const timeout=this.activelyBeingPolled.get(id);(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_13__.a4)(timeout)&&clearTimeout(timeout),this.activelyBeingPolled.delete(id)}autoRefreshUntilCompletion(processId,pollingIntervalInMs=5e3,...linksToFollow){const process$=this.findById(processId,!0,!0,...linksToFollow).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_5__.bD)()),sub=process$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.pb)(processRD=>!ProcessDataService2.hasCompletedOrFailed(processRD.payload)&&!this.activelyBeingPolled.has(processId))).subscribe(processRD=>{if(this.clearCurrentTimeout(processId),processRD.hasSucceeded){const nextTimeout=this.timer(()=>{this.activelyBeingPolled.delete(processId),this.invalidateByHref(processRD.payload._links.self.href)},pollingIntervalInMs);this.activelyBeingPolled.set(processId,nextTimeout)}});return this.subs.set(processId,sub),process$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.I6)(processRD=>ProcessDataService2.hasCompletedOrFailed(processRD.payload))).subscribe(()=>{this.stopAutoRefreshing(processId)}),process$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_14__.F)((previous,current)=>previous.payload?.processStatus===current.payload?.processStatus))}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ProcessDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_request_service__WEBPACK_IMPORTED_MODULE_11__.B),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_2__.o),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_3__.$),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_4__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_bitstream_data_service__WEBPACK_IMPORTED_MODULE_10__.BitstreamDataService),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_1__.I),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(_angular_core__WEBPACK_IMPORTED_MODULE_12__.SKi),_angular_core__WEBPACK_IMPORTED_MODULE_12__.KVO(TIMER_FACTORY))}}static{this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_12__.jDH({token:ProcessDataService2,factory:ProcessDataService2.\u0275fac,providedIn:"root"})}}return ProcessDataService2})()},23390:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ResourcePolicyDataService:()=>ResourcePolicyDataService});var _angular_common_http__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(98465),rxjs_operators__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(60444),_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(2794),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(76623),_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(80996),_cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(99629),_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(63311),_data_base_create_data__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(95985),_data_base_delete_data__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(92788),_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(61640),_data_base_patch_data__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(41373),_data_base_search_data__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(98861),_data_default_change_analyzer_service__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(59041),_data_find_list_options_model__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(72248),_data_request_models__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(99381),_data_request_service__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(64806),_data_status_code_only_response_parsing_service__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(5641),_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(15318),_eperson_group_data_service__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(14557),_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(26139),_shared_operators__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(39022),_angular_core__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(25376);let ResourcePolicyDataService=(()=>{class ResourcePolicyDataService2 extends _data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_5__.W{constructor(requestService,rdbService,objectCache,halService,notificationsService,comparator,ePersonService,groupService){super("resourcepolicies",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.notificationsService=notificationsService,this.comparator=comparator,this.ePersonService=ePersonService,this.groupService=groupService,this.searchByEPersonMethod="eperson",this.searchByGroupMethod="group",this.searchByResourceMethod="resource",this.createData=new _data_base_create_data__WEBPACK_IMPORTED_MODULE_3__.V(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive),this.searchData=new _data_base_search_data__WEBPACK_IMPORTED_MODULE_7__.X(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive),this.patchData=new _data_base_patch_data__WEBPACK_IMPORTED_MODULE_6__.n(this.linkPath,requestService,rdbService,objectCache,halService,comparator,this.responseMsToLive,this.constructIdEndpoint),this.deleteData=new _data_base_delete_data__WEBPACK_IMPORTED_MODULE_4__.I(this.linkPath,requestService,rdbService,objectCache,halService,notificationsService,this.responseMsToLive,this.constructIdEndpoint)}create(resourcePolicy,resourceUUID,epersonUUID,groupUUID){const params=[];return params.push(new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("resource",resourceUUID)),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__.hj)(epersonUUID)?params.push(new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("eperson",epersonUUID)):(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__.hj)(groupUUID)&&params.push(new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("group",groupUUID)),this.createData.create(resourcePolicy,...params)}delete(resourcePolicyID){return this.deleteData.delete(resourcePolicyID).pipe((0,_shared_operators__WEBPACK_IMPORTED_MODULE_15__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.Tj)(response=>response.hasSucceeded))}update(object){return this.patchData.update(object)}getDefaultAccessConditionsFor(collection,findListOptions){return this.findListByHref(collection._links.defaultAccessConditions.href,findListOptions)}searchByEPerson(UUID,resourceUUID,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){const options=new _data_find_list_options_model__WEBPACK_IMPORTED_MODULE_19__._;return options.searchParams=[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("uuid",UUID)],(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__.hj)(resourceUUID)&&options.searchParams.push(new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("resource",resourceUUID)),this.searchData.searchBy(this.searchByEPersonMethod,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}searchByGroup(UUID,resourceUUID,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){const options=new _data_find_list_options_model__WEBPACK_IMPORTED_MODULE_19__._;return options.searchParams=[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("uuid",UUID)],(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__.hj)(resourceUUID)&&options.searchParams.push(new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("resource",resourceUUID)),this.searchData.searchBy(this.searchByGroupMethod,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}searchByResource(UUID,action,useCachedVersionIfAvailable=!0,reRequestOnStale=!0,...linksToFollow){const options=new _data_find_list_options_model__WEBPACK_IMPORTED_MODULE_19__._;return options.searchParams=[new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("uuid",UUID)],(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_17__.hj)(action)&&options.searchParams.push(new _cache_models_request_param_model__WEBPACK_IMPORTED_MODULE_16__.x("action",action)),this.searchData.searchBy(this.searchByResourceMethod,options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}updateTarget(resourcePolicyId,resourcePolicyHref,targetUUID,targetType){const targetEndpoint$=("eperson"===targetType?this.ePersonService:this.groupService).getIDHrefObs(targetUUID),options=Object.create({});let headers=new _angular_common_http__WEBPACK_IMPORTED_MODULE_20__.Lr;headers=headers.append("Content-Type","text/uri-list"),options.headers=headers;const requestId=this.requestService.generateRequestId();return targetEndpoint$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_18__.$1)()).subscribe(targetEndpoint=>{const request=new _data_request_models__WEBPACK_IMPORTED_MODULE_9__.v_(requestId,resourcePolicyHref+"/"+targetType,targetEndpoint,options);Object.assign(request,{getResponseParser:()=>_data_status_code_only_response_parsing_service__WEBPACK_IMPORTED_MODULE_11__.M}),this.requestService.send(request)}),this.rdbService.buildFromRequestUUIDAndAwait(requestId,()=>this.invalidateByHref(resourcePolicyHref))}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ResourcePolicyDataService2)(_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_data_request_service__WEBPACK_IMPORTED_MODULE_10__.B),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_1__.o),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_2__.$),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_14__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_0__.I),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_data_default_change_analyzer_service__WEBPACK_IMPORTED_MODULE_8__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_12__.EPersonDataService),_angular_core__WEBPACK_IMPORTED_MODULE_21__.KVO(_eperson_group_data_service__WEBPACK_IMPORTED_MODULE_13__.GroupDataService))}}static{this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_21__.jDH({token:ResourcePolicyDataService2,factory:ResourcePolicyDataService2.\u0275fac,providedIn:"root"})}}return ResourcePolicyDataService2})()},80607:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>CurationFormComponent});var _angular_forms__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(13054),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2385),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(60444),_core_data_configuration_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(93876),_core_data_processes_script_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(83183),_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(39022),_process_page_process_page_routing_paths__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(54663),_shared_empty_util__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2794),_shared_handle_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(10576),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(76623),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25376),_angular_router__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(18134);function CurationFormComponent_For_9_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(0,"option",6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()),2&rf){const task_r1=ctx.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("value",task_r1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(2,2,"curation-task.task."+task_r1+".label")," ")}}function CurationFormComponent_Conditional_10_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(0,"div",3)(1,"label",8),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nrm(4,"input",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(5,"small",10),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(7,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(3,2,"curation.form.handle.label")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(7,4,"curation.form.handle.hint")))}let CurationFormComponent=(()=>{class CurationFormComponent2{constructor(scriptDataService,configurationDataService,notificationsService,translateService,handleService,router,cdr){this.scriptDataService=scriptDataService,this.configurationDataService=configurationDataService,this.notificationsService=notificationsService,this.translateService=translateService,this.handleService=handleService,this.router=router,this.cdr=cdr,this.subs=[]}ngOnDestroy(){this.subs.forEach(sub=>sub.unsubscribe())}ngOnInit(){this.form=new _angular_forms__WEBPACK_IMPORTED_MODULE_6__.J3({task:new _angular_forms__WEBPACK_IMPORTED_MODULE_6__.hs(""),handle:new _angular_forms__WEBPACK_IMPORTED_MODULE_6__.hs("")}),this.config=this.configurationDataService.findByPropertyName("plugin.named.org.dspace.curate.CurationTask"),this.subs.push(this.config.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.ak)()).subscribe(configProperties=>{this.tasks=configProperties.values.filter(value=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_7__.hj)(value)&&value.includes("=")).map(value=>value.split("=")[1].trim()),this.form.get("task").patchValue(this.tasks[0]),this.cdr.detectChanges()}))}hasHandleValue(){return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_7__.a4)(this.dsoHandle)}submit(){const taskName=this.form.get("task").value;let handle$;handle$=this.hasHandleValue()?this.handleService.normalizeHandle(this.dsoHandle).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.Tj)(handle=>((0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_7__.Im)(handle)&&this.notificationsService.error(this.translateService.get("curation.form.submit.error.head"),this.translateService.get("curation.form.submit.error.invalid-handle")),handle))):this.handleService.normalizeHandle(this.form.get("handle").value).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.Tj)(handle=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_7__.Im)(handle)?"all":handle)),this.subs.push(handle$.subscribe(handle=>{(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_7__.a4)(handle)&&this.subs.push(this.scriptDataService.invoke("curate",[{name:"-t",value:taskName},{name:"-i",value:handle}],[]).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.qD)()).subscribe(rd=>{rd.hasSucceeded?(this.notificationsService.success(this.translateService.get("curation.form.submit.success.head"),this.translateService.get("curation.form.submit.success.content")),this.router.navigateByUrl((0,_process_page_process_page_routing_paths__WEBPACK_IMPORTED_MODULE_9__.yJ)(rd.payload.processId))):this.notificationsService.error(this.translateService.get("curation.form.submit.error.head"),this.translateService.get("curation.form.submit.error.content"))}))}))}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||CurationFormComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_core_data_processes_script_data_service__WEBPACK_IMPORTED_MODULE_1__.ScriptDataService),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_core_data_configuration_data_service__WEBPACK_IMPORTED_MODULE_0__.ConfigurationDataService),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__.I),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_shared_handle_service__WEBPACK_IMPORTED_MODULE_3__.e),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_11__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_angular_core__WEBPACK_IMPORTED_MODULE_5__.gRc))}}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_5__.VBU({type:CurationFormComponent2,selectors:[["ds-curation-form"]],inputs:{dsoHandle:"dsoHandle"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_5__.aNF],decls:14,vars:8,consts:[[3,"ngSubmit","formGroup"],[1,"mb-3"],[1,"row","mb-2"],[1,"col-12","col-sm-6"],["for","task",1,"fw-bold","form-label"],["id","task","formControlName","task",1,"form-select"],[3,"value"],["type","submit",1,"btn","btn-default","btn-primary"],["for","handle",1,"fw-bold","form-label"],["id","handle","formControlName","handle",1,"form-control"],[1,"text-muted"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(0,"form",0),_angular_core__WEBPACK_IMPORTED_MODULE_5__.bIt("ngSubmit",function(){return ctx.submit()}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(1,"div",1)(2,"div",2)(3,"div",3)(4,"label",4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(6,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(7,"select",5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Z7z(8,CurationFormComponent_For_9_Template,3,4,"option",6,_angular_core__WEBPACK_IMPORTED_MODULE_5__.fX1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.DNE(10,CurationFormComponent_Conditional_10_Template,8,6,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(11,"button",7),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(12),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(13,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("formGroup",ctx.form),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(6,4,"curation.form.task-select.label")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Dyx(ctx.tasks),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.vxM(ctx.hasHandleValue()?-1:10),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(13,6,"curation.form.submit")))},dependencies:[_angular_forms__WEBPACK_IMPORTED_MODULE_6__.YN,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.qT,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.xH,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.y7,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.me,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.wz,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.BC,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.cb,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.X1,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.j4,_angular_forms__WEBPACK_IMPORTED_MODULE_6__.JD,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.D9],encapsulation:2})}}return CurationFormComponent2})()},58840:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{o:()=>AccessControlFormContainerComponent});var common=__webpack_require__(87514),fesm2022_forms=__webpack_require__(13054),ngx_translate_core=__webpack_require__(2385),ngx_ui_switch=__webpack_require__(53359),cjs=__webpack_require__(9238),operators=__webpack_require__(60444),bulk_access_config_data_service=__webpack_require__(30748),shared_operators=(__webpack_require__(18683),__webpack_require__(39022)),alert_component=__webpack_require__(6213),alert_type=__webpack_require__(83113),btn_disabled_directive=__webpack_require__(69919),selectable_list_service=__webpack_require__(85984),ng_bootstrap=__webpack_require__(87969),date_util=__webpack_require__(13651),core=__webpack_require__(25376);let ToDatePipe=(()=>{class ToDatePipe2{transform(dateValue){if(!dateValue)return null;const date=new Date(dateValue);return{year:date.getFullYear(),month:date.getMonth()+1,day:date.getDate()}}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ToDatePipe2)}}static{this.\u0275pipe=core.EJ8({name:"toDate",type:ToDatePipe2,pure:!1,standalone:!0})}}return ToDatePipe2})();const _c0=["ngForm"];function AccessControlArrayFormComponent_Conditional_2_Template(rf,ctx){1&rf&&(core.j41(0,"div",3),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"access-control-no-access-conditions-warning-message")," "))}function AccessControlArrayFormComponent_For_4_For_9_Template(rf,ctx){if(1&rf&&(core.j41(0,"option",11),core.EFF(1),core.k0s()),2&rf){const option_r5=ctx.$implicit;core.Y8G("value",option_r5.name),core.R7$(),core.SpI(" ",option_r5.name," ")}}function AccessControlArrayFormComponent_For_4_Conditional_13_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"div",13)(1,"label",8),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"div",15)(5,"input",18,1),core.nI1(7,"toDate"),core.mxI("ngModelChange",function($event){core.eBV(_r6);const control_r3=core.XpG().$implicit;return core.DH7(control_r3.startDate,$event)||(control_r3.startDate=$event),core.Njj($event)}),core.k0s(),core.j41(8,"div",19)(9,"button",20),core.bIt("click",function(){core.eBV(_r6);const d_r7=core.sdS(6);return core.Njj(d_r7.toggle())}),core.k0s()()(),core.j41(10,"small",12),core.EFF(11),core.nI1(12,"translate"),core.k0s()()}if(2&rf){const control_r3=core.XpG().$implicit;core.XpG();const ngForm_r8=core.sdS(1);core.R7$(),core.Mz_("for","accesscontrolstartdate-",control_r3.id,""),core.R7$(),core.SpI(" ",core.bMT(3,11,"access-control-option-start-date")," "),core.R7$(3),core.Mz_("id","accesscontrolstartdate-",control_r3.id,""),core.Mz_("name","startDate-",control_r3.id,""),core.R50("ngModel",control_r3.startDate),core.Y8G("maxDate",core.bMT(7,13,control_r3.maxStartDate)),core.R7$(4),core.Y8G("dsBtnDisabled",ngForm_r8.disabled),core.R7$(2),core.SpI(" ",core.bMT(12,15,"access-control-option-start-date-note")," ")}}function AccessControlArrayFormComponent_For_4_Conditional_14_Template(rf,ctx){if(1&rf){const _r9=core.RV6();core.j41(0,"div",13)(1,"label",8),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"div",15)(5,"input",18,2),core.nI1(7,"toDate"),core.mxI("ngModelChange",function($event){core.eBV(_r9);const control_r3=core.XpG().$implicit;return core.DH7(control_r3.endDate,$event)||(control_r3.endDate=$event),core.Njj($event)}),core.k0s(),core.j41(8,"div",19)(9,"button",20),core.bIt("click",function(){core.eBV(_r9);const d1_r10=core.sdS(6);return core.Njj(d1_r10.toggle())}),core.k0s()()(),core.j41(10,"small",12),core.EFF(11),core.nI1(12,"translate"),core.k0s()()}if(2&rf){const control_r3=core.XpG().$implicit;core.XpG();const ngForm_r8=core.sdS(1);core.R7$(),core.Mz_("for","accesscontrolenddate-",control_r3.id,""),core.R7$(),core.SpI(" ",core.bMT(3,11,"access-control-option-end-date")," "),core.R7$(3),core.Mz_("id","accesscontrolenddate-",control_r3.id,""),core.Mz_("name","endDate-",control_r3.id,""),core.R50("ngModel",control_r3.endDate),core.Y8G("maxDate",core.bMT(7,13,control_r3.maxEndDate)),core.R7$(4),core.Y8G("dsBtnDisabled",ngForm_r8.disabled),core.R7$(2),core.SpI(" ",core.bMT(12,15,"access-control-option-end-date-note")," ")}}function AccessControlArrayFormComponent_For_4_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"div",4)(1,"div",7)(2,"div")(3,"label",8),core.EFF(4),core.nI1(5,"translate"),core.k0s(),core.j41(6,"select",9),core.mxI("ngModelChange",function($event){const control_r3=core.eBV(_r2).$implicit;return core.DH7(control_r3.itemName,$event)||(control_r3.itemName=$event),core.Njj($event)}),core.bIt("ngModelChange",function($event){const control_r3=core.eBV(_r2).$implicit,ctx_r3=core.XpG();return core.Njj(ctx_r3.accessControlChanged(control_r3,$event))}),core.nrm(7,"option",10),core.Z7z(8,AccessControlArrayFormComponent_For_4_For_9_Template,2,2,"option",11,core.fX1),core.k0s(),core.j41(10,"small",12),core.EFF(11),core.nI1(12,"translate"),core.k0s()(),core.DNE(13,AccessControlArrayFormComponent_For_4_Conditional_13_Template,13,17,"div",13)(14,AccessControlArrayFormComponent_For_4_Conditional_14_Template,13,17,"div",13),core.k0s(),core.j41(15,"div")(16,"span",14),core.EFF(17,"\xa0"),core.k0s(),core.j41(18,"div",15)(19,"button",16),core.nI1(20,"translate"),core.bIt("click",function(){const control_r3=core.eBV(_r2).$implicit,ctx_r3=core.XpG();return core.Njj(ctx_r3.removeAccessControlItem(control_r3.id))}),core.nrm(21,"i",17),core.k0s()()()()}if(2&rf){const control_r3=ctx.$implicit,ctx_r3=core.XpG(),ngForm_r8=core.sdS(1);core.Mz_("ngModelGroup","access-control-item-",control_r3.id,""),core.R7$(3),core.Mz_("for","accesscontroloption-",control_r3.id,""),core.R7$(),core.SpI(" ",core.bMT(5,16,"access-control-option-label")," "),core.R7$(2),core.Mz_("id","accesscontroloption-",control_r3.id,""),core.Mz_("name","itemName-",control_r3.id,""),core.Y8G("disabled",ngForm_r8.disabled),core.R50("ngModel",control_r3.itemName),core.R7$(2),core.Dyx(ctx_r3.dropdownOptions),core.R7$(3),core.SpI(" ",core.bMT(12,18,"access-control-option-note")," "),core.R7$(2),core.vxM(control_r3.hasStartDate?13:-1),core.R7$(),core.vxM(control_r3.hasEndDate?14:-1),core.R7$(5),core.Y8G("dsBtnDisabled",ngForm_r8.disabled||1===ctx_r3.form.accessControls.length),core.BMQ("aria-label",core.bMT(20,20,"access-control-remove"))}}let AccessControlArrayFormComponent=(()=>{class AccessControlArrayFormComponent2{constructor(){this.dropdownOptions=[],this.form={accessControls:[emptyAccessControlItem()]},this.formDisabled=!0,this.disable=()=>{this.ngForm.form.disable(),this.formDisabled=!0},this.enable=()=>{this.ngForm.form.enable(),this.formDisabled=!1}}ngOnInit(){this.disable()}get allControlsAreEmpty(){return this.form.accessControls.every(x=>null===x.itemName||""===x.itemName)}get showWarning(){return"replace"===this.mode&&this.allControlsAreEmpty&&!this.formDisabled}addAccessControlItem(itemName=null){this.form.accessControls=[...this.form.accessControls,{...emptyAccessControlItem(),itemName}]}removeAccessControlItem(id){this.form.accessControls=this.form.accessControls.filter(item=>item.id!==id)}getValue(){return this.form.accessControls.filter(x=>null!==x.itemName&&""!==x.itemName).map(x=>({name:x.itemName,startDate:x.startDate?(0,date_util.Sd)(x.startDate):null,endDate:x.endDate?(0,date_util.Sd)(x.endDate):null}))}reset(){this.form.accessControls=[],this.addAccessControlItem(),this.disable()}accessControlChanged(control,selectedItem){const item=this.dropdownOptions.find(x=>x.name===selectedItem);control.startDate=null,control.endDate=null,control.hasStartDate=item?.hasStartDate||!1,control.hasEndDate=item?.hasEndDate||!1,control.maxStartDate=item?.maxStartDate||null,control.maxEndDate=item?.maxEndDate||null}trackById(index,item){return item.id}isValid(){return this.ngForm.valid}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||AccessControlArrayFormComponent2)}}static{this.\u0275cmp=core.VBU({type:AccessControlArrayFormComponent2,selectors:[["ds-access-control-array-form"]],viewQuery:function(rf,ctx){if(1&rf&&core.GBs(_c0,7),2&rf){let _t;core.mGM(_t=core.lsd())&&(ctx.ngForm=_t.first)}},inputs:{dropdownOptions:"dropdownOptions",mode:"mode",type:"type"},exportAs:["accessControlArrayForm"],standalone:!0,features:[core.aNF],decls:9,vars:7,consts:[["ngForm","ngForm"],["d","ngbDatepicker"],["d1","ngbDatepicker"],[1,"alert","alert-warning"],[1,"access-control-item","mt-3",3,"ngModelGroup"],["type","button",1,"btn","btn-outline-primary","mt-3",3,"click","id","dsBtnDisabled"],[1,"fas","fa-plus"],[1,"d-flex","flex-column"],[1,"form-label",3,"for"],[1,"form-select",3,"ngModelChange","id","disabled","ngModel","name"],["value",""],[3,"value"],[1,"form-text","text-muted"],[1,"mt-3"],["aria-hidden","true",1,"mb-2","d-inline-block"],[1,"input-group"],["type","button",1,"btn","btn-outline-danger",3,"click","dsBtnDisabled"],[1,"fas","fa-trash"],["placeholder","yyyy-mm-dd","ngbDatepicker","","placement","top-start top-end bottom-start bottom-end",1,"form-control",3,"ngModelChange","id","ngModel","name","maxDate"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary","fas","fa-calendar",3,"click","dsBtnDisabled"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"form",null,0),core.DNE(2,AccessControlArrayFormComponent_Conditional_2_Template,3,3,"div",3),core.Z7z(3,AccessControlArrayFormComponent_For_4_Template,22,22,"div",4,ctx.trackById,!0),core.j41(5,"button",5),core.bIt("click",function(){return core.eBV(_r1),core.Njj(ctx.addAccessControlItem())}),core.nrm(6,"i",6),core.EFF(7),core.nI1(8,"translate"),core.k0s()()}if(2&rf){const ngForm_r8=core.sdS(1);core.R7$(2),core.vxM(ctx.showWarning?2:-1),core.R7$(),core.Dyx(ctx.form.accessControls),core.R7$(2),core.Mz_("id","add-btn-",ctx.type,""),core.Y8G("dsBtnDisabled",ngForm_r8.disabled),core.R7$(2),core.SpI(" ",core.bMT(8,5,"access-control-add-more")," ")}},dependencies:[btn_disabled_directive.A,fesm2022_forms.YN,fesm2022_forms.qT,fesm2022_forms.xH,fesm2022_forms.y7,fesm2022_forms.me,fesm2022_forms.wz,fesm2022_forms.BC,fesm2022_forms.cb,fesm2022_forms.vS,fesm2022_forms.Y4,fesm2022_forms.cV,ng_bootstrap.IQ,ng_bootstrap.cw,ToDatePipe,ngx_translate_core.h,ngx_translate_core.D9],styles:[".access-control-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 50px;grid-gap:10px;padding-bottom:15px;border-bottom:2px dotted gray}"]})}}return AccessControlArrayFormComponent2})();const emptyAccessControlItem=()=>({id:randomID(),itemName:null,startDate:null,hasStartDate:!1,maxStartDate:null,endDate:null,hasEndDate:!1,maxEndDate:null}),randomID=()=>Math.floor(1e6*Math.random());var bulk_access_control_service=__webpack_require__(46549),context_model=__webpack_require__(21571),bitstream_data_service=__webpack_require__(94999),pagination_service=__webpack_require__(31903),object_collection_component=(__webpack_require__(43575),__webpack_require__(66613)),pagination_component_options_model=__webpack_require__(54396);const item_access_control_select_bitstreams_modal_component_c0=a0=>({repeatable:!0,listId:a0});function ItemAccessControlSelectBitstreamsModalComponent_Conditional_6_Conditional_0_Template(rf,ctx){if(1&rf&&core.nrm(0,"ds-viewable-collection",6),2&rf){const bitstreams_r1=core.XpG(),ctx_r1=core.XpG();core.Y8G("config",ctx_r1.paginationConfig)("context",ctx_r1.context)("objects",bitstreams_r1)("selectable",!0)("selectionConfig",core.eq3(6,item_access_control_select_bitstreams_modal_component_c0,ctx_r1.LIST_ID))("showPaginator",!0)}}function ItemAccessControlSelectBitstreamsModalComponent_Conditional_6_Conditional_1_Template(rf,ctx){1&rf&&(core.j41(0,"div",7),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"access-control-select-bitstreams-modal.no-items")," "))}function ItemAccessControlSelectBitstreamsModalComponent_Conditional_6_Template(rf,ctx){if(1&rf&&core.DNE(0,ItemAccessControlSelectBitstreamsModalComponent_Conditional_6_Conditional_0_Template,1,8,"ds-viewable-collection",6)(1,ItemAccessControlSelectBitstreamsModalComponent_Conditional_6_Conditional_1_Template,3,3,"div",7),2&rf){const bitstreams_r1=ctx;core.vxM(bitstreams_r1.payload.page.length>0?0:-1),core.R7$(),core.vxM(bitstreams_r1&&0===bitstreams_r1.payload.page.length?1:-1)}}let ItemAccessControlSelectBitstreamsModalComponent=(()=>{class ItemAccessControlSelectBitstreamsModalComponent2{constructor(bitstreamService,paginationService,translateService,activeModal){this.bitstreamService=bitstreamService,this.paginationService=paginationService,this.translateService=translateService,this.activeModal=activeModal,this.LIST_ID="item-access-control-select-bitstreams",this.selectedBitstreams=[],this.context=context_model.o.Bitstream,this.paginationConfig=Object.assign(new pagination_component_options_model.W,{id:"iacsbm",currentPage:1,pageSize:5})}ngOnInit(){this.bitstreams$=this.paginationService.getCurrentPagination(this.paginationConfig.id,this.paginationConfig).pipe((0,operators.nx)(options=>this.bitstreamService.findAllByItemAndBundleName(this.item,"ORIGINAL",{elementsPerPage:options.pageSize,currentPage:options.currentPage},!0,!0)))}ngOnDestroy(){this.paginationService.clearPagination(this.paginationConfig.id)}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ItemAccessControlSelectBitstreamsModalComponent2)(core.rXU(bitstream_data_service.BitstreamDataService),core.rXU(pagination_service.m),core.rXU(ngx_translate_core.c$),core.rXU(ng_bootstrap.Lw))}}static{this.\u0275cmp=core.VBU({type:ItemAccessControlSelectBitstreamsModalComponent2,selectors:[["ds-item-access-control-select-bitstreams-modal"]],inputs:{item:"item",selectedBitstreams:"selectedBitstreams"},standalone:!0,features:[core.aNF],decls:12,vars:9,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[3,"config","context","objects","selectable","selectionConfig","showPaginator"],["role","alert",1,"alert","alert-info","w-100"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",0)(1,"h4",1),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"button",2),core.bIt("click",function(){return ctx.activeModal.dismiss("Cross click")}),core.k0s()(),core.j41(5,"div",3),core.DNE(6,ItemAccessControlSelectBitstreamsModalComponent_Conditional_6_Template,2,2),core.nI1(7,"async"),core.k0s(),core.j41(8,"div",4)(9,"button",5),core.bIt("click",function(){return ctx.activeModal.close("Close click")}),core.EFF(10),core.nI1(11,"translate"),core.k0s()()),2&rf){let tmp_1_0;core.R7$(2),core.SpI(" ",core.bMT(3,3,"access-control-select-bitstreams-modal.title")," "),core.R7$(4),core.vxM((tmp_1_0=core.bMT(7,5,ctx.bitstreams$))?6:-1,tmp_1_0),core.R7$(4),core.SpI(" ",core.bMT(11,7,"access-control-select-bitstreams-modal.close")," ")}},dependencies:[common.Jj,object_collection_component.h,ngx_translate_core.h,ngx_translate_core.D9]})}}return ItemAccessControlSelectBitstreamsModalComponent2})();const access_control_form_container_component_c0=["bitstreamAccessCmp"],_c1=["itemAccessCmp"],_c2=()=>[];function AccessControlFormContainerComponent_Conditional_3_Template(rf,ctx){if(1&rf&&core.nrm(0,"ds-alert",5),2&rf){const ctx_r1=core.XpG();core.Y8G("type",ctx_r1.AlertType.Info)("content",ctx_r1.titleMessage)}}function AccessControlFormContainerComponent_Conditional_43_Conditional_15_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"button",34),core.nI1(1,"translate"),core.bIt("click",function(){core.eBV(_r4);const ctx_r1=core.XpG(2);return core.Njj(ctx_r1.openSelectBitstreamsModal(ctx_r1.itemRD.payload))}),core.nrm(2,"i",35),core.k0s()}if(2&rf){const ctx_r1=core.XpG(2);core.Y8G("dsBtnDisabled",!ctx_r1.state.bitstream.toggleStatus||"selected"!==ctx_r1.state.bitstream.changesLimit),core.BMQ("aria-label",core.bMT(1,2,"access-control-bitstreams-select"))}}function AccessControlFormContainerComponent_Conditional_43_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"div",11)(1,"fieldset",27)(2,"legend",28),core.EFF(3),core.nI1(4,"translate"),core.k0s(),core.j41(5,"div",14)(6,"input",29),core.mxI("ngModelChange",function($event){core.eBV(_r3);const ctx_r1=core.XpG();return core.DH7(ctx_r1.state.bitstream.changesLimit,$event)||(ctx_r1.state.bitstream.changesLimit=$event),core.Njj($event)}),core.k0s(),core.j41(7,"label",30),core.EFF(8),core.nI1(9,"translate"),core.k0s()(),core.j41(10,"div",14)(11,"input",31),core.mxI("ngModelChange",function($event){core.eBV(_r3);const ctx_r1=core.XpG();return core.DH7(ctx_r1.state.bitstream.changesLimit,$event)||(ctx_r1.state.bitstream.changesLimit=$event),core.Njj($event)}),core.k0s(),core.j41(12,"label",32),core.EFF(13),core.nI1(14,"translate"),core.DNE(15,AccessControlFormContainerComponent_Conditional_43_Conditional_15_Template,3,4,"button",33),core.k0s()()()()}if(2&rf){const ctx_r1=core.XpG();core.R7$(3),core.SpI(" ",core.bMT(4,9,"access-control-limit-to-specific")," "),core.R7$(3),core.Y8G("disabled",!ctx_r1.state.bitstream.toggleStatus),core.R50("ngModel",ctx_r1.state.bitstream.changesLimit),core.R7$(2),core.SpI(" ",core.bMT(9,11,"access-control-process-all-bitstreams")," "),core.R7$(3),core.Y8G("disabled",!ctx_r1.state.bitstream.toggleStatus),core.R50("ngModel",ctx_r1.state.bitstream.changesLimit),core.R7$(2),core.Lme(" ",ctx_r1.state.bitstream.selectedBitstreams.length," ",core.bMT(14,13,"access-control-bitstreams-selected")," "),core.R7$(2),core.vxM(ctx_r1.itemRD?15:-1)}}function AccessControlFormContainerComponent_Conditional_66_Template(rf,ctx){1&rf&&core.nrm(0,"hr")}function AccessControlFormContainerComponent_Conditional_67_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"div",26)(1,"button",36),core.bIt("click",function(){core.eBV(_r5);const ctx_r1=core.XpG();return core.Njj(ctx_r1.reset())}),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"button",37),core.bIt("click",function(){core.eBV(_r5);const ctx_r1=core.XpG();return core.Njj(ctx_r1.submit())}),core.EFF(5),core.nI1(6,"translate"),core.k0s()()}if(2&rf){const ctx_r1=core.XpG();core.R7$(2),core.SpI(" ",core.bMT(3,3,"access-control-cancel")," "),core.R7$(2),core.Y8G("dsBtnDisabled",!ctx_r1.state.item.toggleStatus&&!ctx_r1.state.bitstream.toggleStatus),core.R7$(),core.SpI(" ",core.bMT(6,5,"access-control-execute")," ")}}let AccessControlFormContainerComponent=(()=>{class AccessControlFormContainerComponent2{constructor(bulkAccessConfigService,bulkAccessControlService,selectableListService,modalService,cdr){this.bulkAccessConfigService=bulkAccessConfigService,this.bulkAccessControlService=bulkAccessControlService,this.selectableListService=selectableListService,this.modalService=modalService,this.cdr=cdr,this.showLimitToSpecificBitstreams=!1,this.titleMessage="",this.showSubmit=!0,this.AlertType=alert_type.v,this.state={item:{toggleStatus:!1,accessMode:"replace"},bitstream:{toggleStatus:!1,accessMode:"replace",changesLimit:"all",selectedBitstreams:[]}},this.dropdownData$=this.bulkAccessConfigService.findByName("default").pipe((0,shared_operators.qD)(),(0,operators.Tj)(configRD=>configRD.hasSucceeded?configRD.payload:null),(0,cjs.shareReplay)({refCount:!1,bufferSize:1}))}getFormValue(){return console.log({bitstream:this.bitstreamAccessCmp.getValue(),item:this.itemAccessCmp.getValue(),state:this.state}),{bitstream:this.bitstreamAccessCmp.getValue(),item:this.itemAccessCmp.getValue(),state:this.state}}reset(){this.bitstreamAccessCmp.reset(),this.itemAccessCmp.reset(),this.state={item:{toggleStatus:!1,accessMode:"replace"},bitstream:{toggleStatus:!1,accessMode:"replace",changesLimit:"all",selectedBitstreams:[]}}}submit(){const bitstreamAccess=this.bitstreamAccessCmp.getValue(),itemAccess=this.itemAccessCmp.getValue(),{file}=this.bulkAccessControlService.createPayloadFile({bitstreamAccess,itemAccess,state:this.state});this.bulkAccessControlService.executeScript([this.itemRD.payload.uuid],file).pipe((0,operators.s)(1)).subscribe(res=>{console.log("success",res)})}handleStatusChange(type,active){"bitstream"===type?active?this.bitstreamAccessCmp.enable():this.bitstreamAccessCmp.disable():"item"===type&&(active?this.itemAccessCmp.enable():this.itemAccessCmp.disable())}openSelectBitstreamsModal(item){const ref=this.modalService.open(ItemAccessControlSelectBitstreamsModalComponent);ref.componentInstance.selectedBitstreams=this.state.bitstream.selectedBitstreams,ref.componentInstance.item=item,ref.closed.pipe((0,cjs.concatMap)(()=>this.selectableListService.getSelectableList("item-access-control-select-bitstreams")),(0,operators.s)(1)).subscribe(list=>{this.state.bitstream.selectedBitstreams=list?.selection||[],this.cdr.detectChanges()})}ngOnDestroy(){this.selectableListService.deselectAll("item-access-control-select-bitstreams")}isValid(){return this.bitstreamAccessCmp.isValid()||this.itemAccessCmp.isValid()}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||AccessControlFormContainerComponent2)(core.rXU(bulk_access_config_data_service.BulkAccessConfigDataService),core.rXU(bulk_access_control_service.r),core.rXU(selectable_list_service.K),core.rXU(ng_bootstrap.Bq),core.rXU(core.gRc))}}static{this.\u0275cmp=core.VBU({type:AccessControlFormContainerComponent2,selectors:[["ds-access-control-form-container"]],viewQuery:function(rf,ctx){if(1&rf&&(core.GBs(access_control_form_container_component_c0,7),core.GBs(_c1,7)),2&rf){let _t;core.mGM(_t=core.lsd())&&(ctx.bitstreamAccessCmp=_t.first),core.mGM(_t=core.lsd())&&(ctx.itemAccessCmp=_t.first)}},inputs:{showLimitToSpecificBitstreams:"showLimitToSpecificBitstreams",titleMessage:"titleMessage",itemRD:"itemRD",showSubmit:"showSubmit"},exportAs:["dsAccessControlForm"],standalone:!0,features:[core.aNF],decls:68,vars:62,consts:[["itemAccessCmp",""],["bitstreamAccessCmp",""],[1,"container"],[1,"card","border-0"],[1,"card-body"],[1,"d-block","pb-3",3,"type","content"],[1,"row","mt-5"],[1,"col-12","col-md-6","border-end","d-flex","flex-column","justify-content-between"],[1,"d-flex","align-items-center"],[1,"h3","mb-0","me-4"],[3,"ngModelChange","ariaLabel","ngModel"],[1,"row","mt-3"],[1,"h4","col-12","col-md-3"],[1,"col-12","col-md-8"],[1,"form-check"],["type","radio","name","itemMode","id","itemReplace","value","replace",1,"form-check-input",3,"ngModelChange","disabled","ngModel"],["for","itemReplace",1,"form-check-label"],["type","radio","name","itemMode","id","itemAdd","value","add",1,"form-check-input",3,"ngModelChange","disabled","ngModel"],["for","itemAdd",1,"form-check-label"],[1,"h4","mt-3"],[3,"type","mode","dropdownOptions"],[1,"col-12","col-md-6","d-flex","flex-column","justify-content-between"],["type","radio","name","bitstreamMode","id","bitstreamReplace","value","replace",1,"form-check-input",3,"ngModelChange","disabled","ngModel"],["for","bitstreamReplace",1,"form-check-label"],["type","radio","name","bitstreamMode","id","bitstreamAdd","value","add",1,"form-check-input",3,"ngModelChange","disabled","ngModel"],["for","bitstreamAdd",1,"form-check-label"],[1,"d-flex","justify-content-end"],[1,"col-12"],[1,"h4"],["type","radio","name","changesLimit","id","processAll","value","all",1,"form-check-input",3,"ngModelChange","disabled","ngModel"],["for","processAll",1,"form-check-label"],["type","radio","name","changesLimit","id","processSelected","value","selected",1,"form-check-input","mt-2",3,"ngModelChange","disabled","ngModel"],["for","processSelected",1,"form-check-label"],["type","button",1,"btn","btn-outline-dark","border-0",3,"dsBtnDisabled"],["type","button",1,"btn","btn-outline-dark","border-0",3,"click","dsBtnDisabled"],[1,"fa","fa-search"],["type","button",1,"btn","btn-outline-primary","me-3",3,"click"],["type","submit",1,"btn","btn-primary",3,"click","dsBtnDisabled"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div",2)(1,"div",3)(2,"div",4),core.DNE(3,AccessControlFormContainerComponent_Conditional_3_Template,1,2,"ds-alert",5),core.j41(4,"div",6)(5,"div",7)(6,"div")(7,"div",8)(8,"h2",9),core.EFF(9),core.nI1(10,"translate"),core.k0s(),core.j41(11,"ui-switch",10),core.nI1(12,"translate"),core.mxI("ngModelChange",function($event){return core.eBV(_r1),core.DH7(ctx.state.item.toggleStatus,$event)||(ctx.state.item.toggleStatus=$event),core.Njj($event)}),core.bIt("ngModelChange",function($event){return core.eBV(_r1),core.Njj(ctx.handleStatusChange("item",$event))}),core.k0s()(),core.j41(13,"fieldset",11)(14,"legend",12),core.EFF(15),core.nI1(16,"translate"),core.k0s(),core.j41(17,"div",13)(18,"div",14)(19,"input",15),core.mxI("ngModelChange",function($event){return core.eBV(_r1),core.DH7(ctx.state.item.accessMode,$event)||(ctx.state.item.accessMode=$event),core.Njj($event)}),core.k0s(),core.j41(20,"label",16),core.EFF(21),core.nI1(22,"translate"),core.k0s()(),core.j41(23,"div",14)(24,"input",17),core.mxI("ngModelChange",function($event){return core.eBV(_r1),core.DH7(ctx.state.item.accessMode,$event)||(ctx.state.item.accessMode=$event),core.Njj($event)}),core.k0s(),core.j41(25,"label",18),core.EFF(26),core.nI1(27,"translate"),core.k0s()()()()(),core.j41(28,"div")(29,"h3",19),core.EFF(30),core.nI1(31,"translate"),core.k0s(),core.nrm(32,"ds-access-control-array-form",20,0),core.nI1(34,"async"),core.k0s()(),core.j41(35,"div",21)(36,"div")(37,"div",8)(38,"h2",9),core.EFF(39),core.nI1(40,"translate"),core.k0s(),core.j41(41,"ui-switch",10),core.nI1(42,"translate"),core.mxI("ngModelChange",function($event){return core.eBV(_r1),core.DH7(ctx.state.bitstream.toggleStatus,$event)||(ctx.state.bitstream.toggleStatus=$event),core.Njj($event)}),core.bIt("ngModelChange",function($event){return core.eBV(_r1),core.Njj(ctx.handleStatusChange("bitstream",$event))}),core.k0s()(),core.DNE(43,AccessControlFormContainerComponent_Conditional_43_Template,16,15,"div",11),core.k0s(),core.j41(44,"fieldset",11)(45,"legend",12),core.EFF(46),core.nI1(47,"translate"),core.k0s(),core.j41(48,"div",13)(49,"div",14)(50,"input",22),core.mxI("ngModelChange",function($event){return core.eBV(_r1),core.DH7(ctx.state.bitstream.accessMode,$event)||(ctx.state.bitstream.accessMode=$event),core.Njj($event)}),core.k0s(),core.j41(51,"label",23),core.EFF(52),core.nI1(53,"translate"),core.k0s()(),core.j41(54,"div",14)(55,"input",24),core.mxI("ngModelChange",function($event){return core.eBV(_r1),core.DH7(ctx.state.bitstream.accessMode,$event)||(ctx.state.bitstream.accessMode=$event),core.Njj($event)}),core.k0s(),core.j41(56,"label",25),core.EFF(57),core.nI1(58,"translate"),core.k0s()()()(),core.j41(59,"div")(60,"h3",19),core.EFF(61),core.nI1(62,"translate"),core.k0s(),core.nrm(63,"ds-access-control-array-form",20,1),core.nI1(65,"async"),core.k0s()()(),core.DNE(66,AccessControlFormContainerComponent_Conditional_66_Template,1,0,"hr")(67,AccessControlFormContainerComponent_Conditional_67_Template,7,7,"div",26),core.k0s()()()}if(2&rf){let tmp_16_0,tmp_31_0;core.R7$(3),core.vxM(ctx.titleMessage?3:-1),core.R7$(6),core.SpI(" ",core.bMT(10,32,"access-control-item-header-toggle")," "),core.R7$(2),core.Y8G("ariaLabel",core.bMT(12,34,ctx.state.bitstream.toggleStatus?"access-control-item-toggle.disable":"access-control-item-toggle.enable")),core.R50("ngModel",ctx.state.item.toggleStatus),core.R7$(4),core.SpI(" ",core.bMT(16,36,"access-control-mode")," "),core.R7$(4),core.Y8G("disabled",!ctx.state.item.toggleStatus),core.R50("ngModel",ctx.state.item.accessMode),core.R7$(2),core.SpI(" ",core.bMT(22,38,"access-control-replace-all")," "),core.R7$(3),core.Y8G("disabled",!ctx.state.item.toggleStatus),core.R50("ngModel",ctx.state.item.accessMode),core.R7$(2),core.SpI(" ",core.bMT(27,40,"access-control-add-to-existing")," "),core.R7$(4),core.JRh(core.bMT(31,42,"access-control-access-conditions")),core.R7$(2),core.Y8G("type","item")("mode",ctx.state.item.accessMode)("dropdownOptions",(null==(tmp_16_0=core.bMT(34,44,ctx.dropdownData$))?null:tmp_16_0.itemAccessConditionOptions)||core.lJ4(60,_c2)),core.R7$(7),core.SpI(" ",core.bMT(40,46,"access-control-bitstream-header-toggle")," "),core.R7$(2),core.Y8G("ariaLabel",core.bMT(42,48,ctx.state.bitstream.toggleStatus?"access-control-bitstream-toggle.disable":"access-control-bitstream-toggle.enable")),core.R50("ngModel",ctx.state.bitstream.toggleStatus),core.R7$(2),core.vxM(ctx.showLimitToSpecificBitstreams?43:-1),core.R7$(3),core.SpI(" ",core.bMT(47,50,"access-control-mode")," "),core.R7$(4),core.Y8G("disabled",!ctx.state.bitstream.toggleStatus),core.R50("ngModel",ctx.state.bitstream.accessMode),core.R7$(2),core.SpI(" ",core.bMT(53,52,"access-control-replace-all")," "),core.R7$(3),core.Y8G("disabled",!ctx.state.bitstream.toggleStatus),core.R50("ngModel",ctx.state.bitstream.accessMode),core.R7$(2),core.SpI(" ",core.bMT(58,54,"access-control-add-to-existing")," "),core.R7$(4),core.JRh(core.bMT(62,56,"access-control-access-conditions")),core.R7$(2),core.Y8G("type","bitstream")("mode",ctx.state.bitstream.accessMode)("dropdownOptions",(null==(tmp_31_0=core.bMT(65,58,ctx.dropdownData$))?null:tmp_31_0.bitstreamAccessConditionOptions)||core.lJ4(61,_c2)),core.R7$(3),core.vxM(ctx.showSubmit?66:-1),core.R7$(),core.vxM(ctx.showSubmit?67:-1)}},dependencies:[AccessControlArrayFormComponent,alert_component.C,common.Jj,btn_disabled_directive.A,fesm2022_forms.YN,fesm2022_forms.me,fesm2022_forms.Fm,fesm2022_forms.BC,fesm2022_forms.vS,ngx_translate_core.h,ngx_translate_core.D9,ngx_ui_switch.z,ngx_ui_switch.S],styles:["fieldset[_ngcontent-%COMP%] > legend.col-12.col-md-3[_ngcontent-%COMP%]{width:100%}"]})}}return AccessControlFormContainerComponent2})()},46549:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>BulkAccessControlService});var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(60444),_core_data_processes_script_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(83183),_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(39022),_process_page_process_page_routing_paths__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(54663),_empty_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2794),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(76623),_angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(25376),_angular_router__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(18134),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(2385);let BulkAccessControlService=(()=>{class BulkAccessControlService2{constructor(notificationsService,router,scriptService,translationService){this.notificationsService=notificationsService,this.router=router,this.scriptService=scriptService,this.translationService=translationService}createPayloadFile(payload){const content=convertToBulkAccessControlFileModel(payload),blob=new Blob([JSON.stringify(content,null,2)],{type:"application/json"}),file=new File([blob],"data.json",{type:"application/json"});return{url:URL.createObjectURL(file),file}}executeScript(uuids,file){console.log("execute",{uuids,file});const params=[{name:"-f",value:file.name}];return uuids.forEach(uuid=>{params.push({name:"-u",value:uuid})}),this.scriptService.invoke("bulk-access-control",params,[file]).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.Tj)(rd=>{if(rd.hasSucceeded){const title=this.translationService.get("process.new.notification.success.title"),content=this.translationService.get("process.new.notification.success.content");return this.notificationsService.success(title,content),(0,_empty_util__WEBPACK_IMPORTED_MODULE_4__.hj)(rd.payload)&&this.router.navigateByUrl((0,_process_page_process_page_routing_paths__WEBPACK_IMPORTED_MODULE_5__.yJ)(rd.payload.processId)),!0}{const title=this.translationService.get("process.new.notification.error.title"),content=this.translationService.get("process.new.notification.error.content");return this.notificationsService.error(title,content),!1}}))}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||BulkAccessControlService2)(_angular_core__WEBPACK_IMPORTED_MODULE_6__.KVO(_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_2__.I),_angular_core__WEBPACK_IMPORTED_MODULE_6__.KVO(_angular_router__WEBPACK_IMPORTED_MODULE_7__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_6__.KVO(_core_data_processes_script_data_service__WEBPACK_IMPORTED_MODULE_0__.ScriptDataService),_angular_core__WEBPACK_IMPORTED_MODULE_6__.KVO(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_8__.c$))}}static{this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_6__.jDH({token:BulkAccessControlService2,factory:BulkAccessControlService2.\u0275fac,providedIn:"root"})}}return BulkAccessControlService2})();const convertToBulkAccessControlFileModel=payload=>{const finalPayload={},bitstreamEnabled=payload.state.bitstream.toggleStatus;if(payload.state.item.toggleStatus&&(finalPayload.item={mode:payload.state.item.accessMode,accessConditions:payload.itemAccess}),bitstreamEnabled){const constraints={uuid:[]};bitstreamEnabled&&"selected"===payload.state.bitstream.changesLimit&&(constraints.uuid=payload.state.bitstream.selectedBitstreams.map(x=>x.id)),finalPayload.bitstream={constraints,mode:payload.state.bitstream.accessMode,accessConditions:payload.bitstreamAccess}}return finalPayload}},31258:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{W:()=>ComcolMetadataComponent});var rxjs_operators__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(60444),_core_data_comcol_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(34211),_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(39022),_empty_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2794),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(76623),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25376),_angular_router__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(18134),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(2385);let ComcolMetadataComponent=(()=>{class ComcolMetadataComponent2{constructor(dsoDataService,router,route,notificationsService,translate){this.dsoDataService=dsoDataService,this.router=router,this.route=route,this.notificationsService=notificationsService,this.translate=translate}ngOnInit(){this.dsoRD$=this.route.parent.data.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.Tj)(data=>data.dso))}onSubmit(event){(0,_empty_util__WEBPACK_IMPORTED_MODULE_4__.Im)(event.operations)?this.router.navigate([this.frontendURL,event.dso.uuid]):this.dsoDataService.patch(event.dso,event.operations).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.qD)()).subscribe(response=>{response.hasSucceeded?(this.router.navigate([this.frontendURL,event.dso.uuid]),this.notificationsService.success(null,this.translate.get(`${this.type.value}.edit.notifications.success`))):this.notificationsService.error(null,this.translate.get(403===response.statusCode?`${this.type.value}.edit.notifications.unauthorized`:`${this.type.value}.edit.notifications.error`))})}navigateToHomePage(){this.dsoRD$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.yd)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_3__.s)(1)).subscribe(dsoRD=>{this.router.navigate([this.frontendURL+dsoRD.payload.id])})}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ComcolMetadataComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_core_data_comcol_data_service__WEBPACK_IMPORTED_MODULE_0__.x),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_6__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_6__.nX),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_2__.I),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_7__.c$))}}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_5__.VBU({type:ComcolMetadataComponent2,selectors:[["ds-comcol-metadata"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_5__.aNF],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2})}}return ComcolMetadataComponent2})()},64534:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{J:()=>ComcolRoleComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(87514),_angular_router__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(18134),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2385),rxjs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(9238),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(60444),_access_control_access_control_routing_paths__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(55990),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(11481),_core_data_request_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(64806),_core_eperson_group_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(14557),_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(39022),_alert_alert_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6213),_confirmation_modal_confirmation_modal_component__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(3849),_empty_util__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(2794),_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(18869),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(76623),_utils_has_no_value_pipe__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(23219),_utils_var_directive__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(17543),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(25376),_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(87969);function ComcolRoleComponent_div_2_Conditional_11_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_8__.nrm(0,"ds-loading")}function ComcolRoleComponent_div_2_Conditional_14_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(2,1,"comcol-role.edit.no-group")," "))}function ComcolRoleComponent_div_2_Conditional_16_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(2,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()),2&rf){let tmp_3_0;const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG(2);_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(3,3,"comcol-role.edit."+(null==(tmp_3_0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(2,1,ctx_r0.comcolRole$))?null:tmp_3_0.name)+".anonymous-group")," ")}}function ComcolRoleComponent_div_2_Conditional_18_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"a",7),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()),2&rf){const group_r2=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG().ngVar,ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("routerLink",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(1,2,ctx_r0.editGroupLink$)),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.SpI(" ",ctx_r0.dsoNameService.getName(group_r2)," ")}}function ComcolRoleComponent_div_2_Conditional_21_Template(rf,ctx){if(1&rf){const _r3=_angular_core__WEBPACK_IMPORTED_MODULE_8__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"button",12),_angular_core__WEBPACK_IMPORTED_MODULE_8__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_8__.eBV(_r3);const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_8__.Njj(ctx_r0.create())}),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nrm(1,"i",13),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(3,1,"comcol-role.edit.create")," "))}function ComcolRoleComponent_div_2_Conditional_23_Template(rf,ctx){if(1&rf){const _r4=_angular_core__WEBPACK_IMPORTED_MODULE_8__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"button",14),_angular_core__WEBPACK_IMPORTED_MODULE_8__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_8__.eBV(_r4);const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_8__.Njj(ctx_r0.create())}),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(2,1,"comcol-role.edit.restrict")," "))}function ComcolRoleComponent_div_2_Conditional_25_Template(rf,ctx){if(1&rf){const _r5=_angular_core__WEBPACK_IMPORTED_MODULE_8__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"button",15),_angular_core__WEBPACK_IMPORTED_MODULE_8__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_8__.eBV(_r5);const group_r2=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG().ngVar,ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG();return _angular_core__WEBPACK_IMPORTED_MODULE_8__.Njj(ctx_r0.confirmDelete(ctx_r0.dsoNameService.getName(group_r2)))}),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nrm(1,"i",16),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(3,1,"comcol-role.edit.delete")," "))}function ComcolRoleComponent_div_2_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div",1)(1,"h2",2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(4,"div",3)(5,"ds-alert",4),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(6),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(7,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(8,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(9,"div",5)(10,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(11,ComcolRoleComponent_div_2_Conditional_11_Template,1,0,"ds-loading"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(12,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(13,"dsHasNoValue"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(14,ComcolRoleComponent_div_2_Conditional_14_Template,3,3,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(15,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(16,ComcolRoleComponent_div_2_Conditional_16_Template,4,5,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(17,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(18,ComcolRoleComponent_div_2_Conditional_18_Template,3,4,"a",7),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(19,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(20,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(21,ComcolRoleComponent_div_2_Conditional_21_Template,4,3,"button",9),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(22,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(23,ComcolRoleComponent_div_2_Conditional_23_Template,3,3,"button",10),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(24,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(25,ComcolRoleComponent_div_2_Conditional_25_Template,4,3,"button",11),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(26,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()()()),2&rf){let tmp_4_0;const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(3,10,ctx_r0.roleName$)," "),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("type","alert-info"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(8,14,"comcol-role.edit."+(null==(tmp_4_0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(7,12,ctx_r0.comcolRole$))?null:tmp_4_0.name)+".description")),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(5),_angular_core__WEBPACK_IMPORTED_MODULE_8__.vxM(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(13,18,_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(12,16,ctx_r0.groupRD$))?11:-1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_8__.vxM(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(15,20,ctx_r0.hasNoGroup$)?14:-1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.vxM(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(17,22,ctx_r0.hasAnonymousGroup$)?16:-1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.vxM(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(19,24,ctx_r0.hasCustomGroup$)?18:-1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_8__.vxM(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(22,26,ctx_r0.hasNoGroup$)?21:-1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.vxM(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(24,28,ctx_r0.hasAnonymousGroup$)?23:-1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.vxM(_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(26,30,ctx_r0.hasCustomGroup$)?25:-1)}}let ComcolRoleComponent=(()=>{class ComcolRoleComponent2{constructor(requestService,groupService,notificationsService,translateService,dsoNameService,modalService){this.requestService=requestService,this.groupService=groupService,this.notificationsService=notificationsService,this.translateService=translateService,this.dsoNameService=dsoNameService,this.modalService=modalService,this.comcolRole$=new rxjs__WEBPACK_IMPORTED_MODULE_9__.BehaviorSubject(void 0)}get groupLink(){return this.comcolRole.href}set comcolRole(newRole){this.comcolRole$.next(newRole)}get comcolRole(){return this.comcolRole$.getValue()}create(){this.groupService.createComcolGroup(this.dso,this.comcolRole.name,this.groupLink).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.qD)()).subscribe(rd=>{rd.hasSucceeded?(this.groupService.clearGroupsRequests(),this.requestService.setStaleByHrefSubstring(this.comcolRole.href)):this.notificationsService.error(this.roleName$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.nx)(role=>this.translateService.get("comcol-role.edit.create.error.title",{role}))),`${rd.statusCode} ${rd.errorMessage}`)})}delete(){this.groupService.deleteComcolGroup(this.groupLink).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.qD)()).subscribe(rd=>{rd.hasSucceeded?(this.groupService.clearGroupsRequests(),this.requestService.setStaleByHrefSubstring(this.comcolRole.href)):this.notificationsService.error(this.roleName$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.nx)(role=>this.translateService.get("comcol-role.edit.delete.error.title",{role}))),rd.errorMessage)})}ngOnInit(){this.groupRD$=this.comcolRole$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.pb)(role=>(0,_empty_util__WEBPACK_IMPORTED_MODULE_11__.a4)(role)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.nx)(role=>this.groupService.findByHref(role.href)),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.bD)()),this.group$=this.groupRD$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.Tj)(rd=>{if((0,_empty_util__WEBPACK_IMPORTED_MODULE_11__.a4)(rd.payload))return rd.payload})),this.editGroupLink$=this.group$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.Tj)(group=>(0,_empty_util__WEBPACK_IMPORTED_MODULE_11__.a4)(group)?(0,_access_control_access_control_routing_paths__WEBPACK_IMPORTED_MODULE_0__.xl)(group.id):void 0)),this.hasNoGroup$=this.group$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.Tj)(group=>(0,_empty_util__WEBPACK_IMPORTED_MODULE_11__.Tn)(group))),this.hasAnonymousGroup$=this.group$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.Tj)(group=>(0,_empty_util__WEBPACK_IMPORTED_MODULE_11__.a4)(group)&&"Anonymous"===group.name)),this.hasCustomGroup$=this.group$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.Tj)(group=>(0,_empty_util__WEBPACK_IMPORTED_MODULE_11__.a4)(group)&&"Anonymous"!==group.name)),this.roleName$=this.translateService.get(`comcol-role.edit.${this.comcolRole.name}.name`)}confirmDelete(groupName){const modalRef=this.modalService.open(_confirmation_modal_confirmation_modal_component__WEBPACK_IMPORTED_MODULE_12__.M);modalRef.componentInstance.name=groupName,modalRef.componentInstance.headerLabel="comcol-role.edit.delete.modal.header",modalRef.componentInstance.infoLabel="comcol-role.edit.delete.modal.info",modalRef.componentInstance.cancelLabel="comcol-role.edit.delete.modal.cancel",modalRef.componentInstance.confirmLabel="comcol-role.edit.delete.modal.confirm",modalRef.componentInstance.brandColor="danger",modalRef.componentInstance.confirmIcon="fas fa-trash";const modalSub=modalRef.componentInstance.response.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.QK)(modalRef.closed)).subscribe(result=>{!0===result&&this.delete()});modalRef.result.then().finally(()=>{modalRef.close(),modalSub&&!modalSub.closed&&modalSub.unsubscribe()})}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ComcolRoleComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_data_request_service__WEBPACK_IMPORTED_MODULE_2__.B),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_eperson_group_data_service__WEBPACK_IMPORTED_MODULE_3__.GroupDataService),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_7__.I),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_1__.f),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_ng_bootstrap_ng_bootstrap__WEBPACK_IMPORTED_MODULE_14__.Bq))}}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_8__.VBU({type:ComcolRoleComponent2,selectors:[["ds-comcol-role"]],inputs:{dso:"dso",comcolRole:"comcolRole"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_8__.aNF],decls:4,vars:8,consts:[["class","card-body d-flex flex-column",4,"ngVar"],[1,"card-body","d-flex","flex-column"],[1,"h4","w-100"],[1,"mt-2","mb-2"],[3,"type"],[1,"d-flex","flex-md-row","justify-content-between","flex-column"],[1,"w-100","d-flex","align-items-center"],[3,"routerLink"],[1,"flex-shrink-0"],[1,"btn","btn-primary","create"],[1,"btn","btn-primary","restrict"],[1,"btn","btn-danger","delete"],[1,"btn","btn-primary","create",3,"click"],["aria-hidden","true",1,"fas","fa-plus"],[1,"btn","btn-primary","restrict",3,"click"],[1,"btn","btn-danger","delete",3,"click"],["aria-hidden","true",1,"fas","fa-trash"]],template:function(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(1,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(2,ComcolRoleComponent_div_2_Template,27,32,"div",0),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(3,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()),2&rf){let tmp_0_0;_angular_core__WEBPACK_IMPORTED_MODULE_8__.ZvI("card p-2 mb-3 mt-3 custom-alignment ",null==(tmp_0_0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(1,4,ctx.comcolRole$))?null:tmp_0_0.name,""),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(3,6,ctx.group$))}},dependencies:[_alert_alert_component__WEBPACK_IMPORTED_MODULE_5__.C,_angular_common__WEBPACK_IMPORTED_MODULE_15__.Jj,_utils_has_no_value_pipe__WEBPACK_IMPORTED_MODULE_16__.n,_angular_router__WEBPACK_IMPORTED_MODULE_17__.Wk,_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_6__.v,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_13__.D9,_utils_var_directive__WEBPACK_IMPORTED_MODULE_18__.r]})}}return ComcolRoleComponent2})()},80249:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{M:()=>EditComColPageComponent});var rxjs_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(60444),_empty_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2794),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(25376),_angular_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(18134);let EditComColPageComponent=(()=>{class EditComColPageComponent2{constructor(router,route){this.router=router,this.route=route,this.router.events.subscribe(()=>this.initPageParamsByRoute())}ngOnInit(){this.initPageParamsByRoute(),this.pages=this.route.routeConfig.children.map(child=>child.path).filter(path=>(0,_empty_util__WEBPACK_IMPORTED_MODULE_0__.hj)(path)),this.dsoRD$=this.route.data.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_1__.Tj)(data=>data.dso))}getPageUrl(dso){return this.router.url}initPageParamsByRoute(){this.currentPage=this.route.snapshot.firstChild.routeConfig.path,this.hideReturnButton=this.route.routeConfig.children.find(child=>child.path===this.currentPage).data.hideReturnButton}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||EditComColPageComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_2__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_3__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_2__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_3__.nX))}}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_2__.VBU({type:EditComColPageComponent2,selectors:[["ds-edit-comcol"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_2__.aNF],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2})}}return EditComColPageComponent2})()},72004:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>DSpaceObjectSelect});class DSpaceObjectSelect{}},44631:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>ObjectSelectComponent});var core=__webpack_require__(25376),cjs=__webpack_require__(9238),operators=__webpack_require__(60444),dso_name_service=__webpack_require__(11481),authorization_data_service=(__webpack_require__(60795),__webpack_require__(76509)),ngrx_store=(__webpack_require__(86583),__webpack_require__(22609)),empty_util=__webpack_require__(2794),object_select_actions=__webpack_require__(45545);const objectSelectionsStateSelector=state=>state.objectSelection,objectSelectionListStateSelector=state=>state.objectSelection;let ObjectSelectService=(()=>{class ObjectSelectService2{constructor(store,appStore){this.store=store,this.appStore=appStore}getSelected(key,id){return this.store.select(function selectionByKeyAndIdSelector(key,id){return function keyAndIdSelector(key,id){return(0,ngrx_store.Mz)(objectSelectionsStateSelector,state=>{if((0,empty_util.a4)(state)&&(0,empty_util.a4)(state[key]))return state[key][id]})}(key,id)}(key,id)).pipe((0,operators.Tj)(object=>!!object&&object.checked))}getAllSelected(key){return this.appStore.select(objectSelectionListStateSelector).pipe((0,operators.Tj)(state=>(0,empty_util.a4)(state[key])?Object.keys(state[key]).filter(id=>state[key][id].checked):[]))}initialSelect(key,id){this.store.dispatch(new object_select_actions.u7(key,id))}initialDeselect(key,id){this.store.dispatch(new object_select_actions.NE(key,id))}select(key,id){this.store.dispatch(new object_select_actions.AS(key,id))}deselect(key,id){this.store.dispatch(new object_select_actions.Vu(key,id))}switch(key,id){this.store.dispatch(new object_select_actions.YE(key,id))}reset(key){this.store.dispatch(new object_select_actions.bx(key,null))}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ObjectSelectService2)(core.KVO(ngrx_store.il),core.KVO(ngrx_store.il))}}static{this.\u0275prov=core.jDH({token:ObjectSelectService2,factory:ObjectSelectService2.\u0275fac,providedIn:"root"})}}return ObjectSelectService2})(),ObjectSelectComponent=(()=>{class ObjectSelectComponent2{constructor(objectSelectService,authorizationService,dsoNameService){this.objectSelectService=objectSelectService,this.authorizationService=authorizationService,this.dsoNameService=dsoNameService,this.cancel=new core.bkB,this.confirm=new core.bkB,this.dangerConfirm=!1}ngOnInit(){this.selectedIds$=this.objectSelectService.getAllSelected(this.key)}ngOnDestroy(){this.objectSelectService.reset(this.key)}switch(id){this.objectSelectService.switch(this.key,id)}getSelected(id){return this.objectSelectService.getSelected(this.key,id)}canSelect(item){return this.featureId?this.authorizationService.isAuthorized(this.featureId,item.self).pipe((0,operators.ql)(!1)):(0,cjs.of)(!0)}confirmSelected(){this.selectedIds$.pipe((0,operators.s)(1)).subscribe(ids=>{this.confirm.emit(ids),this.objectSelectService.reset(this.key)})}onCancel(){this.cancel.emit()}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ObjectSelectComponent2)(core.rXU(ObjectSelectService),core.rXU(authorization_data_service.AuthorizationDataService),core.rXU(dso_name_service.f))}}static{this.\u0275cmp=core.VBU({type:ObjectSelectComponent2,selectors:[["ds-object-select-abstract"]],inputs:{key:"key",dsoRD$:"dsoRD$",paginationOptions:"paginationOptions",sortOptions:"sortOptions",confirmButton:"confirmButton",featureId:"featureId",cancelButton:"cancelButton",dangerConfirm:"dangerConfirm"},outputs:{cancel:"cancel",confirm:"confirm"},standalone:!0,features:[core.aNF],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2})}}return ObjectSelectComponent2})()},67149:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>ResourcePolicyCreateComponent});var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2385),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9238),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(60444),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11481),_core_resource_policy_resource_policy_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(23390),_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(39022),_item_page_edit_item_page_edit_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(55567),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(76623),_form_resource_policy_form_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(52260),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(25376),_angular_router__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(18134);let ResourcePolicyCreateComponent=(()=>{class ResourcePolicyCreateComponent2{constructor(dsoNameService,notificationsService,resourcePolicyService,route,router,translate){this.dsoNameService=dsoNameService,this.notificationsService=notificationsService,this.resourcePolicyService=resourcePolicyService,this.route=route,this.router=router,this.translate=translate,this.processing$=new rxjs__WEBPACK_IMPORTED_MODULE_5__.BehaviorSubject(!1)}ngOnInit(){this.route.data.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.Tj)(data=>data),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.s)(1)).subscribe(data=>{this.targetResourceUUID=data.resourcePolicyTarget.payload.id,this.targetResourceName=this.dsoNameService.getName(data.resourcePolicyTarget.payload)})}isProcessing(){return this.processing$.asObservable()}redirectToAuthorizationsPage(){this.router.navigate([`../../${_item_page_edit_item_page_edit_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_7__.K4}`],{relativeTo:this.route})}createResourcePolicy(event){let response$;this.processing$.next(!0),response$="eperson"===event.target.type?this.resourcePolicyService.create(event.object,this.targetResourceUUID,event.target.uuid):this.resourcePolicyService.create(event.object,this.targetResourceUUID,null,event.target.uuid),response$.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.qD)()).subscribe(responseRD=>{this.processing$.next(!1),responseRD.hasSucceeded?(this.notificationsService.success(null,this.translate.get("resource-policies.create.page.success.content")),this.redirectToAuthorizationsPage()):this.notificationsService.error(null,this.translate.get("resource-policies.create.page.failure.content"))})}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ResourcePolicyCreateComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_0__.f),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_3__.I),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_resource_policy_resource_policy_data_service__WEBPACK_IMPORTED_MODULE_1__.ResourcePolicyDataService),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_9__.nX),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_9__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.c$))}}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_8__.VBU({type:ResourcePolicyCreateComponent2,selectors:[["ds-resource-policy-create"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_8__.aNF],decls:5,vars:5,consts:[[1,"container"],[1,"mb-3"],[3,"reset","submit","isProcessing"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div",0)(1,"h1",1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(4,"ds-resource-policy-form",2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.bIt("reset",function(){return ctx.redirectToAuthorizationsPage()})("submit",function($event){return ctx.createResourcePolicy($event)}),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Lme("",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(3,3,"resource-policies.create.page.heading")," ",ctx.targetResourceName,""),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("isProcessing",ctx.isProcessing()))},dependencies:[_form_resource_policy_form_component__WEBPACK_IMPORTED_MODULE_4__.y,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.D9],encapsulation:2})}}return ResourcePolicyCreateComponent2})()},79537:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{_:()=>ResourcePolicyEditComponent});var _ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2385),rxjs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9238),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(60444),_core_resource_policy_models_resource_policy_resource_type__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(10446),_core_resource_policy_resource_policy_data_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(23390),_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(39022),_item_page_edit_item_page_edit_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(55567),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(76623),_form_resource_policy_form_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(52260),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(25376),_angular_router__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(18134);let ResourcePolicyEditComponent=(()=>{class ResourcePolicyEditComponent2{constructor(notificationsService,resourcePolicyService,route,router,translate){this.notificationsService=notificationsService,this.resourcePolicyService=resourcePolicyService,this.route=route,this.router=router,this.translate=translate,this.processing$=new rxjs__WEBPACK_IMPORTED_MODULE_5__.BehaviorSubject(!1)}ngOnInit(){this.route.data.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.Tj)(data=>data),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.s)(1)).subscribe(data=>{this.resourcePolicy=data.resourcePolicy.payload})}isProcessing(){return this.processing$.asObservable()}redirectToAuthorizationsPage(){this.router.navigate([`../../${_item_page_edit_item_page_edit_item_page_routing_paths__WEBPACK_IMPORTED_MODULE_7__.K4}`],{relativeTo:this.route})}updateResourcePolicy(event){this.processing$.next(!0);const updatedObject=Object.assign({},event.object,{id:this.resourcePolicy.id,type:_core_resource_policy_models_resource_policy_resource_type__WEBPACK_IMPORTED_MODULE_0__.O.value,_links:this.resourcePolicy._links}),updateTargetSucceeded$=event.updateTarget?this.resourcePolicyService.updateTarget(this.resourcePolicy.id,this.resourcePolicy._links.self.href,event.target.uuid,event.target.type).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.Tj)(responseRD=>responseRD&&responseRD.hasSucceeded)):(0,rxjs__WEBPACK_IMPORTED_MODULE_5__.of)(!0),updateResourcePolicySucceeded$=this.resourcePolicyService.update(updatedObject).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_2__.qD)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.Tj)(responseRD=>responseRD&&responseRD.hasSucceeded));(0,rxjs__WEBPACK_IMPORTED_MODULE_5__.combineLatest)([updateTargetSucceeded$,updateResourcePolicySucceeded$]).subscribe(([updateTargetSucceeded,updateResourcePolicySucceeded])=>{this.processing$.next(!1),updateTargetSucceeded&&updateResourcePolicySucceeded?(this.notificationsService.success(null,this.translate.get("resource-policies.edit.page.success.content")),this.redirectToAuthorizationsPage()):this.notificationsService.error(null,this.translate.get(updateResourcePolicySucceeded?"resource-policies.edit.page.target-failure.content":updateTargetSucceeded?"resource-policies.edit.page.other-failure.content":"resource-policies.edit.page.failure.content"))})}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ResourcePolicyEditComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_3__.I),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_resource_policy_resource_policy_data_service__WEBPACK_IMPORTED_MODULE_1__.ResourcePolicyDataService),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_9__.nX),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_9__.Ix),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.c$))}}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_8__.VBU({type:ResourcePolicyEditComponent2,selectors:[["ds-resource-policy-edit"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_8__.aNF],decls:5,vars:6,consts:[[1,"container"],[1,"mb-3"],[3,"reset","submit","resourcePolicy","isProcessing"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(0,"div",0)(1,"h1",1),_angular_core__WEBPACK_IMPORTED_MODULE_8__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_8__.j41(4,"ds-resource-policy-form",2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.bIt("reset",function(){return ctx.redirectToAuthorizationsPage()})("submit",function($event){return ctx.updateResourcePolicy($event)}),_angular_core__WEBPACK_IMPORTED_MODULE_8__.k0s()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Lme("",_angular_core__WEBPACK_IMPORTED_MODULE_8__.bMT(3,4,"resource-policies.edit.page.heading")," ",ctx.resourcePolicy.id,""),_angular_core__WEBPACK_IMPORTED_MODULE_8__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("resourcePolicy",ctx.resourcePolicy)("isProcessing",ctx.isProcessing()))},dependencies:[_form_resource_policy_form_component__WEBPACK_IMPORTED_MODULE_4__.y,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_10__.D9],encapsulation:2})}}return ResourcePolicyEditComponent2})()},52260:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>ResourcePolicyFormComponent});var common=__webpack_require__(87514),core=__webpack_require__(25376),ng_bootstrap=__webpack_require__(87969),fesm2020_core=__webpack_require__(19519),ngx_translate_core=__webpack_require__(2385),cjs=__webpack_require__(9238),operators=__webpack_require__(60444),dso_name_service=__webpack_require__(11481),request_service=__webpack_require__(64806),eperson_data_service=__webpack_require__(15318),group_data_service=__webpack_require__(14557),resource_policy_model=__webpack_require__(20568),resource_policy_resource_type=__webpack_require__(10446),shared_operators=__webpack_require__(39022),btn_disabled_directive=__webpack_require__(69919),date_util=__webpack_require__(13651),empty_util=__webpack_require__(2794),eperson_group_list_component=__webpack_require__(65344),ds_dynamic_input_model=__webpack_require__(72528),ds_dynamic_textarea_model=__webpack_require__(46946),form_component=__webpack_require__(27790),form_service=__webpack_require__(83148),action_type_model=__webpack_require__(6188),policy_type_model=__webpack_require__(47052);const policyTypeList=[{label:policy_type_model.t.TYPE_SUBMISSION,value:policy_type_model.t.TYPE_SUBMISSION},{label:policy_type_model.t.TYPE_WORKFLOW,value:policy_type_model.t.TYPE_WORKFLOW},{label:policy_type_model.t.TYPE_INHERITED,value:policy_type_model.t.TYPE_INHERITED},{label:policy_type_model.t.TYPE_CUSTOM,value:policy_type_model.t.TYPE_CUSTOM}],policyActionList=[{label:action_type_model.X.READ.toString(),value:action_type_model.X.READ},{label:action_type_model.X.WRITE.toString(),value:action_type_model.X.WRITE},{label:action_type_model.X.REMOVE.toString(),value:action_type_model.X.REMOVE},{label:action_type_model.X.ADMIN.toString(),value:action_type_model.X.ADMIN},{label:action_type_model.X.DELETE.toString(),value:action_type_model.X.DELETE},{label:action_type_model.X.WITHDRAWN_READ.toString(),value:action_type_model.X.WITHDRAWN_READ},{label:action_type_model.X.DEFAULT_BITSTREAM_READ.toString(),value:action_type_model.X.DEFAULT_BITSTREAM_READ},{label:action_type_model.X.DEFAULT_ITEM_READ.toString(),value:action_type_model.X.DEFAULT_ITEM_READ}],RESOURCE_POLICY_FORM_NAME_CONFIG={id:"name",label:"resource-policies.form.name.label",maxLength:30,hint:"resource-policies.form.name.hint",metadataFields:[],repeatable:!1,submissionId:"",hasSelectableMetadata:!1},RESOURCE_POLICY_FORM_DESCRIPTION_CONFIG={id:"description",label:"resource-policies.form.description.label",metadataFields:[],repeatable:!1,rows:10,submissionId:"",hasSelectableMetadata:!1},RESOURCE_POLICY_FORM_POLICY_TYPE_CONFIG={id:"policyType",label:"resource-policies.form.policy-type.label",options:policyTypeList,required:!0,validators:{required:null},errorMessages:{required:"resource-policies.form.policy-type.required"}},RESOURCE_POLICY_FORM_ACTION_TYPE_CONFIG={id:"action",label:"resource-policies.form.action-type.label",options:policyActionList,required:!0,validators:{required:null},errorMessages:{required:"resource-policies.form.action-type.required"}},RESOURCE_POLICY_FORM_DATE_GROUP_CONFIG={id:"date",group:[]},RESOURCE_POLICY_FORM_DATE_GROUP_LAYOUT={element:{control:"row"}},RESOURCE_POLICY_FORM_START_DATE_CONFIG={id:"start",label:"resource-policies.form.date.start.label",placeholder:"resource-policies.form.date.start.label",inline:!1,toggleIcon:"far fa-calendar-alt"},RESOURCE_POLICY_FORM_START_DATE_LAYOUT={element:{container:"p-0",label:"col-form-label"},grid:{host:"col-md-6"}},RESOURCE_POLICY_FORM_END_DATE_CONFIG={id:"end",label:"resource-policies.form.date.end.label",placeholder:"resource-policies.form.date.end.label",inline:!1,toggleIcon:"far fa-calendar-alt"},RESOURCE_POLICY_FORM_END_DATE_LAYOUT={element:{container:"p-0",label:"col-form-label"},grid:{host:"col-md-6"}},_c0=["content"];function ResourcePolicyFormComponent_Conditional_1_Template(rf,ctx){if(1&rf&&core.nrm(0,"ds-form",3,2),2&rf){const ctx_r1=core.XpG();core.Y8G("formId",ctx_r1.formId)("formModel",ctx_r1.formModel)("displaySubmit",!1)("displayCancel",!1)}}function ResourcePolicyFormComponent_ng_template_14_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"ds-eperson-group-list",16),core.bIt("select",function($event){core.eBV(_r3);const ctx_r1=core.XpG();return core.Njj(ctx_r1.updateObjectSelected($event,!0))}),core.k0s()}}function ResourcePolicyFormComponent_ng_template_19_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"ds-eperson-group-list",17),core.bIt("select",function($event){core.eBV(_r4);const ctx_r1=core.XpG();return core.Njj(ctx_r1.updateObjectSelected($event,!1))}),core.k0s()}2&rf&&core.Y8G("isListOfEPerson",!1)}function ResourcePolicyFormComponent_Conditional_32_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",18),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"submission.workflow.tasks.generic.processing")," "))}function ResourcePolicyFormComponent_Conditional_34_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"form.submit")," "))}function ResourcePolicyFormComponent_ng_template_36_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"div",19)(1,"h4",20),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"button",21),core.bIt("click",function(){const modal_r6=core.eBV(_r5).$implicit;return core.Njj(modal_r6.close())}),core.k0s()(),core.j41(5,"div",22)(6,"div",23)(7,"div",24),core.nrm(8,"i",25),core.k0s(),core.j41(9,"div"),core.nrm(10,"p",26),core.nI1(11,"translate"),core.nrm(12,"p",27),core.nI1(13,"translate"),core.k0s()()(),core.j41(14,"div",28)(15,"button",29),core.bIt("click",function(){const modal_r6=core.eBV(_r5).$implicit;return core.Njj(modal_r6.close())}),core.EFF(16),core.nI1(17,"translate"),core.k0s()()}if(2&rf){const ctx_r1=core.XpG();core.R7$(2),core.JRh(core.bMT(3,4,"resource-policies.form.eperson-group-list.modal.header")),core.R7$(8),core.Y8G("innerHTML",core.bMT(11,6,"eperson"===ctx_r1.navActiveId?"resource-policies.form.eperson-group-list.modal.text1.toGroup":"resource-policies.form.eperson-group-list.modal.text1.toEPerson"),core.npT),core.R7$(2),core.Y8G("innerHTML",core.bMT(13,8,"resource-policies.form.eperson-group-list.modal.text2"),core.npT),core.R7$(4),core.JRh(core.bMT(17,10,"resource-policies.form.eperson-group-list.modal.close"))}}let ResourcePolicyFormComponent=(()=>{class ResourcePolicyFormComponent2{constructor(dsoNameService,ePersonService,formService,groupService,requestService,modalService){this.dsoNameService=dsoNameService,this.ePersonService=ePersonService,this.formService=formService,this.groupService=groupService,this.requestService=requestService,this.modalService=modalService,this.isProcessing=(0,cjs.of)(!1),this.reset=new core.bkB,this.submit=new core.bkB,this.resourcePolicyTargetName$=new cjs.BehaviorSubject(""),this.subs=[],this.resourcePolicyTargetUpdated=!1}ngOnInit(){if(this.isActive=!0,this.formId=this.formService.getUniqueId("resource-policy-form"),this.formModel=this.buildResourcePolicyForm(),this.isBeingEdited()){const epersonRD$=this.ePersonService.findByHref(this.resourcePolicy._links.eperson.href,!1).pipe((0,shared_operators.yd)()),groupRD$=this.groupService.findByHref(this.resourcePolicy._links.group.href,!1).pipe((0,shared_operators.yd)()),dsoRD$=(0,cjs.combineLatest)([epersonRD$,groupRD$]).pipe((0,operators.Tj)(rdArr=>rdArr.find(rd=>(0,empty_util.hj)(rd.payload))),(0,empty_util.Az)());this.subs.push(dsoRD$.pipe((0,operators.pb)(()=>this.isActive)).subscribe(dsoRD=>{this.resourcePolicyGrant=dsoRD.payload,this.navActiveId=String(dsoRD.payload.type),this.resourcePolicyTargetName$.next(this.getResourcePolicyTargetName())}))}}isFormValid(){return this.formService.isValid(this.formId).pipe((0,operators.Tj)(isValid=>isValid&&(0,empty_util.hj)(this.resourcePolicyGrant)))}buildResourcePolicyForm(){const formModel=[];formModel.push(new ds_dynamic_input_model.C(RESOURCE_POLICY_FORM_NAME_CONFIG),new ds_dynamic_textarea_model.E(RESOURCE_POLICY_FORM_DESCRIPTION_CONFIG),new fesm2020_core.z4z(RESOURCE_POLICY_FORM_POLICY_TYPE_CONFIG),new fesm2020_core.z4z(RESOURCE_POLICY_FORM_ACTION_TYPE_CONFIG));const startDateModel=new fesm2020_core.dku(RESOURCE_POLICY_FORM_START_DATE_CONFIG,RESOURCE_POLICY_FORM_START_DATE_LAYOUT),endDateModel=new fesm2020_core.dku(RESOURCE_POLICY_FORM_END_DATE_CONFIG,RESOURCE_POLICY_FORM_END_DATE_LAYOUT),dateGroupConfig=Object.assign({},RESOURCE_POLICY_FORM_DATE_GROUP_CONFIG,{group:[]});return dateGroupConfig.group.push(startDateModel,endDateModel),formModel.push(new fesm2020_core.iO5(dateGroupConfig,RESOURCE_POLICY_FORM_DATE_GROUP_LAYOUT)),this.initModelsValue(formModel),formModel}initModelsValue(formModel){return this.resourcePolicy&&formModel.forEach(model=>{"date"===model.id?((0,empty_util.a4)(this.resourcePolicy.startDate)&&(model.get(0).value=(0,date_util.PR)(this.resourcePolicy.startDate)),(0,empty_util.a4)(this.resourcePolicy.endDate)&&(model.get(1).value=(0,date_util.PR)(this.resourcePolicy.endDate))):this.resourcePolicy.hasOwnProperty(model.id)&&this.resourcePolicy[model.id]&&(model.value=this.resourcePolicy[model.id])}),formModel}isBeingEdited(){return!(0,empty_util.Im)(this.resourcePolicy)}getResourcePolicyTargetName(){return(0,empty_util.hj)(this.resourcePolicyGrant)?this.dsoNameService.getName(this.resourcePolicyGrant):""}updateObjectSelected(object,isEPerson){this.resourcePolicyTargetUpdated=!0,this.resourcePolicyGrant=object,this.resourcePolicyGrantType=isEPerson?"eperson":"group",this.resourcePolicyTargetName$.next(this.getResourcePolicyTargetName())}onReset(){this.reset.emit()}onSubmit(){this.formService.getFormData(this.formId).pipe((0,operators.s)(1)).subscribe(data=>{const eventPayload=Object.create({});eventPayload.object=this.createResourcePolicyByFormData(data),eventPayload.target={type:this.resourcePolicyGrantType,uuid:this.resourcePolicyGrant.id},eventPayload.updateTarget=this.resourcePolicyTargetUpdated,this.submit.emit(eventPayload)})}createResourcePolicyByFormData(data){const resourcePolicy=new resource_policy_model.h;return resourcePolicy.name=data.name?data.name[0].value:null,resourcePolicy.description=data.description?data.description[0].value:null,resourcePolicy.policyType=data.policyType?data.policyType[0].value:null,resourcePolicy.action=data.action?data.action[0].value:null,resourcePolicy.startDate=data.date&&data.date.start?(0,date_util.Sd)(data.date.start[0].value):null,resourcePolicy.endDate=data.date&&data.date.end?(0,date_util.Sd)(data.date.end[0].value):null,resourcePolicy.type=resource_policy_resource_type.O,resourcePolicy}ngOnDestroy(){this.isActive=!1,this.formModel=null,this.subs.filter(subscription=>(0,empty_util.a4)(subscription)).forEach(subscription=>subscription.unsubscribe())}onNavChange(changeEvent){this.isBeingEdited()&&(changeEvent.preventDefault(),this.modalService.open(this.content))}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ResourcePolicyFormComponent2)(core.rXU(dso_name_service.f),core.rXU(eperson_data_service.EPersonDataService),core.rXU(form_service.u),core.rXU(group_data_service.GroupDataService),core.rXU(request_service.B),core.rXU(ng_bootstrap.Bq))}}static{this.\u0275cmp=core.VBU({type:ResourcePolicyFormComponent2,selectors:[["ds-resource-policy-form"]],viewQuery:function(rf,ctx){if(1&rf&&core.GBs(_c0,5),2&rf){let _t;core.mGM(_t=core.lsd())&&(ctx.content=_t.first)}},inputs:{resourcePolicy:"resourcePolicy",isProcessing:"isProcessing"},outputs:{reset:"reset",submit:"submit"},standalone:!0,features:[core.aNF],decls:38,vars:34,consts:[["nav","ngbNav"],["content",""],["formRef","formComponent"],[3,"formId","formModel","displaySubmit","displayCancel"],[1,"container-fluid"],["for","ResourcePolicyObject"],["id","ResourcePolicyObject","type","text",1,"form-control","mb-3",3,"value"],["ngbNav","",1,"nav-pills",3,"activeIdChange","navChange","activeId"],["role","presentation",3,"ngbNavItem"],["ngbNavLink",""],["ngbNavContent",""],[3,"ngbNavOutlet"],[1,"mb-3","row"],[1,"col","text-end"],["type","reset",1,"btn","btn-default",3,"click","dsBtnDisabled"],["type","button",1,"btn","btn-primary",3,"click","dsBtnDisabled"],[3,"select"],[3,"select","isListOfEPerson"],[1,"fas","fa-circle-notch","fa-spin"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[1,"d-flex","flex-row"],[1,"me-3"],[1,"fas","fa-info-circle","fa-2x","text-info"],[1,"fw-bold",3,"innerHTML"],[3,"innerHTML"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div"),core.DNE(1,ResourcePolicyFormComponent_Conditional_1_Template,2,4,"ds-form",3),core.j41(2,"div",4)(3,"label",5),core.EFF(4),core.nI1(5,"translate"),core.k0s(),core.nrm(6,"input",6),core.nI1(7,"async"),core.j41(8,"ul",7,0),core.mxI("activeIdChange",function($event){return core.eBV(_r1),core.DH7(ctx.navActiveId,$event)||(ctx.navActiveId=$event),core.Njj($event)}),core.bIt("navChange",function($event){return core.eBV(_r1),core.Njj(ctx.onNavChange($event))}),core.j41(10,"li",8)(11,"a",9),core.EFF(12),core.nI1(13,"translate"),core.k0s(),core.DNE(14,ResourcePolicyFormComponent_ng_template_14_Template,1,0,"ng-template",10),core.k0s(),core.j41(15,"li",8)(16,"a",9),core.EFF(17),core.nI1(18,"translate"),core.k0s(),core.DNE(19,ResourcePolicyFormComponent_ng_template_19_Template,1,1,"ng-template",10),core.k0s()(),core.nrm(20,"div",11),core.j41(21,"div"),core.nrm(22,"hr"),core.j41(23,"div",12)(24,"div",13)(25,"button",14),core.nI1(26,"async"),core.bIt("click",function(){return core.eBV(_r1),core.Njj(ctx.onReset())}),core.EFF(27),core.nI1(28,"translate"),core.k0s(),core.j41(29,"button",15),core.nI1(30,"async"),core.nI1(31,"async"),core.bIt("click",function(){return core.eBV(_r1),core.Njj(ctx.onSubmit())}),core.DNE(32,ResourcePolicyFormComponent_Conditional_32_Template,4,3,"span"),core.nI1(33,"async"),core.DNE(34,ResourcePolicyFormComponent_Conditional_34_Template,3,3,"span"),core.nI1(35,"async"),core.k0s()()()()()(),core.DNE(36,ResourcePolicyFormComponent_ng_template_36_Template,18,12,"ng-template",null,1,core.C5r)}if(2&rf){const nav_r7=core.sdS(9);core.R7$(),core.vxM(ctx.formModel?1:-1),core.R7$(3),core.JRh(core.bMT(5,14,"resource-policies.form.eperson-group-list.label")),core.R7$(2),core.Y8G("value",core.bMT(7,16,ctx.resourcePolicyTargetName$)),core.R7$(2),core.R50("activeId",ctx.navActiveId),core.R7$(2),core.Y8G("ngbNavItem","eperson"),core.R7$(2),core.JRh(core.bMT(13,18,"resource-policies.form.eperson-group-list.tab.eperson")),core.R7$(3),core.Y8G("ngbNavItem","group"),core.R7$(2),core.JRh(core.bMT(18,20,"resource-policies.form.eperson-group-list.tab.group")),core.R7$(3),core.Y8G("ngbNavOutlet",nav_r7),core.R7$(5),core.Y8G("dsBtnDisabled",core.bMT(26,22,ctx.isProcessing)),core.R7$(2),core.JRh(core.bMT(28,24,"form.cancel")),core.R7$(2),core.Y8G("dsBtnDisabled",!0!==core.bMT(30,26,ctx.isFormValid())||core.bMT(31,28,ctx.isProcessing)),core.R7$(3),core.vxM(core.bMT(33,30,ctx.isProcessing)?32:-1),core.R7$(2),core.vxM(!0!==core.bMT(35,32,ctx.isProcessing)?34:-1)}},dependencies:[common.Jj,btn_disabled_directive.A,eperson_group_list_component.T,form_component.s,ng_bootstrap.Pv,ng_bootstrap.Um,ng_bootstrap.X9,ng_bootstrap.sy,ng_bootstrap.Ri,ng_bootstrap.m_,ngx_translate_core.h,ngx_translate_core.D9],encapsulation:2})}}return ResourcePolicyFormComponent2})()},23250:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>resourcePolicyTargetResolver});var _angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(25376),_angular_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(18134),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(60444),_config_app_config_interface__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3339),_core_lazy_data_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(78658),_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(39022),_core_shared_resource_type__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(87456),_empty_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2794);const resourcePolicyTargetResolver=(route,state,dataServiceMap=(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.WQX)(_config_app_config_interface__WEBPACK_IMPORTED_MODULE_0__.l9),parentInjector=(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.WQX)(_angular_core__WEBPACK_IMPORTED_MODULE_2__.zZn),router=(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.WQX)(_angular_router__WEBPACK_IMPORTED_MODULE_3__.Ix))=>{const targetType=route.queryParamMap.get("targetType"),policyTargetId=route.queryParamMap.get("policyTargetId");((0,_empty_util__WEBPACK_IMPORTED_MODULE_4__.Im)(targetType)||(0,_empty_util__WEBPACK_IMPORTED_MODULE_4__.Im)(policyTargetId))&&router.navigateByUrl("/404",{skipLocationChange:!0});const resourceType=new _core_shared_resource_type__WEBPACK_IMPORTED_MODULE_5__.v(targetType);return(0,_core_lazy_data_service__WEBPACK_IMPORTED_MODULE_6__.M)(dataServiceMap,resourceType.value,parentInjector).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.nx)(dataService=>dataService.findById(policyTargetId)),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.qD)())}},59278:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>resourcePolicyResolver});var _angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(25376),_angular_router__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(18134),_core_resource_policy_resource_policy_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(23390),_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(39022),_empty_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2794),_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(76715);const resourcePolicyResolver=(route,state,router=(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.WQX)(_angular_router__WEBPACK_IMPORTED_MODULE_3__.Ix),resourcePolicyService=(0,_angular_core__WEBPACK_IMPORTED_MODULE_2__.WQX)(_core_resource_policy_resource_policy_data_service__WEBPACK_IMPORTED_MODULE_0__.ResourcePolicyDataService))=>{const policyId=route.queryParamMap.get("policyId");return(0,_empty_util__WEBPACK_IMPORTED_MODULE_4__.Im)(policyId)&&router.navigateByUrl("/404",{skipLocationChange:!0}),resourcePolicyService.findById(policyId,!0,!1,(0,_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_5__.s)("eperson"),(0,_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_5__.s)("group")).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.qD)())}},61249:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>ResourcePoliciesComponent});var common=__webpack_require__(87514),ngx_translate_core=__webpack_require__(2385),cjs=__webpack_require__(9238),operators=__webpack_require__(60444),dso_name_service=__webpack_require__(11481),request_service=__webpack_require__(64806),eperson_data_service=__webpack_require__(15318),group_data_service=__webpack_require__(14557),resource_policy_data_service=__webpack_require__(23390),shared_operators=__webpack_require__(39022),btn_disabled_directive=__webpack_require__(69919),empty_util=__webpack_require__(2794),notifications_service=__webpack_require__(76623),follow_link_config_model=__webpack_require__(76715),core=__webpack_require__(25376),fesm2022_forms=__webpack_require__(13054),access_control_routing_paths=__webpack_require__(55990),date_util=__webpack_require__(13651),has_value_pipe=__webpack_require__(11431),router=__webpack_require__(18134);const _c0=["ds-resource-policy-entry",""];function ResourcePolicyEntryComponent_Conditional_30_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"button",6),core.nI1(1,"translate"),core.bIt("click",function(){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.redirectToGroupEditPage())}),core.nrm(2,"i",9),core.k0s()}2&rf&&core.Y8G("title",core.bMT(1,1,"resource-policies.table.headers.edit.group"))}let ResourcePolicyEntryComponent=(()=>{class ResourcePolicyEntryComponent2{constructor(dsoNameService,groupService,route,router2){this.dsoNameService=dsoNameService,this.groupService=groupService,this.route=route,this.router=router2,this.toggleCheckbox=new core.bkB}ngOnInit(){this.epersonName$=this.getName$(this.entry.policy.eperson),this.groupName$=this.getName$(this.entry.policy.group)}getName$(dso$){return dso$.pipe((0,shared_operators.v7)(),(0,operators.Tj)(rd=>{if((0,empty_util.a4)(rd?.payload))return this.dsoNameService.getName(rd.payload)}))}formatDate(date){return(0,empty_util.hj)(date)?(0,date_util.$T)((0,date_util.PR)(date)):""}redirectToResourcePolicyEditPage(){this.router.navigate(["./edit"],{relativeTo:this.route,queryParams:{policyId:this.entry.policy.id}})}redirectToGroupEditPage(){this.groupService.findByHref(this.entry.policy._links.group.href,!1).pipe((0,shared_operators.ak)(),(0,operators.Tj)(group=>group.id)).subscribe(groupUUID=>{this.router.navigate([(0,access_control_routing_paths.xl)(groupUUID)])})}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ResourcePolicyEntryComponent2)(core.rXU(dso_name_service.f),core.rXU(group_data_service.GroupDataService),core.rXU(router.nX),core.rXU(router.Ix))}}static{this.\u0275cmp=core.VBU({type:ResourcePolicyEntryComponent2,selectors:[["tr","ds-resource-policy-entry",""]],inputs:{entry:"entry"},outputs:{toggleCheckbox:"toggleCheckbox"},standalone:!0,features:[core.aNF],attrs:_c0,decls:33,vars:26,consts:[[1,"text-center"],["type","checkbox",1,"form-check-input",3,"ngModelChange","id","ngModel"],[1,"form-check-label",3,"for"],[1,"sr-only"],["scope","row"],[1,"btn-group","edit-field"],[1,"btn","btn-outline-primary","btn-sm",3,"click","title"],["aria-hidden","true",1,"fas","fa-edit","fa-fw"],[1,"btn","btn-outline-primary","btn-sm",3,"title"],["aria-hidden","true",1,"fas","fa-users","fa-fw"]],template:function(rf,ctx){1&rf&&(core.j41(0,"td",0)(1,"div")(2,"input",1),core.bIt("ngModelChange",function($event){return ctx.toggleCheckbox.emit($event)}),core.k0s(),core.j41(3,"label",2)(4,"span",3),core.EFF(5),core.nI1(6,"translate"),core.k0s()()()(),core.j41(7,"th",4),core.EFF(8),core.k0s(),core.j41(9,"td"),core.EFF(10),core.k0s(),core.j41(11,"td"),core.EFF(12),core.k0s(),core.j41(13,"td"),core.EFF(14),core.k0s(),core.j41(15,"td"),core.EFF(16),core.nI1(17,"async"),core.k0s(),core.j41(18,"td"),core.EFF(19),core.nI1(20,"async"),core.k0s(),core.j41(21,"td"),core.EFF(22),core.k0s(),core.j41(23,"td"),core.EFF(24),core.k0s(),core.j41(25,"td",0)(26,"div",5)(27,"button",6),core.nI1(28,"translate"),core.bIt("click",function(){return ctx.redirectToResourcePolicyEditPage()}),core.nrm(29,"i",7),core.k0s(),core.DNE(30,ResourcePolicyEntryComponent_Conditional_30_Template,3,3,"button",8),core.nI1(31,"async"),core.nI1(32,"dsHasValue"),core.k0s()()),2&rf&&(core.R7$(2),core.Y8G("id",ctx.entry.id)("ngModel",ctx.entry.checked),core.R7$(),core.Y8G("for",ctx.entry.id),core.R7$(2),core.JRh(core.bMT(6,14,ctx.entry.checked?"resource-policies.table.headers.deselect":"resource-policies.table.headers.select")),core.R7$(3),core.SpI(" ",ctx.entry.id,"\n"),core.R7$(2),core.JRh(ctx.entry.policy.name),core.R7$(2),core.JRh(ctx.entry.policy.policyType),core.R7$(2),core.JRh(ctx.entry.policy.action),core.R7$(2),core.SpI(" ",core.bMT(17,16,ctx.epersonName$),"\n"),core.R7$(3),core.SpI(" ",core.bMT(20,18,ctx.groupName$),"\n"),core.R7$(3),core.JRh(ctx.formatDate(ctx.entry.policy.startDate)),core.R7$(2),core.JRh(ctx.formatDate(ctx.entry.policy.endDate)),core.R7$(3),core.Y8G("title",core.bMT(28,20,"resource-policies.table.headers.edit.policy")),core.R7$(3),core.vxM(core.bMT(32,24,core.bMT(31,22,ctx.groupName$))?30:-1))},dependencies:[common.Jj,fesm2022_forms.YN,fesm2022_forms.Zm,fesm2022_forms.BC,fesm2022_forms.vS,has_value_pipe.a,ngx_translate_core.h,ngx_translate_core.D9],encapsulation:2})}}return ResourcePolicyEntryComponent2})();function ResourcePoliciesComponent_Conditional_11_Template(rf,ctx){if(1&rf&&core.EFF(0),2&rf){const ctx_r0=core.XpG();core.SpI(" (",ctx_r0.resourceUUID,") ")}}function ResourcePoliciesComponent_Conditional_17_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",11),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"submission.workflow.tasks.generic.processing")," "))}function ResourcePoliciesComponent_Conditional_19_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",12),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"resource-policies.delete.btn")," "))}function ResourcePoliciesComponent_Conditional_27_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"tr",10)(1,"th")(2,"div")(3,"input",13,0),core.bIt("change",function($event){core.eBV(_r2);const ctx_r0=core.XpG();return core.Njj(ctx_r0.selectAllCheckbox($event))}),core.k0s(),core.j41(5,"label",14)(6,"span",15),core.EFF(7),core.nI1(8,"translate"),core.k0s()()()(),core.j41(9,"th"),core.EFF(10),core.nI1(11,"translate"),core.k0s(),core.j41(12,"th"),core.EFF(13),core.nI1(14,"translate"),core.k0s(),core.j41(15,"th"),core.EFF(16),core.nI1(17,"translate"),core.k0s(),core.j41(18,"th"),core.EFF(19),core.nI1(20,"translate"),core.k0s(),core.j41(21,"th"),core.EFF(22),core.nI1(23,"translate"),core.k0s(),core.j41(24,"th"),core.EFF(25),core.nI1(26,"translate"),core.k0s(),core.j41(27,"th"),core.EFF(28),core.nI1(29,"translate"),core.k0s(),core.j41(30,"th"),core.EFF(31),core.nI1(32,"translate"),core.k0s(),core.j41(33,"th"),core.EFF(34),core.nI1(35,"translate"),core.k0s()()}if(2&rf){const selectAllBtn_r3=core.sdS(4),ctx_r0=core.XpG();core.R7$(3),core.Y8G("id","selectAll_"+ctx_r0.resourceUUID),core.R7$(2),core.Y8G("for","selectAll_"+ctx_r0.resourceUUID),core.R7$(2),core.JRh(core.bMT(8,12,selectAllBtn_r3.checked?"resource-policies.table.headers.deselect-all":"resource-policies.table.headers.select-all")),core.R7$(3),core.JRh(core.bMT(11,14,"resource-policies.table.headers.id")),core.R7$(3),core.JRh(core.bMT(14,16,"resource-policies.table.headers.name")),core.R7$(3),core.JRh(core.bMT(17,18,"resource-policies.table.headers.policyType")),core.R7$(3),core.JRh(core.bMT(20,20,"resource-policies.table.headers.action")),core.R7$(3),core.JRh(core.bMT(23,22,"resource-policies.table.headers.eperson")),core.R7$(3),core.JRh(core.bMT(26,24,"resource-policies.table.headers.group")),core.R7$(3),core.JRh(core.bMT(29,26,"resource-policies.table.headers.date.start")),core.R7$(3),core.JRh(core.bMT(32,28,"resource-policies.table.headers.date.end")),core.R7$(3),core.JRh(core.bMT(35,30,"resource-policies.table.headers.edit"))}}function ResourcePoliciesComponent_Conditional_29_For_2_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"tr",17),core.bIt("toggleCheckbox",function($event){const entry_r5=core.eBV(_r4).$implicit,ctx_r0=core.XpG(2);return core.Njj(ctx_r0.selectCheckbox(entry_r5,$event))}),core.k0s()}2&rf&&core.Y8G("entry",ctx.$implicit)}function ResourcePoliciesComponent_Conditional_29_Template(rf,ctx){if(1&rf&&(core.j41(0,"tbody"),core.Z7z(1,ResourcePoliciesComponent_Conditional_29_For_2_Template,1,1,"tr",16,core.fX1),core.nI1(3,"async"),core.k0s()),2&rf){const ctx_r0=core.XpG();core.R7$(),core.Dyx(core.bMT(3,0,ctx_r0.getResourcePolicies()))}}let ResourcePoliciesComponent=(()=>{class ResourcePoliciesComponent2{constructor(cdr,dsoNameService,ePersonService,groupService,notificationsService,requestService,resourcePolicyService,route,router2,translate){this.cdr=cdr,this.dsoNameService=dsoNameService,this.ePersonService=ePersonService,this.groupService=groupService,this.notificationsService=notificationsService,this.requestService=requestService,this.resourcePolicyService=resourcePolicyService,this.route=route,this.router=router2,this.translate=translate,this.processingDelete$=new cjs.BehaviorSubject(!1),this.resourcePoliciesEntries$=new cjs.BehaviorSubject([]),this.subs=[]}ngOnInit(){this.isActive=!0,this.initResourcePolicyList()}canDelete(){return(0,cjs.from)(this.resourcePoliciesEntries$.value).pipe((0,operators.pb)(entry=>entry.checked),(0,operators.TS)((acc,value)=>[...acc,value],[]),(0,operators.Tj)(entries=>(0,empty_util.hj)(entries)),(0,operators.F)())}deleteSelectedResourcePolicies(){this.processingDelete$.next(!0);const policiesToDelete=this.resourcePoliciesEntries$.value.filter(entry=>entry.checked);this.subs.push((0,cjs.from)(policiesToDelete).pipe((0,operators.Hh)(entry=>this.resourcePolicyService.delete(entry.policy.id)),(0,operators.SQ)((acc,value)=>[...acc,value],[]),(0,operators.pb)(results=>results.length===policiesToDelete.length),(0,operators.s)(1)).subscribe(results=>{const failureResults=results.filter(result=>!result);(0,empty_util.Im)(failureResults)?this.notificationsService.success(null,this.translate.get("resource-policies.delete.success.content")):this.notificationsService.error(null,this.translate.get("resource-policies.delete.failure.content")),this.processingDelete$.next(!1)}))}getResourcePolicies(){return this.resourcePoliciesEntries$.asObservable()}initResourcePolicyList(){this.subs.push(this.resourcePolicyService.searchByResource(this.resourceUUID,null,!1,!0,(0,follow_link_config_model.s)("eperson"),(0,follow_link_config_model.s)("group")).pipe((0,operators.pb)(()=>this.isActive),(0,shared_operators.v7)()).subscribe(result=>{const entries=result.payload.page.map(policy=>({id:policy.id,policy,checked:!1}));this.resourcePoliciesEntries$.next(entries),this.cdr.detectChanges()}))}isProcessingDelete(){return this.processingDelete$.asObservable()}redirectToResourcePolicyCreatePage(){this.router.navigate(["./create"],{relativeTo:this.route,queryParams:{policyTargetId:this.resourceUUID,targetType:this.resourceType}})}selectAllCheckbox(event){const checked=event.target.checked;this.resourcePoliciesEntries$.value.forEach(entry=>entry.checked=checked)}selectCheckbox(policyEntry,checked){policyEntry.checked=checked}ngOnDestroy(){this.isActive=!1,this.resourcePoliciesEntries$=null,this.subs.filter(subscription=>(0,empty_util.a4)(subscription)).forEach(subscription=>subscription.unsubscribe())}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ResourcePoliciesComponent2)(core.rXU(core.gRc),core.rXU(dso_name_service.f),core.rXU(eperson_data_service.EPersonDataService),core.rXU(group_data_service.GroupDataService),core.rXU(notifications_service.I),core.rXU(request_service.B),core.rXU(resource_policy_data_service.ResourcePolicyDataService),core.rXU(router.nX),core.rXU(router.Ix),core.rXU(ngx_translate_core.c$))}}static{this.\u0275cmp=core.VBU({type:ResourcePoliciesComponent2,selectors:[["ds-resource-policies"]],inputs:{resourceUUID:"resourceUUID",resourceType:"resourceType",resourceName:"resourceName"},standalone:!0,features:[core.aNF],decls:31,vars:34,consts:[["selectAllBtn",""],[1,"table-responsive"],[1,"table","table-striped","table-bordered","table-hover"],["colspan","10"],[1,"d-flex","justify-content-between","align-items-center","m-0"],[1,"text-info"],[1,"space-children-mr","flex-shrink-0"],[1,"btn","btn-danger","p-1",3,"click","dsBtnDisabled","title"],[1,"btn","btn-success","p-1",3,"click","dsBtnDisabled","title"],["aria-hidden","true",1,"fas","fa-plus"],[1,"text-center"],["aria-hidden","true",1,"fas","fa-circle-notch","fa-spin"],["aria-hidden","true",1,"fas","fa-trash-alt","fa-fw"],["type","checkbox",1,"form-check-input",3,"change","id"],[1,"form-check-label",3,"for"],[1,"sr-only"],["ds-resource-policy-entry","",3,"entry"],["ds-resource-policy-entry","",3,"toggleCheckbox","entry"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",1)(1,"table",2)(2,"thead")(3,"tr")(4,"th",3)(5,"div",4)(6,"span"),core.EFF(7),core.nI1(8,"translate"),core.j41(9,"span",5),core.EFF(10),core.k0s(),core.DNE(11,ResourcePoliciesComponent_Conditional_11_Template,1,1),core.k0s(),core.j41(12,"div",6)(13,"button",7),core.nI1(14,"async"),core.nI1(15,"async"),core.nI1(16,"translate"),core.bIt("click",function(){return ctx.deleteSelectedResourcePolicies()}),core.DNE(17,ResourcePoliciesComponent_Conditional_17_Template,4,3,"span"),core.nI1(18,"async"),core.DNE(19,ResourcePoliciesComponent_Conditional_19_Template,4,3,"span"),core.nI1(20,"async"),core.k0s(),core.j41(21,"button",8),core.nI1(22,"async"),core.nI1(23,"translate"),core.bIt("click",function(){return ctx.redirectToResourcePolicyCreatePage()}),core.nrm(24,"i",9),core.EFF(25),core.nI1(26,"translate"),core.k0s()()()()(),core.DNE(27,ResourcePoliciesComponent_Conditional_27_Template,36,32,"tr",10),core.nI1(28,"async"),core.k0s(),core.DNE(29,ResourcePoliciesComponent_Conditional_29_Template,4,2,"tbody"),core.nI1(30,"async"),core.k0s()()),2&rf){let tmp_10_0,tmp_11_0;core.R7$(7),core.SpI(" ",core.bMT(8,12,"resource-policies.table.headers.title.for."+ctx.resourceType)," "),core.R7$(3),core.SpI(" ",ctx.resourceName," "),core.R7$(),core.vxM("item"!==ctx.resourceType?11:-1),core.R7$(2),core.Y8G("dsBtnDisabled",!0!==core.bMT(14,14,ctx.canDelete())||core.bMT(15,16,ctx.isProcessingDelete()))("title",core.bMT(16,18,"resource-policies.delete.btn.title")),core.R7$(4),core.vxM(core.bMT(18,20,ctx.isProcessingDelete())?17:-1),core.R7$(2),core.vxM(!0!==core.bMT(20,22,ctx.isProcessingDelete())?19:-1),core.R7$(2),core.Y8G("dsBtnDisabled",core.bMT(22,24,ctx.isProcessingDelete()))("title",core.bMT(23,26,"resource-policies.add.for."+ctx.resourceType)),core.R7$(4),core.SpI(" ",core.bMT(26,28,"resource-policies.add.button")," "),core.R7$(2),core.vxM((null==(tmp_10_0=core.bMT(28,30,ctx.getResourcePolicies()))?null:tmp_10_0.length)>0?27:-1),core.R7$(2),core.vxM((null==(tmp_11_0=core.bMT(30,32,ctx.getResourcePolicies()))?null:tmp_11_0.length)>0?29:-1)}},dependencies:[common.Jj,btn_disabled_directive.A,ResourcePolicyEntryComponent,ngx_translate_core.h,ngx_translate_core.D9],styles:["td[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]:focus{box-shadow:none!important}"]})}}return ResourcePoliciesComponent2})()},77998:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>AbstractTrackableComponent});var _core_data_object_updates_object_updates_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(55434),_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(76623),_angular_core__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(25376),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(2385),_angular_router__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(18134);let AbstractTrackableComponent=(()=>{class AbstractTrackableComponent2{constructor(objectUpdatesService,notificationsService,translateService,router){this.objectUpdatesService=objectUpdatesService,this.notificationsService=notificationsService,this.translateService=translateService,this.router=router,this.notificationsPrefix="static-pages.form.notification"}ngOnInit(){this.url=this.router.url.split("?")[0],this.hasChanges$=this.hasChanges(),this.isReinstatable$=this.isReinstatable()}discard(){const undoNotification=this.notificationsService.info(this.getNotificationTitle("discarded"),this.getNotificationContent("discarded"),{timeOut:this.discardTimeOut});this.objectUpdatesService.discardFieldUpdates(this.url,undoNotification)}reinstate(){this.objectUpdatesService.reinstateFieldUpdates(this.url)}isReinstatable(){return this.objectUpdatesService.isReinstatable(this.url)}hasChanges(){return this.objectUpdatesService.hasUpdates(this.url)}getNotificationTitle(key){return this.translateService.instant(this.notificationsPrefix+key+".title")}getNotificationContent(key){return this.translateService.instant(this.notificationsPrefix+key+".content")}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||AbstractTrackableComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_2__.rXU(_core_data_object_updates_object_updates_service__WEBPACK_IMPORTED_MODULE_0__.F),_angular_core__WEBPACK_IMPORTED_MODULE_2__.rXU(_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_1__.I),_angular_core__WEBPACK_IMPORTED_MODULE_2__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_3__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_2__.rXU(_angular_router__WEBPACK_IMPORTED_MODULE_4__.Ix))}}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_2__.VBU({type:AbstractTrackableComponent2,selectors:[["ds-abstract-trackable"]],standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_2__.aNF],decls:0,vars:0,template:function(rf,ctx){},encapsulation:2})}}return AbstractTrackableComponent2})()},23219:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>HasNoValuePipe});var _empty_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2794),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(25376);let HasNoValuePipe=(()=>{class HasNoValuePipe2{transform(value){return(0,_empty_util__WEBPACK_IMPORTED_MODULE_0__.Tn)(value)}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||HasNoValuePipe2)}}static{this.\u0275pipe=_angular_core__WEBPACK_IMPORTED_MODULE_1__.EJ8({name:"dsHasNoValue",type:HasNoValuePipe2,pure:!0,standalone:!0})}}return HasNoValuePipe2})()},11431:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>HasValuePipe});var _empty_util__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2794),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(25376);let HasValuePipe=(()=>{class HasValuePipe2{transform(value){return(0,_empty_util__WEBPACK_IMPORTED_MODULE_0__.a4)(value)}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||HasValuePipe2)}}static{this.\u0275pipe=_angular_core__WEBPACK_IMPORTED_MODULE_1__.EJ8({name:"dsHasValue",type:HasValuePipe2,pure:!0,standalone:!0})}}return HasValuePipe2})()},53359:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{S:()=>UiSwitchComponent,z:()=>UiSwitchModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(25376),_angular_forms__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(13054),_angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(87514);const _c0=["*"];function UiSwitchComponent_label_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.j41(0,"label",2)(1,"span",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.j41(3,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.EFF(4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.k0s()()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc7("color",ctx_r0.getColor("checkedTextColor")),_angular_core__WEBPACK_IMPORTED_MODULE_0__.BMQ("aria-label",ctx_r0.checkedLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.JRh(ctx_r0.checkedLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc7("color",ctx_r0.getColor("uncheckedTextColor")),_angular_core__WEBPACK_IMPORTED_MODULE_0__.BMQ("aria-label",ctx_r0.uncheckedLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.JRh(ctx_r0.uncheckedLabel)}}const UI_SWITCH_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.nKC("UI_SWITCH_OPTIONS"),UI_SWITCH_CONTROL_VALUE_ACCESSOR={provide:_angular_forms__WEBPACK_IMPORTED_MODULE_1__.kq,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Rfq)(()=>UiSwitchComponent),multi:!0};let UiSwitchComponent=(()=>{class UiSwitchComponent2{cdr;_checked;_disabled;_reverse;_loading;_beforeChange;size;color;switchOffColor;switchColor;defaultBgColor;defaultBoColor;checkedLabel;uncheckedLabel;checkedTextColor;uncheckedTextColor;beforeChange;ariaLabel;set checked(v){this._checked=!1!==v}get checked(){return this._checked}set disabled(v){this._disabled=!1!==v}get disabled(){return this._disabled}set reverse(v){this._reverse=!1!==v}get reverse(){return this._reverse}set loading(v){this._loading=!1!==v}get loading(){return this._loading}change=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.bkB;changeEvent=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.bkB;valueChange=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.bkB;constructor(config={},cdr){this.cdr=cdr,this.size=config&&config.size||"medium",this.color=config&&config.color,this.switchOffColor=config&&config.switchOffColor,this.switchColor=config&&config.switchColor,this.defaultBgColor=config&&config.defaultBgColor,this.defaultBoColor=config&&config.defaultBoColor,this.checkedLabel=config&&config.checkedLabel,this.uncheckedLabel=config&&config.uncheckedLabel,this.checkedTextColor=config&&config.checkedTextColor,this.uncheckedTextColor=config&&config.uncheckedTextColor}getColor(flag=""){return"borderColor"===flag?this.defaultBoColor:"switchColor"===flag?this.reverse?this.checked&&this.switchOffColor||this.switchColor:this.checked?this.switchColor:this.switchOffColor||this.switchColor:"checkedTextColor"===flag?this.reverse?this.uncheckedTextColor:this.checkedTextColor:"uncheckedTextColor"===flag?this.reverse?this.checkedTextColor:this.uncheckedTextColor:this.reverse?this.checked?this.defaultBgColor:this.color:this.checked?this.color:this.defaultBgColor}onClick(event){this.disabled||(this.checked=!this.checked,this.change.emit(this.checked),this.valueChange.emit(this.checked),this.changeEvent.emit(event),this.onChangeCallback(this.checked),this.onTouchedCallback(this.checked),this.cdr.markForCheck())}onToggle(event){this.disabled||(this.beforeChange?this._beforeChange=this.beforeChange.subscribe(confirm=>{confirm&&this.onClick(event)}):this.onClick(event))}writeValue(obj){obj!==this.checked&&(this.checked=!!obj),this.onChangeCallback(this.checked),this.cdr&&this.cdr.markForCheck()}registerOnChange(fn){this.onChangeCallback=fn}registerOnTouched(fn){this.onTouchedCallback=fn}setDisabledState(isDisabled){this.disabled=isDisabled}onTouchedCallback=v=>{};onChangeCallback=v=>{};ngOnDestroy(){this._beforeChange&&this._beforeChange.unsubscribe()}static \u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||UiSwitchComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.rXU(UI_SWITCH_OPTIONS,8),_angular_core__WEBPACK_IMPORTED_MODULE_0__.rXU(_angular_core__WEBPACK_IMPORTED_MODULE_0__.gRc))};static \u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__.VBU({type:UiSwitchComponent2,selectors:[["ui-switch"]],hostBindings:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.bIt("click",function($event){return ctx.onToggle($event)})},inputs:{size:"size",color:"color",switchOffColor:"switchOffColor",switchColor:"switchColor",defaultBgColor:"defaultBgColor",defaultBoColor:"defaultBoColor",checkedLabel:"checkedLabel",uncheckedLabel:"uncheckedLabel",checkedTextColor:"checkedTextColor",uncheckedTextColor:"uncheckedTextColor",beforeChange:"beforeChange",ariaLabel:"ariaLabel",checked:"checked",disabled:"disabled",reverse:"reverse",loading:"loading"},outputs:{change:"change",changeEvent:"changeEvent",valueChange:"valueChange"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.Jv_([UI_SWITCH_CONTROL_VALUE_ACCESSOR])],ngContentSelectors:_c0,decls:4,vars:21,consts:[["type","button","role","switch",1,"switch"],["class","switch-pane",4,"ngIf"],[1,"switch-pane"],[1,"switch-label-checked"],[1,"switch-label-unchecked"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.NAR(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.j41(0,"button",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__.DNE(1,UiSwitchComponent_label_1_Template,5,8,"label",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.j41(2,"small"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.SdG(3),_angular_core__WEBPACK_IMPORTED_MODULE_0__.k0s()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc7("background-color",ctx.getColor())("border-color",ctx.getColor("borderColor")),_angular_core__WEBPACK_IMPORTED_MODULE_0__.AVh("checked",ctx.checked)("disabled",ctx.disabled)("loading",ctx.loading)("switch-large","large"===ctx.size)("switch-medium","medium"===ctx.size)("switch-small","small"===ctx.size),_angular_core__WEBPACK_IMPORTED_MODULE_0__.BMQ("aria-checked",ctx.checked)("aria-label",ctx.ariaLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Y8G("ngIf",ctx.checkedLabel||ctx.uncheckedLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc7("background",ctx.getColor("switchColor")))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.bT],encapsulation:2})}return UiSwitchComponent2})(),UiSwitchModule=(()=>{class UiSwitchModule2{static forRoot(config){return{ngModule:UiSwitchModule2,providers:[{provide:UI_SWITCH_OPTIONS,useValue:config||{}}]}}static \u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||UiSwitchModule2)};static \u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.$C({type:UiSwitchModule2});static \u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.G2t({imports:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.MD,_angular_forms__WEBPACK_IMPORTED_MODULE_1__.YN,_angular_forms__WEBPACK_IMPORTED_MODULE_1__.YN]})}return UiSwitchModule2})()}};