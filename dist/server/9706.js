"use strict";exports.id=9706,exports.ids=[9706],exports.modules={48020:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>Breadcrumb});class Breadcrumb{constructor(text,url){this.text=text,this.url=url}}},49706:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ROUTES:()=>ROUTES});var authenticated_guard=__webpack_require__(38056),core=__webpack_require__(25376),cjs=__webpack_require__(9238),operators=__webpack_require__(60444),breadcrumb_model=__webpack_require__(48020),authorization_data_service=__webpack_require__(76509),feature_id=__webpack_require__(86583),item_data_service=__webpack_require__(94149),shared_operators=__webpack_require__(39022),dso_name_service=__webpack_require__(11481),ngx_translate_core=__webpack_require__(2385);let PublicationClaimBreadcrumbService=(()=>{class PublicationClaimBreadcrumbService2{constructor(dataService,dsoNameService,tranlsateService,authorizationService){this.dataService=dataService,this.dsoNameService=dsoNameService,this.tranlsateService=tranlsateService,this.authorizationService=authorizationService,this.ADMIN_PUBLICATION_CLAIMS_PATH="admin/notifications/publication-claim",this.ADMIN_PUBLICATION_CLAIMS_BREADCRUMB_KEY="admin.notifications.publicationclaim.page.title"}getBreadcrumbs(key){return(0,cjs.combineLatest)([this.dataService.findById(key).pipe((0,shared_operators.qD)()),this.authorizationService.isAuthorized(feature_id._.AdministratorOf)]).pipe((0,operators.Tj)(([item,isAdmin])=>{const itemName=this.dsoNameService.getName(item.payload);return isAdmin?[new breadcrumb_model.Q(this.tranlsateService.instant(this.ADMIN_PUBLICATION_CLAIMS_BREADCRUMB_KEY),this.ADMIN_PUBLICATION_CLAIMS_PATH),new breadcrumb_model.Q(this.tranlsateService.instant("suggestion.suggestionFor.breadcrumb",{name:itemName}),void 0)]:[new breadcrumb_model.Q(this.tranlsateService.instant("suggestion.suggestionFor.breadcrumb",{name:itemName}),void 0)]}))}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||PublicationClaimBreadcrumbService2)(core.KVO(item_data_service.ItemDataService),core.KVO(dso_name_service.f),core.KVO(ngx_translate_core.c$),core.KVO(authorization_data_service.AuthorizationDataService))}}static{this.\u0275prov=core.jDH({token:PublicationClaimBreadcrumbService2,factory:PublicationClaimBreadcrumbService2.\u0275fac,providedIn:"root"})}}return PublicationClaimBreadcrumbService2})();var common=__webpack_require__(87514),router=__webpack_require__(18134),auth_service=__webpack_require__(54545),sort_options_model=__webpack_require__(60795),find_list_options_model=__webpack_require__(72248),pagination_service=__webpack_require__(31903),authorized_operators=__webpack_require__(36113),workspaceitem_data_service=__webpack_require__(96148),ng_bootstrap=__webpack_require__(87969),tslib_es6=__webpack_require__(31635),cerialize=__webpack_require__(10483),build_decorators=__webpack_require__(79056),metadata_models=__webpack_require__(32084),resource_type=__webpack_require__(87456),equals_decorators=__webpack_require__(99837),suggestion_objects_resource_type=__webpack_require__(943);let Suggestion=class{static{this.type=suggestion_objects_resource_type.P}};(0,tslib_es6.Cg)([cerialize.autoserialize,(0,tslib_es6.Sn)("design:type",String)],Suggestion.prototype,"id",void 0),(0,tslib_es6.Cg)([cerialize.autoserialize,(0,tslib_es6.Sn)("design:type",String)],Suggestion.prototype,"display",void 0),(0,tslib_es6.Cg)([cerialize.autoserialize,(0,tslib_es6.Sn)("design:type",String)],Suggestion.prototype,"source",void 0),(0,tslib_es6.Cg)([cerialize.autoserialize,(0,tslib_es6.Sn)("design:type",String)],Suggestion.prototype,"externalSourceUri",void 0),(0,tslib_es6.Cg)([cerialize.autoserialize,(0,tslib_es6.Sn)("design:type",String)],Suggestion.prototype,"score",void 0),(0,tslib_es6.Cg)([cerialize.autoserialize,(0,tslib_es6.Sn)("design:type",Object)],Suggestion.prototype,"evidences",void 0),(0,tslib_es6.Cg)([equals_decorators.aK,(0,cerialize.autoserializeAs)(metadata_models.Of),(0,tslib_es6.Sn)("design:type",metadata_models.Cr)],Suggestion.prototype,"metadata",void 0),(0,tslib_es6.Cg)([equals_decorators.aK,cerialize.autoserialize,(0,tslib_es6.Sn)("design:type",resource_type.v)],Suggestion.prototype,"type",void 0),(0,tslib_es6.Cg)([cerialize.deserialize,(0,tslib_es6.Sn)("design:type",Object)],Suggestion.prototype,"_links",void 0),Suggestion=(0,tslib_es6.Cg)([build_decorators.gV],Suggestion);var btn_disabled_directive=__webpack_require__(69919),themed_create_item_parent_selector_component=__webpack_require__(30489),entity_dropdown_component=__webpack_require__(21645);function SuggestionActionsComponent_Conditional_2_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"button",6),core.bIt("click",function(){core.eBV(_r1);const ctx_r1=core.XpG();return core.Njj(ctx_r1.approveAndImportCollectionFixed())}),core.nrm(1,"i",7),core.EFF(2),core.nI1(3,"translate"),core.k0s()}if(2&rf){const ctx_r1=core.XpG();core.R7$(2),core.SpI(" ",core.bMT(3,1,ctx_r1.approveAndImportLabel())," ")}}function SuggestionActionsComponent_Conditional_3_Template(rf,ctx){if(1&rf){const _r3=core.RV6();core.j41(0,"button",8),core.nrm(1,"i",7),core.EFF(2),core.nI1(3,"translate"),core.nrm(4,"span",9),core.k0s(),core.j41(5,"div",10)(6,"ds-entity-dropdown",11),core.bIt("selectionChange",function($event){core.eBV(_r3);const ctx_r1=core.XpG();return core.Njj(ctx_r1.openDialog($event))}),core.k0s()()}if(2&rf){const ctx_r1=core.XpG();core.R7$(2),core.SpI(" ",core.bMT(3,1,ctx_r1.approveAndImportLabel())," ")}}function SuggestionActionsComponent_Conditional_8_Conditional_2_Template(rf,ctx){1&rf&&(core.EFF(0),core.nI1(1,"translate")),2&rf&&core.SpI(" ",core.bMT(1,1,"suggestion.seeEvidence")," ")}function SuggestionActionsComponent_Conditional_8_Conditional_3_Template(rf,ctx){1&rf&&(core.EFF(0),core.nI1(1,"translate")),2&rf&&core.SpI(" ",core.bMT(1,1,"suggestion.hideEvidence")," ")}function SuggestionActionsComponent_Conditional_8_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"button",12),core.bIt("click",function(){core.eBV(_r4);const ctx_r1=core.XpG();return core.Njj(ctx_r1.toggleSeeEvidences())}),core.nrm(1,"i",13),core.DNE(2,SuggestionActionsComponent_Conditional_8_Conditional_2_Template,2,3)(3,SuggestionActionsComponent_Conditional_8_Conditional_3_Template,2,3),core.k0s()}if(2&rf){const ctx_r1=core.XpG();core.Y8G("dsBtnDisabled",!ctx_r1.hasEvidence),core.R7$(2),core.vxM(ctx_r1.seeEvidence?-1:2),core.R7$(),core.vxM(ctx_r1.seeEvidence?3:-1)}}let SuggestionActionsComponent=(()=>{class SuggestionActionsComponent2{constructor(modalService){this.modalService=modalService,this.isBulk=!1,this.hasEvidence=!1,this.seeEvidence=!1,this.isCollectionFixed=!1,this.ignoreSuggestionClicked=new core.bkB,this.approveAndImport=new core.bkB,this.seeEvidences=new core.bkB}openDialog(entity){const modalRef=this.modalService.open(themed_create_item_parent_selector_component.L);modalRef.componentInstance.emitOnly=!0,modalRef.componentInstance.entityType=entity.label,modalRef.componentInstance.select.pipe((0,operators.s)(1)).subscribe(collection=>{this.approveAndImport.emit({suggestion:this.isBulk?void 0:this.object,collectionId:collection.id})})}approveAndImportCollectionFixed(){this.approveAndImport.emit({suggestion:this.isBulk?void 0:this.object,collectionId:null})}ignoreSuggestion(){this.ignoreSuggestionClicked.emit(this.isBulk?void 0:this.object.id)}toggleSeeEvidences(){this.seeEvidences.emit(!this.seeEvidence)}ignoreSuggestionLabel(){return this.isBulk?"suggestion.ignoreSuggestion.bulk":"suggestion.ignoreSuggestion"}approveAndImportLabel(){return this.isBulk?"suggestion.approveAndImport.bulk":"suggestion.approveAndImport"}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||SuggestionActionsComponent2)(core.rXU(ng_bootstrap.Bq))}}static{this.\u0275cmp=core.VBU({type:SuggestionActionsComponent2,selectors:[["ds-suggestion-actions"]],inputs:{object:"object",isBulk:"isBulk",hasEvidence:"hasEvidence",seeEvidence:"seeEvidence",isCollectionFixed:"isCollectionFixed"},outputs:{ignoreSuggestionClicked:"ignoreSuggestionClicked",approveAndImport:"approveAndImport",seeEvidences:"seeEvidences"},standalone:!0,features:[core.aNF],decls:9,vars:5,consts:[[1,"d-inline"],["ngbDropdown","",1,"d-inline"],["type","button",1,"btn","btn-success"],[1,"btn","btn-danger","ms-2",3,"click"],[1,"fa","fa-ban"],[1,"btn","btn-info","ms-2",3,"dsBtnDisabled"],["type","button",1,"btn","btn-success",3,"click"],["aria-hidden","true",1,"fa","fa-check"],["id","dropdownSubmission","ngbDropdownToggle","","type","button",1,"btn","btn-success"],[1,"caret"],["ngbDropdownMenu","","id","entityControlsDropdownMenu","aria-labelledby","dropdownSubmission",1,"dropdown-menu"],[3,"selectionChange"],[1,"btn","btn-info","ms-2",3,"click","dsBtnDisabled"],[1,"fa","fa-eye"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0)(1,"div",1),core.DNE(2,SuggestionActionsComponent_Conditional_2_Template,4,3,"button",2)(3,SuggestionActionsComponent_Conditional_3_Template,7,3),core.k0s(),core.j41(4,"button",3),core.bIt("click",function(){return ctx.ignoreSuggestion()}),core.nrm(5,"i",4),core.EFF(6),core.nI1(7,"translate"),core.k0s(),core.DNE(8,SuggestionActionsComponent_Conditional_8_Template,4,3,"button",5),core.k0s()),2&rf&&(core.R7$(2),core.vxM(ctx.isCollectionFixed?2:3),core.R7$(4),core.SpI("\n",core.bMT(7,3,ctx.ignoreSuggestionLabel()),""),core.R7$(2),core.vxM(ctx.isBulk?-1:8))},dependencies:[btn_disabled_directive.A,entity_dropdown_component.Y,ng_bootstrap.zH,ng_bootstrap.tg,ng_bootstrap.do,ng_bootstrap.U0,ngx_translate_core.h,ngx_translate_core.D9]})}}return SuggestionActionsComponent2})();var item_model=__webpack_require__(43575),fade=__webpack_require__(67441),empty_util=__webpack_require__(2794),item_search_result_list_element_component=__webpack_require__(35003);let ObjectKeysPipe=(()=>{class ObjectKeysPipe2{transform(value){const keys=[];return Object.keys(value).forEach(k=>keys.push(k)),keys}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ObjectKeysPipe2)}}static{this.\u0275pipe=core.EJ8({name:"dsObjectKeys",type:ObjectKeysPipe2,pure:!0,standalone:!0})}}return ObjectKeysPipe2})();function SuggestionEvidencesComponent_Conditional_1_For_15_Template(rf,ctx){if(1&rf&&(core.j41(0,"tr")(1,"td"),core.EFF(2),core.k0s(),core.j41(3,"td"),core.EFF(4),core.nI1(5,"translate"),core.k0s(),core.j41(6,"td"),core.EFF(7),core.k0s()()),2&rf){const evidence_r1=ctx.$implicit,ctx_r1=core.XpG(2);core.R7$(2),core.JRh(ctx_r1.evidences[evidence_r1].score),core.R7$(2),core.JRh(core.bMT(5,3,evidence_r1)),core.R7$(3),core.JRh(ctx_r1.evidences[evidence_r1].notes)}}function SuggestionEvidencesComponent_Conditional_1_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th"),core.EFF(5),core.nI1(6,"translate"),core.k0s(),core.j41(7,"th"),core.EFF(8),core.nI1(9,"translate"),core.k0s(),core.j41(10,"th"),core.EFF(11),core.nI1(12,"translate"),core.k0s()()(),core.j41(13,"tbody"),core.Z7z(14,SuggestionEvidencesComponent_Conditional_1_For_15_Template,8,5,"tr",null,core.fX1),core.nI1(16,"dsObjectKeys"),core.k0s()()()),2&rf){const ctx_r1=core.XpG();core.R7$(5),core.JRh(core.bMT(6,3,"suggestion.evidence.score")),core.R7$(3),core.JRh(core.bMT(9,5,"suggestion.evidence.type")),core.R7$(3),core.JRh(core.bMT(12,7,"suggestion.evidence.notes")),core.R7$(3),core.Dyx(core.bMT(16,9,ctx_r1.evidences))}}let SuggestionEvidencesComponent=(()=>{class SuggestionEvidencesComponent2{static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||SuggestionEvidencesComponent2)}}static{this.\u0275cmp=core.VBU({type:SuggestionEvidencesComponent2,selectors:[["ds-suggestion-evidences"]],inputs:{evidences:"evidences"},standalone:!0,features:[core.aNF],decls:2,vars:1,consts:[[1,"table-responsive"],[1,"table"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div"),core.DNE(1,SuggestionEvidencesComponent_Conditional_1_Template,17,11,"div",0),core.k0s()),2&rf&&(core.R7$(),core.vxM(ctx.evidences?1:-1))},dependencies:[ObjectKeysPipe,ngx_translate_core.h,ngx_translate_core.D9],data:{animation:[fade.qG]}})}}return SuggestionEvidencesComponent2})();function SuggestionListElementComponent_Conditional_16_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",10)(1,"div",11),core.nrm(2,"ds-suggestion-evidences",12),core.k0s()()),2&rf){const ctx_r0=core.XpG();core.R7$(2),core.Y8G("evidences",ctx_r0.object.evidences)}}let SuggestionListElementComponent=(()=>{class SuggestionListElementComponent2{constructor(){this.isSelected=!1,this.isCollectionFixed=!1,this.seeEvidence=!1,this.ignoreSuggestionClicked=new core.bkB,this.approveAndImport=new core.bkB,this.selected=new core.bkB}ngOnInit(){this.listableObject={indexableObject:Object.assign(new item_model.q,{id:this.object.id,metadata:this.object.metadata}),hitHighlights:{}}}onApproveAndImport(event){this.approveAndImport.emit(event)}onIgnoreSuggestion(suggestionId){this.ignoreSuggestionClicked.emit(suggestionId)}changeSelected(event){this.isSelected=event.target.checked,this.selected.next(this.isSelected)}hasEvidences(){return(0,empty_util.hj)(this.object.evidences)}onSeeEvidences(seeEvidence){this.seeEvidence=seeEvidence}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||SuggestionListElementComponent2)}}static{this.\u0275cmp=core.VBU({type:SuggestionListElementComponent2,selectors:[["ds-suggestion-list-item"]],inputs:{object:"object",isSelected:"isSelected",isCollectionFixed:"isCollectionFixed"},outputs:{ignoreSuggestionClicked:"ignoreSuggestionClicked",approveAndImport:"approveAndImport",selected:"selected"},standalone:!0,features:[core.aNF],decls:18,vars:15,consts:[[1,"container"],[1,"row"],[1,"col-1","text-center","align-self-center"],[1,""],["type","checkbox",1,"form-check-input",3,"change","checked"],[1,"col-2","text-center","align-self-center"],[1,"suggestion-score"],[1,"col"],[3,"showLabel","showThumbnails","object","linkType"],[1,"parent","mt-2",3,"approveAndImport","seeEvidences","ignoreSuggestionClicked","hasEvidence","seeEvidence","object","isCollectionFixed"],[1,"mt-2","row"],[1,"col","offset-3"],[3,"evidences"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),core.bIt("change",function($event){return ctx.changeSelected($event)}),core.k0s()()(),core.j41(5,"div",5)(6,"div",3)(7,"div")(8,"strong"),core.EFF(9),core.nI1(10,"translate"),core.k0s()(),core.j41(11,"span",6),core.EFF(12),core.k0s()()(),core.j41(13,"div",7),core.nrm(14,"ds-item-search-result-list-element",8),core.j41(15,"ds-suggestion-actions",9),core.bIt("approveAndImport",function($event){return ctx.onApproveAndImport($event)})("seeEvidences",function($event){return ctx.onSeeEvidences($event)})("ignoreSuggestionClicked",function($event){return ctx.onIgnoreSuggestion($event)}),core.k0s()()(),core.DNE(16,SuggestionListElementComponent_Conditional_16_Template,3,1,"div",10),core.k0s(),core.nrm(17,"hr")),2&rf&&(core.R7$(4),core.Y8G("checked",ctx.isSelected),core.BMQ("aria-label",ctx.object.display),core.R7$(5),core.SpI(" ",core.bMT(10,13,"suggestion.totalScore"),""),core.R7$(3),core.JRh(ctx.object.score),core.R7$(2),core.Y8G("showLabel",!1)("showThumbnails",!1)("object",ctx.listableObject)("linkType",0),core.R7$(),core.Y8G("hasEvidence",ctx.hasEvidences())("seeEvidence",ctx.seeEvidence)("object",ctx.object)("isCollectionFixed",ctx.isCollectionFixed),core.R7$(),core.vxM(ctx.seeEvidence?16:-1))},dependencies:[item_search_result_list_element_component.k,SuggestionActionsComponent,SuggestionEvidencesComponent,ngx_translate_core.h,ngx_translate_core.D9],styles:[".issue-date[_ngcontent-%COMP%]{color:#c8c8c8}.parent[_ngcontent-%COMP%]{display:flex;gap:10px}.import[_ngcontent-%COMP%]{flex:initial}.suggestion-score[_ngcontent-%COMP%]{font-size:1.5rem}"],data:{animation:[fade.qG]}})}}return SuggestionListElementComponent2})();var suggestions_service=__webpack_require__(29680),suggestion_targets_state_service=__webpack_require__(12652),alert_component=__webpack_require__(6213),themed_loading_component=__webpack_require__(18869),notifications_service=__webpack_require__(76623),pagination_component=__webpack_require__(42191),pagination_component_options_model=__webpack_require__(54396),var_directive=__webpack_require__(17543),workflowitems_edit_page_routing_paths=__webpack_require__(81812);const _c0=a0=>["/entities/person/",a0],_c1=a0=>[a0];function SuggestionsPageComponent_ng_container_3_Conditional_1_Template(rf,ctx){1&rf&&core.nrm(0,"ds-loading")}function SuggestionsPageComponent_ng_container_3_Conditional_3_Conditional_14_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"ds-suggestion-actions",11),core.bIt("approveAndImport",function($event){core.eBV(_r4);const ctx_r2=core.XpG(3);return core.Njj(ctx_r2.approveAndImportAllSelected($event))})("ignoreSuggestionClicked",function(){core.eBV(_r4);const ctx_r2=core.XpG(3);return core.Njj(ctx_r2.ignoreSuggestionAllSelected())}),core.k0s()}if(2&rf){const suggestionsRD_r2=core.XpG(2).ngVar,ctx_r2=core.XpG();core.Y8G("isBulk",!0)("isCollectionFixed",ctx_r2.isCollectionFixed(suggestionsRD_r2.page))}}function SuggestionsPageComponent_ng_container_3_Conditional_3_Conditional_15_Template(rf,ctx){1&rf&&core.nrm(0,"i",9)}function SuggestionsPageComponent_ng_container_3_Conditional_3_Conditional_16_For_3_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"li",14)(1,"ds-suggestion-list-item",15),core.bIt("ignoreSuggestionClicked",function($event){core.eBV(_r6);const ctx_r2=core.XpG(4);return core.Njj(ctx_r2.ignoreSuggestion($event))})("selected",function($event){const object_r7=core.eBV(_r6).$implicit,ctx_r2=core.XpG(4);return core.Njj(ctx_r2.onSelected(object_r7,$event))})("approveAndImport",function($event){core.eBV(_r6);const ctx_r2=core.XpG(4);return core.Njj(ctx_r2.approveAndImport($event))}),core.k0s()()}if(2&rf){const object_r7=ctx.$implicit,ctx_r2=core.XpG(4);core.R7$(),core.Y8G("object",object_r7)("isSelected",!!ctx_r2.selectedSuggestions[object_r7.id])("isCollectionFixed",ctx_r2.isCollectionFixed(core.eq3(3,_c1,object_r7)))}}function SuggestionsPageComponent_ng_container_3_Conditional_3_Conditional_16_Template(rf,ctx){if(1&rf){const _r5=core.RV6();core.j41(0,"ds-pagination",12),core.bIt("paginationChange",function(){core.eBV(_r5);const ctx_r2=core.XpG(3);return core.Njj(ctx_r2.onPaginationChange())}),core.j41(1,"ul",13),core.Z7z(2,SuggestionsPageComponent_ng_container_3_Conditional_3_Conditional_16_For_3_Template,2,5,"li",14,core.fX1),core.k0s()()}if(2&rf){const suggestionsRD_r2=core.XpG(2).ngVar,ctx_r2=core.XpG();core.Y8G("paginationOptions",ctx_r2.paginationOptions)("sortOptions",ctx_r2.paginationSortConfig)("collectionSize",null==suggestionsRD_r2||null==suggestionsRD_r2.pageInfo?null:suggestionsRD_r2.pageInfo.totalElements)("hideGear",!1)("hidePagerWhenSinglePage",!1)("hidePaginationDetail",!1),core.R7$(2),core.Dyx(null==suggestionsRD_r2?null:suggestionsRD_r2.page)}}function SuggestionsPageComponent_ng_container_3_Conditional_3_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div")(1,"h1"),core.EFF(2),core.nI1(3,"translate"),core.j41(4,"a",5),core.EFF(5),core.k0s(),core.EFF(6),core.nI1(7,"translate"),core.nI1(8,"translate"),core.k0s(),core.j41(9,"div",6)(10,"button",7),core.bIt("click",function(){core.eBV(_r1);const suggestionsRD_r2=core.XpG().ngVar,ctx_r2=core.XpG();return core.Njj(ctx_r2.onToggleSelectAll(suggestionsRD_r2.page))}),core.EFF(11,"Select / Deselect All"),core.k0s(),core.j41(12,"em"),core.EFF(13),core.k0s(),core.DNE(14,SuggestionsPageComponent_ng_container_3_Conditional_3_Conditional_14_Template,1,2,"ds-suggestion-actions",8)(15,SuggestionsPageComponent_ng_container_3_Conditional_3_Conditional_15_Template,1,0,"i",9),core.k0s(),core.DNE(16,SuggestionsPageComponent_ng_container_3_Conditional_3_Conditional_16_Template,4,6,"ds-pagination",10),core.nI1(17,"async"),core.k0s()}if(2&rf){const ctx_r2=core.XpG(2);core.R7$(2),core.SpI(" ",core.bMT(3,9,"suggestion.suggestionFor")," "),core.R7$(2),core.Y8G("routerLink",core.eq3(17,_c0,ctx_r2.researcherUuid)),core.R7$(),core.JRh(ctx_r2.researcherName),core.R7$(),core.Lme(" ",core.bMT(7,11,"suggestion.from.source")," ",core.bMT(8,13,ctx_r2.translateSuggestionSource())," "),core.R7$(7),core.SpI("(",ctx_r2.getSelectedSuggestionsCount(),")"),core.R7$(),core.vxM(ctx_r2.getSelectedSuggestionsCount()>0?14:-1),core.R7$(),core.vxM(ctx_r2.isBulkOperationPending?15:-1),core.R7$(),core.vxM(!0!==core.bMT(17,15,ctx_r2.processing$)?16:-1)}}function SuggestionsPageComponent_ng_container_3_Conditional_5_Template(rf,ctx){1&rf&&(core.j41(0,"ds-alert",4),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.Y8G("type","alert-info"),core.R7$(),core.SpI(" ",core.bMT(2,2,"suggestion.count.missing")," "))}function SuggestionsPageComponent_ng_container_3_Template(rf,ctx){if(1&rf&&(core.qex(0),core.DNE(1,SuggestionsPageComponent_ng_container_3_Conditional_1_Template,1,0,"ds-loading"),core.nI1(2,"async"),core.DNE(3,SuggestionsPageComponent_ng_container_3_Conditional_3_Template,18,19,"div"),core.nI1(4,"async"),core.DNE(5,SuggestionsPageComponent_ng_container_3_Conditional_5_Template,3,4,"ds-alert",4),core.nI1(6,"async"),core.bVm()),2&rf){const suggestionsRD_r2=ctx.ngVar,ctx_r2=core.XpG();core.R7$(),core.vxM(core.bMT(2,3,ctx_r2.processing$)?1:-1),core.R7$(2),core.vxM(!0!==core.bMT(4,5,ctx_r2.processing$)&&(null==suggestionsRD_r2||null==suggestionsRD_r2.pageInfo?null:suggestionsRD_r2.pageInfo.totalElements)>0?3:-1),core.R7$(2),core.vxM(!0===core.bMT(6,7,ctx_r2.processing$)||0!==(null==suggestionsRD_r2||null==suggestionsRD_r2.pageInfo?null:suggestionsRD_r2.pageInfo.totalElements)&&suggestionsRD_r2?-1:5)}}let SuggestionsPageComponent=(()=>{class SuggestionsPageComponent2{constructor(authService,notificationService,paginationService,route,router2,suggestionService,suggestionTargetsStateService,translateService,workspaceItemService){this.authService=authService,this.notificationService=notificationService,this.paginationService=paginationService,this.route=route,this.router=router2,this.suggestionService=suggestionService,this.suggestionTargetsStateService=suggestionTargetsStateService,this.translateService=translateService,this.workspaceItemService=workspaceItemService,this.paginationOptions=Object.assign(new pagination_component_options_model.W,{id:"sp",pageSizeOptions:[5,10,20,40,60]}),this.paginationSortConfig=new sort_options_model.z("trust",sort_options_model.U.DESC),this.defaultConfig=Object.assign(new find_list_options_model._,{sort:this.paginationSortConfig}),this.processing$=new cjs.BehaviorSubject(!1),this.suggestionsRD$=new cjs.BehaviorSubject({}),this.selectedSuggestions={},this.isBulkOperationPending=!1}ngOnInit(){this.targetRD$=this.route.data.pipe((0,operators.Tj)(data=>data.suggestionTargets),(0,authorized_operators.QD)(this.router,this.authService)),this.targetId$=this.targetRD$.pipe((0,shared_operators.ak)(),(0,operators.Tj)(target=>target.id)),this.targetRD$.pipe((0,shared_operators.ak)(),(0,operators.Mi)(suggestionTarget=>{this.suggestionTarget=suggestionTarget,this.suggestionId=suggestionTarget.id,this.researcherName=suggestionTarget.display,this.suggestionSource=suggestionTarget.source,this.researcherUuid=this.suggestionService.getTargetUuid(suggestionTarget)}),(0,operators.nx)(()=>this.updatePage())).subscribe(),this.suggestionTargetsStateService.dispatchMarkUserSuggestionsAsVisitedAction()}onPaginationChange(){this.updatePage().subscribe()}updatePage(){this.processing$.next(!0);const pageConfig$=this.paginationService.getFindListOptions(this.paginationOptions.id,this.defaultConfig).pipe((0,operators.F)());return(0,cjs.combineLatest)([this.targetId$,pageConfig$]).pipe((0,operators.nx)(([targetId,config])=>this.suggestionService.getSuggestions(targetId,config.elementsPerPage,config.currentPage,config.sort)),(0,shared_operators.qD)(),(0,operators.Mi)(resultsRD=>{this.processing$.next(!1),this.suggestionsRD$.next(resultsRD.hasSucceeded?resultsRD.payload:null),this.suggestionService.clearSuggestionRequests()}))}ignoreSuggestion(suggestionId){this.suggestionService.ignoreSuggestion(suggestionId).pipe((0,operators.Mi)(()=>this.suggestionTargetsStateService.dispatchRefreshUserSuggestionsAction()),(0,operators.nx)(()=>this.updatePage())).subscribe()}ignoreSuggestionAllSelected(){this.isBulkOperationPending=!0,this.suggestionService.ignoreSuggestionMultiple(Object.values(this.selectedSuggestions)).pipe((0,operators.Mi)(results=>{this.suggestionTargetsStateService.dispatchRefreshUserSuggestionsAction(),this.isBulkOperationPending=!1,this.selectedSuggestions={},results.success>0&&this.notificationService.success(this.translateService.get("suggestion.ignoreSuggestion.bulk.success",{count:results.success})),results.fails>0&&this.notificationService.error(this.translateService.get("suggestion.ignoreSuggestion.bulk.error",{count:results.fails}))}),(0,operators.nx)(()=>this.updatePage())).subscribe()}approveAndImport(event){this.suggestionService.approveAndImport(this.workspaceItemService,event.suggestion,event.collectionId).pipe((0,operators.Mi)(workspaceitem=>{const content=this.translateService.instant("suggestion.approveAndImport.success",{url:(0,workflowitems_edit_page_routing_paths.Uf)(workspaceitem.id)});this.notificationService.success("",content,{timeOut:0},!0),this.suggestionTargetsStateService.dispatchRefreshUserSuggestionsAction()}),(0,operators.nx)(()=>this.updatePage())).subscribe()}approveAndImportAllSelected(event){this.isBulkOperationPending=!0,this.suggestionService.approveAndImportMultiple(this.workspaceItemService,Object.values(this.selectedSuggestions),event.collectionId).pipe((0,operators.Mi)(results=>{this.suggestionTargetsStateService.dispatchRefreshUserSuggestionsAction(),this.isBulkOperationPending=!1,this.selectedSuggestions={},results.success>0&&this.notificationService.success(this.translateService.get("suggestion.approveAndImport.bulk.success",{count:results.success})),results.fails>0&&this.notificationService.error(this.translateService.get("suggestion.approveAndImport.bulk.error",{count:results.fails}))}),(0,operators.nx)(()=>this.updatePage())).subscribe()}onSelected(object,selected){selected?this.selectedSuggestions[object.id]=object:delete this.selectedSuggestions[object.id]}onToggleSelectAll(suggestions){this.getSelectedSuggestionsCount()>0?this.selectedSuggestions={}:suggestions.forEach(suggestion=>{this.selectedSuggestions[suggestion.id]=suggestion})}getSelectedSuggestionsCount(){return Object.keys(this.selectedSuggestions).length}isCollectionFixed(suggestions){return this.suggestionService.isCollectionFixed(suggestions)}translateSuggestionSource(){return this.suggestionService.translateSuggestionSource(this.suggestionSource)}translateSuggestionType(){return this.suggestionService.translateSuggestionType(this.suggestionSource)}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||SuggestionsPageComponent2)(core.rXU(auth_service.uR),core.rXU(notifications_service.I),core.rXU(pagination_service.m),core.rXU(router.nX),core.rXU(router.Ix),core.rXU(suggestions_service.F),core.rXU(suggestion_targets_state_service.x),core.rXU(ngx_translate_core.c$),core.rXU(workspaceitem_data_service.WorkspaceitemDataService))}}static{this.\u0275cmp=core.VBU({type:SuggestionsPageComponent2,selectors:[["ds-suggestion-page"]],standalone:!0,features:[core.aNF],decls:5,vars:3,consts:[[1,"container"],[1,"row"],[1,"col-12"],[4,"ngVar"],[3,"type"],["target","_blank",3,"routerLink"],[1,"mb-3","mt-3"],[1,"btn","me-2","btn-light",3,"click"],[1,"m-2",3,"isBulk","isCollectionFixed"],[1,"fas","fa-circle-notch","fa-spin"],[3,"paginationOptions","sortOptions","collectionSize","hideGear","hidePagerWhenSinglePage","hidePaginationDetail"],[1,"m-2",3,"approveAndImport","ignoreSuggestionClicked","isBulk","isCollectionFixed"],[3,"paginationChange","paginationOptions","sortOptions","collectionSize","hideGear","hidePagerWhenSinglePage","hidePaginationDetail"],[1,"list-unstyled"],[1,"mt-4","mb-4"],[3,"ignoreSuggestionClicked","selected","approveAndImport","object","isSelected","isCollectionFixed"]],template:function(rf,ctx){1&rf&&(core.j41(0,"div",0)(1,"div",1)(2,"div",2),core.DNE(3,SuggestionsPageComponent_ng_container_3_Template,7,9,"ng-container",3),core.nI1(4,"async"),core.k0s()()()),2&rf&&(core.R7$(3),core.Y8G("ngVar",core.bMT(4,1,ctx.suggestionsRD$)))},dependencies:[alert_component.C,common.Jj,pagination_component.e,router.Wk,SuggestionActionsComponent,SuggestionListElementComponent,themed_loading_component.v,ngx_translate_core.h,ngx_translate_core.D9,var_directive.r]})}}return SuggestionsPageComponent2})();var suggestion_target_data_service=__webpack_require__(83454);const ROUTES=[{path:":targetId",resolve:{suggestionTargets:(route,state,suggestionsDataService=(0,core.WQX)(suggestion_target_data_service.SuggestionTargetDataService))=>suggestionsDataService.getTargetById(route.params.targetId).pipe((0,shared_operators.qD)()),breadcrumb:(route,state,breadcrumbService=(0,core.WQX)(PublicationClaimBreadcrumbService))=>({provider:breadcrumbService,key:route.paramMap.get("targetId").split(":")[1]})},data:{title:"admin.notifications.publicationclaim.page.title",breadcrumbKey:"admin.notifications.publicationclaim",showBreadcrumbsFluid:!1},canActivate:[authenticated_guard.t],runGuardsAndResolvers:"always",component:SuggestionsPageComponent}]}};