"use strict";exports.id=6373,exports.ids=[6373,133],exports.modules={6373:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ROUTES:()=>ROUTES});var i18n_breadcrumb_resolver=__webpack_require__(12213),core=__webpack_require__(25376),cjs=__webpack_require__(9238),breadcrumb_model=__webpack_require__(48020);let NavigationBreadcrumbsService=(()=>{class NavigationBreadcrumbsService2{getBreadcrumbs(key,url){const keys=key.split(":"),urls=url.split(":"),breadcrumbs=keys.map((currentKey,index)=>new breadcrumb_model.Q(currentKey+".breadcrumbs",urls[index]));return(0,cjs.of)(breadcrumbs.reverse())}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||NavigationBreadcrumbsService2)}}static{this.\u0275prov=core.jDH({token:NavigationBreadcrumbsService2,factory:NavigationBreadcrumbsService2.\u0275fac,providedIn:"root"})}}return NavigationBreadcrumbsService2})();const navigationBreadcrumbResolver=(route,state,breadcrumbService=(0,core.WQX)(NavigationBreadcrumbsService))=>{const parentRoutes=[];getParentRoutes(route,parentRoutes);const relatedRoutes=route.data.relatedRoutes,parentPaths=parentRoutes.map(parent=>parent.routeConfig?.path),relatedParentRoutes=relatedRoutes.filter(relatedRoute=>parentPaths.includes(relatedRoute.path)),baseUrlSegmentPath=route.parent.url[route.parent.url.length-1].path,baseUrl=state.url.substring(0,state.url.lastIndexOf(baseUrlSegmentPath)+baseUrlSegmentPath.length);return{provider:breadcrumbService,key:relatedParentRoutes.reduce((previous,current)=>`${previous}:${current.data.breadcrumbKey}`,route.data.breadcrumbKey),url:relatedParentRoutes.reduce((previous,current)=>`${previous}:${baseUrl}${current.path}`,state.url)}};function getParentRoutes(route,parentRoutes){route.parent&&(parentRoutes.push(route.parent),getParentRoutes(route.parent,parentRoutes))}var animations=__webpack_require__(9194),common=__webpack_require__(87514),fesm2022_forms=__webpack_require__(13054),ng_bootstrap=__webpack_require__(87969),ngx_translate_core=__webpack_require__(2385),find_list_options_model=__webpack_require__(72248),pagination_service=__webpack_require__(31903),operators=__webpack_require__(39022),notifications_service=__webpack_require__(76623);let IpV4Validator=(()=>{class IpV4Validator2{validate(formControl){const ipValue=formControl.value,ipParts=ipValue?.split(".");return/^(\d{1,3}\.){3}\d{1,3}$/.test(ipValue)&&ipParts.every(part=>parseInt(part,10)<=255)?null:{isValidIp:!1}}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||IpV4Validator2)}}static{this.\u0275dir=core.FsC({type:IpV4Validator2,selectors:[["","ipV4format",""]],standalone:!0,features:[core.Jv_([{provide:fesm2022_forms.cz,useExisting:IpV4Validator2,multi:!0}])]})}}return IpV4Validator2})();var ldn_itemfilters_data_service=__webpack_require__(10133),ldn_services_data_service=__webpack_require__(11599),ldn_service_resource_type=__webpack_require__(61386),tslib_es6=__webpack_require__(31635),cerialize=__webpack_require__(10483);class NotifyServicePattern{}(0,tslib_es6.Cg)([cerialize.autoserialize,(0,tslib_es6.Sn)("design:type",String)],NotifyServicePattern.prototype,"pattern",void 0),(0,tslib_es6.Cg)([cerialize.autoserialize,(0,tslib_es6.Sn)("design:type",String)],NotifyServicePattern.prototype,"constraint",void 0),(0,tslib_es6.Cg)([cerialize.autoserialize,(0,tslib_es6.Sn)("design:type",String)],NotifyServicePattern.prototype,"automatic",void 0);const notifyPatterns=["request-endorsement","request-ingest","request-review","announce-relationship"];var router=__webpack_require__(18134);const _c0=["confirmModal"],_c1=["resetFormModal"],_c2=[[["","before",""]]],_c3=["[before]"];function LdnServiceFormComponent_Conditional_7_Template(rf,ctx){if(1&rf){const _r2=core.RV6();core.j41(0,"div",7)(1,"label",40),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"div"),core.nrm(5,"input",41),core.j41(6,"div",31),core.bIt("click",function(){core.eBV(_r2);const ctx_r2=core.XpG();return core.Njj(ctx_r2.toggleEnabled())}),core.nrm(7,"div",32),core.k0s()()()}if(2&rf){const ctx_r2=core.XpG();core.R7$(2),core.JRh(core.bMT(3,3,"ldn-service-status")),core.R7$(4),core.AVh("checked",ctx_r2.formModel.get("enabled").value)}}function LdnServiceFormComponent_Conditional_14_Template(rf,ctx){1&rf&&(core.j41(0,"div",11),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"ldn-new-service.form.error.name")," "))}function LdnServiceFormComponent_Conditional_29_Template(rf,ctx){1&rf&&(core.j41(0,"div",11),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"ldn-new-service.form.error.url")," "))}function LdnServiceFormComponent_Conditional_36_Template(rf,ctx){1&rf&&(core.j41(0,"div",11),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"ldn-new-service.form.error.score")," "))}function LdnServiceFormComponent_Conditional_46_Template(rf,ctx){1&rf&&(core.j41(0,"div",11),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"ldn-new-service.form.error.ipRange")," "))}function LdnServiceFormComponent_Conditional_56_Conditional_1_Template(rf,ctx){1&rf&&(core.j41(0,"div",11),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"ldn-new-service.form.error.ldnurl")," "))}function LdnServiceFormComponent_Conditional_56_Conditional_2_Template(rf,ctx){1&rf&&(core.j41(0,"div",11),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"ldn-new-service.form.error.ldnurl.ldnUrlAlreadyAssociated")," "))}function LdnServiceFormComponent_Conditional_56_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.DNE(1,LdnServiceFormComponent_Conditional_56_Conditional_1_Template,3,3,"div",11)(2,LdnServiceFormComponent_Conditional_56_Conditional_2_Template,3,3,"div",11),core.k0s()),2&rf){const ctx_r2=core.XpG();core.R7$(),core.vxM(ctx_r2.formModel.get("ldnUrl").errors.required?1:-1),core.R7$(),core.vxM(ctx_r2.formModel.get("ldnUrl").errors.ldnUrlAlreadyAssociated?2:-1)}}function LdnServiceFormComponent_Conditional_68_Conditional_5_Template(rf,ctx){1&rf&&(core.j41(0,"div",42)(1,"label",43),core.EFF(2),core.nI1(3,"translate"),core.k0s()(),core.j41(4,"div",45)(5,"label",43),core.EFF(6),core.nI1(7,"translate"),core.k0s()()),2&rf&&(core.R7$(2),core.JRh(core.bMT(3,2,"ldn-new-service.form.label.ItemFilter")),core.R7$(4),core.JRh(core.bMT(7,4,"ldn-new-service.form.label.automatic")))}function LdnServiceFormComponent_Conditional_68_Template(rf,ctx){if(1&rf&&(core.j41(0,"div",33)(1,"div",42)(2,"label",43),core.EFF(3),core.nI1(4,"translate"),core.k0s()(),core.DNE(5,LdnServiceFormComponent_Conditional_68_Conditional_5_Template,8,6),core.nrm(6,"div",44),core.k0s()),2&rf){let tmp_3_0;const ctx_r2=core.XpG();core.R7$(3),core.SpI("",core.bMT(4,2,"ldn-new-service.form.label.inboundPattern")," "),core.R7$(2),core.vxM(null!=(tmp_3_0=ctx_r2.formModel.get("notifyServiceInboundPatterns").controls[0])&&null!=tmp_3_0.value&&tmp_3_0.value.pattern?5:-1)}}function LdnServiceFormComponent_Conditional_69_For_2_For_13_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"button",63),core.nI1(1,"translate"),core.bIt("click",function($event){const pattern_r7=core.eBV(_r6).$implicit,\u0275$index_172_r8=core.XpG().$index;return core.XpG(2).selectInboundPattern(pattern_r7,\u0275$index_172_r8),core.Njj($event.stopPropagation())}),core.j41(2,"div"),core.EFF(3),core.nI1(4,"translate"),core.k0s()()}if(2&rf){const pattern_r7=ctx.$implicit;core.Y8G("title",core.bMT(1,2,"ldn-service.form.pattern."+pattern_r7+".description")),core.R7$(3),core.JRh(core.bMT(4,4,"ldn-service.form.pattern."+pattern_r7+".label"))}}function LdnServiceFormComponent_Conditional_69_For_2_Conditional_15_For_15_Template(rf,ctx){if(1&rf){const _r11=core.RV6();core.j41(0,"button",68),core.bIt("click",function($event){const constraint_r12=core.eBV(_r11).$implicit,\u0275$index_172_r8=core.XpG(2).$index;return core.XpG(2).selectInboundItemFilter(constraint_r12.id,\u0275$index_172_r8),core.Njj($event.stopPropagation())}),core.j41(1,"div"),core.EFF(2),core.nI1(3,"translate"),core.k0s()()}if(2&rf){const constraint_r12=ctx.$implicit;core.R7$(2),core.JRh(core.bMT(3,1,constraint_r12.id+".label"))}}function LdnServiceFormComponent_Conditional_69_For_2_Conditional_15_Template(rf,ctx){if(1&rf){const _r9=core.RV6();core.j41(0,"div",57,2)(2,"div",64),core.nrm(3,"i",52)(4,"input",65),core.nI1(5,"translate"),core.j41(6,"input",66),core.nI1(7,"translate"),core.bIt("click",function(){core.eBV(_r9);const inboundItemfilterDropdown_r10=core.sdS(1);return core.Njj(inboundItemfilterDropdown_r10.open())}),core.k0s(),core.j41(8,"div",67)(9,"div",55)(10,"button",68),core.bIt("click",function($event){core.eBV(_r9);const \u0275$index_172_r8=core.XpG().$index;return core.XpG(2).selectInboundItemFilter("",\u0275$index_172_r8),core.Njj($event.stopPropagation())}),core.j41(11,"span"),core.EFF(12),core.nI1(13,"translate"),core.k0s()(),core.Z7z(14,LdnServiceFormComponent_Conditional_69_For_2_Conditional_15_For_15_Template,4,3,"button",69,core.fX1),core.nI1(16,"async"),core.k0s()()()()}if(2&rf){let tmp_22_0;const \u0275$index_172_r8=core.XpG().$index,ctx_r2=core.XpG(2);core.Mz_("id","constraint",\u0275$index_172_r8,""),core.R7$(4),core.Y8G("readonly",!0),core.BMQ("aria-label",core.bMT(5,7,"ldn-service-input-inbound-item-filter-dropdown")),core.R7$(2),core.Y8G("readonly",!0),core.BMQ("aria-label",core.bMT(7,9,"ldn-service-input-inbound-item-filter-dropdown")),core.R7$(6),core.SpI(" ",core.bMT(13,11,"ldn-service.control-constaint-select-none")," "),core.R7$(2),core.Dyx(null==(tmp_22_0=core.bMT(16,13,ctx_r2.itemFiltersRD$))||null==tmp_22_0.payload?null:tmp_22_0.payload.page)}}function LdnServiceFormComponent_Conditional_69_For_2_Conditional_25_Template(rf,ctx){if(1&rf){const _r13=core.RV6();core.j41(0,"button",70),core.nI1(1,"translate"),core.bIt("click",function(){core.eBV(_r13);const \u0275$index_172_r8=core.XpG().$index,ctx_r2=core.XpG(2);return core.Njj(ctx_r2.unmarkForInboundPatternDeletion(\u0275$index_172_r8))}),core.nrm(2,"i",71),core.k0s()}2&rf&&core.Y8G("title",core.bMT(1,1,"ldn-service-button-unmark-inbound-deletion"))}function LdnServiceFormComponent_Conditional_69_For_2_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"div",47),core.qex(1,48),core.j41(2,"div",49)(3,"div",42)(4,"div",50,1)(6,"div",51),core.nrm(7,"i",52),core.j41(8,"input",53),core.nI1(9,"translate"),core.bIt("click",function(){core.eBV(_r4);const inboundPatternDropdown_r5=core.sdS(5);return core.Njj(inboundPatternDropdown_r5.open())}),core.k0s(),core.j41(10,"div",54)(11,"div",55),core.Z7z(12,LdnServiceFormComponent_Conditional_69_For_2_For_13_Template,5,6,"button",56,core.fX1),core.k0s()()()()(),core.j41(14,"div",42),core.DNE(15,LdnServiceFormComponent_Conditional_69_For_2_Conditional_15_Template,17,15,"div",57),core.k0s(),core.j41(16,"div",45),core.nrm(17,"input",58),core.j41(18,"div",31),core.bIt("click",function(){const \u0275$index_172_r8=core.eBV(_r4).$index,ctx_r2=core.XpG(2);return core.Njj(ctx_r2.toggleAutomatic(\u0275$index_172_r8))}),core.nrm(19,"div",32),core.k0s()(),core.j41(20,"div",44)(21,"div",59)(22,"button",60),core.nI1(23,"translate"),core.bIt("click",function(){const \u0275$index_172_r8=core.eBV(_r4).$index,ctx_r2=core.XpG(2);return core.Njj(ctx_r2.markForInboundPatternDeletion(\u0275$index_172_r8))}),core.nrm(24,"i",61),core.k0s(),core.DNE(25,LdnServiceFormComponent_Conditional_69_For_2_Conditional_25_Template,3,3,"button",62),core.k0s()()(),core.bVm(),core.k0s()}if(2&rf){const \u0275$index_172_r8=ctx.$index,ctx_r2=core.XpG(2);core.AVh("marked-for-deletion",ctx_r2.markedForDeletionInboundPattern.includes(\u0275$index_172_r8)),core.R7$(),core.Y8G("formGroupName",\u0275$index_172_r8),core.R7$(3),core.Mz_("id","additionalInboundPattern",\u0275$index_172_r8,""),core.R7$(4),core.Y8G("readonly",!0)("value",ctx_r2.selectedInboundPatterns),core.BMQ("aria-label",core.bMT(9,19,"ldn-service-input-inbound-pattern-dropdown")),core.R7$(4),core.Dyx(ctx_r2.inboundPatterns),core.R7$(3),core.vxM(ctx_r2.formModel.get("notifyServiceInboundPatterns").controls[\u0275$index_172_r8].value.pattern?15:-1),core.R7$(),core.xc7("visibility",ctx_r2.formModel.get("notifyServiceInboundPatterns").controls[\u0275$index_172_r8].value.pattern?"visible":"hidden"),core.R7$(),core.Mz_("id","automatic",\u0275$index_172_r8,""),core.Mz_("name","automatic",\u0275$index_172_r8,""),core.R7$(),core.AVh("checked",ctx_r2.formModel.get("notifyServiceInboundPatterns."+\u0275$index_172_r8+".automatic").value),core.R7$(4),core.Y8G("title",core.bMT(23,21,"ldn-service-button-mark-inbound-deletion")),core.R7$(3),core.vxM(ctx_r2.markedForDeletionInboundPattern.includes(\u0275$index_172_r8)?25:-1)}}function LdnServiceFormComponent_Conditional_69_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.Z7z(1,LdnServiceFormComponent_Conditional_69_For_2_Template,26,23,"div",46,core.fX1),core.k0s()),2&rf){const ctx_r2=core.XpG();core.R7$(),core.Dyx(ctx_r2.formModel.get("notifyServiceInboundPatterns").controls)}}function LdnServiceFormComponent_ng_template_86_Conditional_1_Template(rf,ctx){1&rf&&(core.j41(0,"h4"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"service.overview.edit.modal")))}function LdnServiceFormComponent_ng_template_86_Conditional_2_Template(rf,ctx){1&rf&&(core.j41(0,"h4"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.JRh(core.bMT(2,1,"service.overview.create.modal")))}function LdnServiceFormComponent_ng_template_86_Conditional_5_Template(rf,ctx){1&rf&&(core.j41(0,"div"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"service.overview.edit.body")," "))}function LdnServiceFormComponent_ng_template_86_Conditional_6_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.EFF(1),core.nI1(2,"translate"),core.k0s()),2&rf&&(core.R7$(),core.SpI(" ",core.bMT(2,1,"service.overview.create.body")," "))}function LdnServiceFormComponent_ng_template_86_Conditional_8_Conditional_4_Template(rf,ctx){if(1&rf){const _r16=core.RV6();core.j41(0,"button",78),core.bIt("click",function(){core.eBV(_r16);const ctx_r2=core.XpG(3);return core.Njj(ctx_r2.patchService())}),core.EFF(1),core.nI1(2,"translate"),core.k0s()}2&rf&&(core.R7$(),core.SpI("",core.bMT(2,1,"service.detail.update")," "))}function LdnServiceFormComponent_ng_template_86_Conditional_8_Template(rf,ctx){if(1&rf){const _r15=core.RV6();core.j41(0,"div")(1,"button",76),core.bIt("click",function(){core.eBV(_r15);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.closeModal())}),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.DNE(4,LdnServiceFormComponent_ng_template_86_Conditional_8_Conditional_4_Template,3,3,"button",77),core.k0s()}if(2&rf){const ctx_r2=core.XpG(2);core.R7$(2),core.SpI("",core.bMT(3,2,"service.detail.return")," "),core.R7$(2),core.vxM(ctx_r2.isNewService?-1:4)}}function LdnServiceFormComponent_ng_template_86_Conditional_9_Template(rf,ctx){if(1&rf){const _r17=core.RV6();core.j41(0,"div")(1,"button",79),core.bIt("click",function(){core.eBV(_r17);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.closeModal())}),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"button",78),core.bIt("click",function(){core.eBV(_r17);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.createService())}),core.EFF(5),core.nI1(6,"translate"),core.k0s()()}2&rf&&(core.R7$(2),core.SpI("",core.bMT(3,2,"service.refuse.create")," "),core.R7$(3),core.SpI("",core.bMT(6,4,"service.confirm.create")," "))}function LdnServiceFormComponent_ng_template_86_Template(rf,ctx){if(1&rf){const _r14=core.RV6();core.j41(0,"div",72),core.DNE(1,LdnServiceFormComponent_ng_template_86_Conditional_1_Template,3,3,"h4")(2,LdnServiceFormComponent_ng_template_86_Conditional_2_Template,3,3,"h4"),core.j41(3,"button",73),core.bIt("click",function(){core.eBV(_r14);const ctx_r2=core.XpG();return core.Njj(ctx_r2.closeModal())}),core.k0s()(),core.j41(4,"div",74),core.DNE(5,LdnServiceFormComponent_ng_template_86_Conditional_5_Template,3,3,"div")(6,LdnServiceFormComponent_ng_template_86_Conditional_6_Template,3,3,"span"),core.k0s(),core.j41(7,"div",75),core.DNE(8,LdnServiceFormComponent_ng_template_86_Conditional_8_Template,5,4,"div")(9,LdnServiceFormComponent_ng_template_86_Conditional_9_Template,7,6,"div"),core.k0s()}if(2&rf){const ctx_r2=core.XpG();core.R7$(),core.vxM(ctx_r2.isNewService?-1:1),core.R7$(),core.vxM(ctx_r2.isNewService?2:-1),core.R7$(3),core.vxM(ctx_r2.isNewService?-1:5),core.R7$(),core.vxM(ctx_r2.isNewService?6:-1),core.R7$(2),core.vxM(ctx_r2.isNewService?-1:8),core.R7$(),core.vxM(ctx_r2.isNewService?9:-1)}}let LdnServiceFormComponent=(()=>{class LdnServiceFormComponent2{constructor(ldnServicesService,ldnItemFiltersService,formBuilder,router2,route,cdRef,modalService,notificationService,translateService,paginationService){this.ldnServicesService=ldnServicesService,this.ldnItemFiltersService=ldnItemFiltersService,this.formBuilder=formBuilder,this.router=router2,this.route=route,this.cdRef=cdRef,this.modalService=modalService,this.notificationService=notificationService,this.translateService=translateService,this.paginationService=paginationService,this.inboundPatterns=notifyPatterns,this.config=Object.assign(new find_list_options_model._,{elementsPerPage:20}),this.markedForDeletionInboundPattern=[],this.deletedInboundPatterns=[],this.selectPatternDefaultLabelI18Key="ldn-service.form.label.placeholder.default-select",this.formModel=this.formBuilder.group({id:[""],name:["",fesm2022_forms.k0.required],description:[""],url:["",fesm2022_forms.k0.required],ldnUrl:["",fesm2022_forms.k0.required],lowerIp:["",[fesm2022_forms.k0.required,new IpV4Validator]],upperIp:["",[fesm2022_forms.k0.required,new IpV4Validator]],score:["",[fesm2022_forms.k0.required,fesm2022_forms.k0.pattern("^0*(.[0-9]+)?$|^1(.0+)?$")]],inboundPattern:[""],constraintPattern:[""],enabled:[""],usesActorEmailId:[""],type:ldn_service_resource_type.zd.value})}ngOnInit(){this.routeSubscription=this.route.params.pipe((0,cjs.combineLatestWith)(this.route.url)).subscribe(([params,segment])=>{this.serviceId=params.serviceId,this.isNewService="new"===segment[0].path,this.formModel.addControl("notifyServiceInboundPatterns",this.formBuilder.array([this.createInboundPatternFormGroup()])),this.areControlsInitialized=!0,this.serviceId&&!this.isNewService&&this.fetchServiceData(this.serviceId)}),this.setItemFilters()}ngOnDestroy(){this.routeSubscription.unsubscribe()}setItemFilters(){this.itemFiltersRD$=this.ldnItemFiltersService.findAll().pipe((0,operators.qD)())}createService(){if(this.formModel.markAllAsTouched(),this.formModel.invalid)return void this.closeModal();this.formModel.value.notifyServiceInboundPatterns=this.formModel.value.notifyServiceInboundPatterns.map(pattern=>{const{patternLabel,...rest}=pattern;return delete rest.constraintFormatted,rest});const values={...this.formModel.value,enabled:!0,usesActorEmailId:this.formModel.get("usesActorEmailId").value};this.ldnServicesService.create(values).pipe((0,operators.qD)()).subscribe(rd=>{rd.hasSucceeded?(this.notificationService.success(this.translateService.get("ldn-service-notification.created.success.title"),this.translateService.get("ldn-service-notification.created.success.body")),this.closeModal(),this.sendBack()):(this.formModel.errors||this.setLdnUrlError(),this.notificationService.error(this.translateService.get("ldn-service-notification.created.failure.title"),this.translateService.get("ldn-service-notification.created.failure.body")),this.closeModal())})}checkPatterns(formArray){for(let i=0;i<formArray.length;i++)if(formArray.at(i).get("pattern").value)return!0;return!1}fetchServiceData(serviceId){this.ldnServicesService.findById(serviceId).pipe((0,operators.qD)()).subscribe(data=>{data.hasSucceeded&&(this.ldnService=data.payload,this.formModel.patchValue({id:this.ldnService.id,name:this.ldnService.name,description:this.ldnService.description,url:this.ldnService.url,score:this.ldnService.score,ldnUrl:this.ldnService.ldnUrl,type:this.ldnService.type,enabled:this.ldnService.enabled,usesActorEmailId:this.ldnService.usesActorEmailId,lowerIp:this.ldnService.lowerIp,upperIp:this.ldnService.upperIp}),this.filterPatternObjectsAndAssignLabel("notifyServiceInboundPatterns"),this.formModel.get("notifyServiceInboundPatterns").controls.forEach(control=>{const controlFormGroup=control,controlConstraint=controlFormGroup.get("constraint").value;controlFormGroup.patchValue({constraintFormatted:controlConstraint?this.translateService.instant(controlConstraint+".label"):""})}))})}filterPatternObjectsAndAssignLabel(formArrayName){const PatternsArray=this.formModel.get(formArrayName);PatternsArray.clear();const servicesToUse=[...this.ldnService.notifyServiceInboundPatterns];0===servicesToUse.length&&servicesToUse.push({pattern:"",constraint:"",automatic:"false"}),servicesToUse.forEach(patternObj=>{const patternFormGroup=this.initializeInboundPatternFormGroup(),patternLabel=patternObj?.pattern?"ldn-service.form.pattern."+patternObj?.pattern+".label":"ldn-service.form.label.placeholder.default-select",newPatternObjWithLabel=Object.assign(new NotifyServicePattern,{...patternObj,patternLabel:this.translateService.instant(patternLabel)});patternFormGroup.patchValue(newPatternObjWithLabel),PatternsArray.push(patternFormGroup),this.cdRef.detectChanges()})}generatePatchOperations(){const patchOperations=[];return this.createReplaceOperation(patchOperations,"name","/name"),this.createReplaceOperation(patchOperations,"description","/description"),this.createReplaceOperation(patchOperations,"ldnUrl","/ldnurl"),this.createReplaceOperation(patchOperations,"url","/url"),this.createReplaceOperation(patchOperations,"score","/score"),this.createReplaceOperation(patchOperations,"lowerIp","/lowerIp"),this.createReplaceOperation(patchOperations,"upperIp","/upperIp"),this.handlePatterns(patchOperations,"notifyServiceInboundPatterns"),this.deletedInboundPatterns.forEach(index=>{patchOperations.push({op:"remove",path:`notifyServiceInboundPatterns[${index}]`})}),patchOperations}onSubmit(){this.openConfirmModal(this.confirmModal)}addInboundPattern(){this.formModel.get("notifyServiceInboundPatterns").push(this.createInboundPatternFormGroup())}selectInboundPattern(patternValue,index){const patternArray=this.formModel.get("notifyServiceInboundPatterns");patternArray.controls[index].patchValue({pattern:patternValue}),patternArray.controls[index].patchValue({patternLabel:this.translateService.instant("ldn-service.form.pattern."+patternValue+".label")})}selectInboundItemFilter(filterValue,index){const filterArray=this.formModel.get("notifyServiceInboundPatterns");filterArray.controls[index].patchValue({constraint:filterValue,constraintFormatted:this.translateService.instant((""!==filterValue?filterValue:"ldn.no-filter")+".label")}),filterArray.markAllAsTouched()}toggleAutomatic(i){const automaticControl=this.formModel.get(`notifyServiceInboundPatterns.${i}.automatic`);automaticControl&&(automaticControl.markAsTouched(),automaticControl.setValue(!automaticControl.value))}toggleEnabled(){const newStatus=!this.formModel.get("enabled").value;this.ldnServicesService.patch(this.ldnService,[{op:"replace",path:"/enabled",value:newStatus}]).pipe((0,operators.qD)()).subscribe(()=>{this.formModel.get("enabled").setValue(newStatus),this.cdRef.detectChanges()})}toggleUsesActorEmailId(){const newStatus=!this.formModel.get("usesActorEmailId").value;this.isNewService?(this.formModel.get("usesActorEmailId").setValue(newStatus),this.cdRef.detectChanges()):this.ldnServicesService.patch(this.ldnService,[{op:"replace",path:"/usesActorEmailId",value:newStatus}]).pipe((0,operators.qD)()).subscribe(()=>{this.formModel.get("usesActorEmailId").setValue(newStatus),this.cdRef.detectChanges()})}closeModal(){this.modalRef.close(),this.cdRef.detectChanges()}openConfirmModal(content){this.modalRef=this.modalService.open(content)}patchService(){this.deleteMarkedInboundPatterns();const patchOperations=this.generatePatchOperations();this.formModel.markAllAsTouched(),this.formModel.invalid?this.closeModal():this.ldnServicesService.patch(this.ldnService,patchOperations).pipe((0,operators.qD)()).subscribe(rd=>{rd.hasSucceeded?(this.closeModal(),this.sendBack(),this.notificationService.success(this.translateService.get("admin.registries.services-formats.modify.success.head"),this.translateService.get("admin.registries.services-formats.modify.success.content"))):(this.formModel.errors||this.setLdnUrlError(),this.notificationService.error(this.translateService.get("admin.registries.services-formats.modify.failure.head"),this.translateService.get("admin.registries.services-formats.modify.failure.content")),this.closeModal())})}resetFormAndLeave(){this.sendBack()}markForInboundPatternDeletion(index){this.markedForDeletionInboundPattern.includes(index)||this.markedForDeletionInboundPattern.push(index)}unmarkForInboundPatternDeletion(index){const i=this.markedForDeletionInboundPattern.indexOf(index);-1!==i&&this.markedForDeletionInboundPattern.splice(i,1)}deleteMarkedInboundPatterns(){this.markedForDeletionInboundPattern.sort((a,b)=>b-a);const patternsArray=this.formModel.get("notifyServiceInboundPatterns");for(const index of this.markedForDeletionInboundPattern)index>=0&&index<patternsArray.length&&(patternsArray.at(index).value.isNew?patternsArray.removeAt(index):this.deletedInboundPatterns.push(index));this.markedForDeletionInboundPattern=[]}createReplaceOperation(patchOperations,formControlName,path){this.formModel.get(formControlName).dirty&&patchOperations.push({op:"replace",path,value:this.formModel.get(formControlName).value.toString()})}handlePatterns(patchOperations,formArrayName){const patternsArray=this.formModel.get(formArrayName);for(let i=0;i<patternsArray.length;i++){const patternGroup=patternsArray.at(i),patternValue=patternGroup.value;delete patternValue.constraintFormatted,patternGroup.touched&&patternGroup.valid&&(delete patternValue?.patternLabel,patternValue.isNew?(delete patternValue.isNew,patchOperations.push({op:"add",path:`${formArrayName}/-`,value:patternValue})):patchOperations.push({op:"replace",path:`${formArrayName}[${i}]`,value:patternValue}))}}sendBack(){this.router.navigateByUrl("admin/ldn/services")}createInboundPatternFormGroup(){const inBoundFormGroup={pattern:"",patternLabel:this.translateService.instant(this.selectPatternDefaultLabelI18Key),constraint:"",constraintFormatted:"",automatic:!1,isNew:!0};return this.isNewService&&delete inBoundFormGroup.isNew,this.formBuilder.group(inBoundFormGroup)}initializeInboundPatternFormGroup(){return this.formBuilder.group({pattern:"",patternLabel:"",constraint:"",constraintFormatted:"",automatic:""})}setLdnUrlError(){const control=this.formModel.controls.ldnUrl;control.setErrors({...control.errors||{},ldnUrlAlreadyAssociated:!0})}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||LdnServiceFormComponent2)(core.rXU(ldn_services_data_service.LdnServicesService),core.rXU(ldn_itemfilters_data_service.LdnItemfiltersService),core.rXU(fesm2022_forms.ok),core.rXU(router.Ix),core.rXU(router.nX),core.rXU(core.gRc),core.rXU(ng_bootstrap.Bq),core.rXU(notifications_service.I),core.rXU(ngx_translate_core.c$),core.rXU(pagination_service.m))}}static{this.\u0275cmp=core.VBU({type:LdnServiceFormComponent2,selectors:[["ds-ldn-service-form"]],viewQuery:function(rf,ctx){if(1&rf&&(core.GBs(_c0,7),core.GBs(_c1,7)),2&rf){let _t;core.mGM(_t=core.lsd())&&(ctx.confirmModal=_t.first),core.mGM(_t=core.lsd())&&(ctx.resetFormModal=_t.first)}},standalone:!0,features:[core.aNF],ngContentSelectors:_c3,decls:88,vars:85,consts:[["confirmModal",""],["inboundPatternDropdown","ngbDropdown"],["inboundItemfilterDropdown","ngbDropdown"],[1,"container"],[3,"ngSubmit","formGroup"],[1,"d-flex"],[1,"flex-grow-1"],[1,"toggle-switch-container"],[1,"mb-5"],["for","name",1,"fw-bold"],["formControlName","name","id","name","name","name","type","text",1,"form-control",3,"placeholder"],[1,"error-text"],[1,"mb-5","mt-5","d-flex","flex-column"],["for","description",1,"fw-bold"],["formControlName","description","id","description","name","description",1,"form-control",3,"placeholder"],[1,"mb-5","mt-5"],[1,"d-flex","align-items-center"],[1,"d-flex","flex-column","w-50","me-2"],["for","url",1,"fw-bold"],["formControlName","url","id","url","name","url","type","text",1,"form-control",3,"placeholder"],[1,"d-flex","flex-column","w-50"],["for","score",1,"fw-bold"],["formControlName","score","id","score","name","score","min","0","max","1","step",".01","type","number",1,"form-control",3,"placeholder"],["for","lowerIp",1,"fw-bold"],["formControlName","lowerIp","id","lowerIp","name","lowerIp","type","text",1,"form-control","me-2",3,"placeholder"],["formControlName","upperIp","id","upperIp","name","upperIp","type","text",1,"form-control",3,"placeholder"],[1,"text-muted"],["for","ldnUrl",1,"fw-bold"],["formControlName","ldnUrl","id","ldnUrl","name","ldnUrl","type","text",1,"form-control",3,"placeholder"],["for","usesActorEmailId",1,"status-label","fw-bold"],["formControlName","usesActorEmailId","hidden","","id","usesActorEmailId","name","usesActorEmailId","type","checkbox"],[1,"toggle-switch",3,"click"],[1,"slider"],[1,"row","mb-1","mt-5"],[1,"add-pattern-link","mb-2",3,"click"],[1,"mb-3","row"],[1,"col","text-end","space-children-mr"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["type","submit",1,"btn","btn-primary"],[1,"fas","fa-save"],["for","enabled",1,"status-label","fw-bold"],["formControlName","enabled","hidden","","id","enabled","name","enabled","type","checkbox"],[1,"col"],[1,"fw-bold"],[1,"col-sm-2"],[1,"col-sm-1"],["formGroupName","notifyServiceInboundPatterns",3,"marked-for-deletion"],["formGroupName","notifyServiceInboundPatterns"],[3,"formGroupName"],[1,"row","mb-1","align-items-center"],["display","dynamic","ngbDropdown","","placement","top-start",1,"w-80",3,"id"],["role","combobox","aria-expanded","false","aria-controls","inboundPatternDropdownButton",1,"position-relative","right-addon"],["aria-hidden","true","ngbDropdownToggle","",1,"position-absolute","scrollable-dropdown-toggle"],["formControlName","patternLabel","id","inboundPatternDropdownButton","ngbDropdownAnchor","","type","text",1,"form-control","w-80","scrollable-dropdown-input",3,"click","readonly","value"],["aria-labelledby","inboundPatternDropdownButton","ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-top","w-100"],["role","listbox",1,"scrollable-menu"],["ngbDropdownItem","","type","button",1,"dropdown-item","collection-item","text-truncate","w-100",3,"title"],["ngbDropdown","","placement","top-start",1,"w-100",3,"id"],["formControlName","automatic","hidden","","type","checkbox",3,"id","name"],[1,"btn-group"],["type","button",1,"btn","btn-outline-dark","trash-button",3,"click","title"],[1,"fas","fa-trash"],["type","button",1,"btn","btn-warning",3,"title"],["ngbDropdownItem","","type","button",1,"dropdown-item","collection-item","text-truncate","w-100",3,"click","title"],["aria-expanded","false","aria-controls","inboundItemfilterDropdown","role","combobox",1,"position-relative","right-addon"],["formControlName","constraint","id","inboundItemfilterDropdown","ngbDropdownAnchor","","type","text",1,"form-control","d-none","w-100","scrollable-dropdown-input",3,"readonly"],["formControlName","constraintFormatted","id","inboundItemfilterDropdownPrettified","ngbDropdownAnchor","","type","text",1,"form-control","w-100","scrollable-dropdown-input",3,"click","readonly"],["aria-labelledby","inboundItemfilterDropdownButton","ngbDropdownMenu","",1,"dropdown-menu","scrollable-dropdown-menu","w-100"],["ngbDropdownItem","","type","button",1,"dropdown-item","collection-item","text-truncate","w-100",3,"click"],["ngbDropdownItem","","type","button",1,"dropdown-item","collection-item","text-truncate","w-100"],["type","button",1,"btn","btn-warning",3,"click","title"],[1,"fas","fa-undo"],[1,"modal-header"],["aria-label","Close","type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"modal-footer"],["id","delete-confirm-edit",1,"btn","btn-outline-secondary","me-2",3,"click"],[1,"btn","btn-primary"],[1,"btn","btn-primary",3,"click"],["id","delete-confirm-new",1,"btn","btn-outline-secondary","me-2",3,"click"]],template:function(rf,ctx){if(1&rf){const _r1=core.RV6();core.NAR(_c2),core.j41(0,"div",3)(1,"form",4),core.bIt("ngSubmit",function(){return core.eBV(_r1),core.Njj(ctx.onSubmit())}),core.j41(2,"div",5)(3,"h1",6),core.EFF(4),core.nI1(5,"translate"),core.nI1(6,"translate"),core.k0s()(),core.DNE(7,LdnServiceFormComponent_Conditional_7_Template,8,5,"div",7),core.j41(8,"div",8)(9,"label",9),core.EFF(10),core.nI1(11,"translate"),core.k0s(),core.nrm(12,"input",10),core.nI1(13,"translate"),core.DNE(14,LdnServiceFormComponent_Conditional_14_Template,3,3,"div",11),core.k0s(),core.j41(15,"div",12)(16,"label",13),core.EFF(17),core.nI1(18,"translate"),core.k0s(),core.nrm(19,"textarea",14),core.nI1(20,"translate"),core.k0s(),core.j41(21,"div",15)(22,"div",16)(23,"div",17)(24,"label",18),core.EFF(25),core.nI1(26,"translate"),core.k0s(),core.nrm(27,"input",19),core.nI1(28,"translate"),core.DNE(29,LdnServiceFormComponent_Conditional_29_Template,3,3,"div",11),core.k0s(),core.j41(30,"div",20)(31,"label",21),core.EFF(32),core.nI1(33,"translate"),core.k0s(),core.nrm(34,"input",22),core.nI1(35,"translate"),core.DNE(36,LdnServiceFormComponent_Conditional_36_Template,3,3,"div",11),core.k0s()()(),core.j41(37,"div",15)(38,"label",23),core.EFF(39),core.nI1(40,"translate"),core.k0s(),core.j41(41,"div",5),core.nrm(42,"input",24),core.nI1(43,"translate"),core.nrm(44,"input",25),core.nI1(45,"translate"),core.k0s(),core.DNE(46,LdnServiceFormComponent_Conditional_46_Template,3,3,"div",11),core.j41(47,"div",26),core.EFF(48),core.nI1(49,"translate"),core.k0s()(),core.j41(50,"div",15)(51,"label",27),core.EFF(52),core.nI1(53,"translate"),core.k0s(),core.nrm(54,"input",28),core.nI1(55,"translate"),core.DNE(56,LdnServiceFormComponent_Conditional_56_Template,3,2,"div"),core.k0s(),core.j41(57,"div",15)(58,"label",29),core.EFF(59),core.nI1(60,"translate"),core.k0s(),core.j41(61,"div"),core.nrm(62,"input",30),core.j41(63,"div",31),core.bIt("click",function(){return core.eBV(_r1),core.Njj(ctx.toggleUsesActorEmailId())}),core.nrm(64,"div",32),core.k0s(),core.j41(65,"div",26),core.EFF(66),core.nI1(67,"translate"),core.k0s()()(),core.DNE(68,LdnServiceFormComponent_Conditional_68_Template,7,4,"div",33)(69,LdnServiceFormComponent_Conditional_69_Template,3,0,"div"),core.j41(70,"span",34),core.bIt("click",function(){return core.eBV(_r1),core.Njj(ctx.addInboundPattern())}),core.EFF(71),core.nI1(72,"translate"),core.k0s(),core.nrm(73,"hr"),core.j41(74,"div",35)(75,"div",36),core.SdG(76),core.j41(77,"button",37),core.bIt("click",function(){return core.eBV(_r1),core.Njj(ctx.resetFormAndLeave())}),core.j41(78,"span"),core.EFF(79),core.nI1(80,"translate"),core.k0s()(),core.j41(81,"button",38)(82,"span"),core.nrm(83,"i",39),core.EFF(84),core.nI1(85,"translate"),core.k0s()()()()()(),core.DNE(86,LdnServiceFormComponent_ng_template_86_Template,10,6,"ng-template",null,0,core.C5r)}2&rf&&(core.R7$(),core.Y8G("formGroup",ctx.formModel),core.R7$(3),core.JRh(ctx.isNewService?core.bMT(5,43,"ldn-create-service.title"):core.bMT(6,45,"ldn-edit-registered-service.title")),core.R7$(3),core.vxM(ctx.isNewService?-1:7),core.R7$(3),core.JRh(core.bMT(11,47,"ldn-new-service.form.label.name")),core.R7$(2),core.AVh("invalid-field",ctx.formModel.get("name").invalid&&ctx.formModel.get("name").touched),core.Y8G("placeholder",core.bMT(13,49,"ldn-new-service.form.placeholder.name")),core.R7$(2),core.vxM(ctx.formModel.get("name").invalid&&ctx.formModel.get("name").touched?14:-1),core.R7$(3),core.JRh(core.bMT(18,51,"ldn-new-service.form.label.description")),core.R7$(2),core.Y8G("placeholder",core.bMT(20,53,"ldn-new-service.form.placeholder.description")),core.R7$(6),core.JRh(core.bMT(26,55,"ldn-new-service.form.label.url")),core.R7$(2),core.AVh("invalid-field",ctx.formModel.get("url").invalid&&ctx.formModel.get("url").touched),core.Y8G("placeholder",core.bMT(28,57,"ldn-new-service.form.placeholder.url")),core.R7$(2),core.vxM(ctx.formModel.get("url").invalid&&ctx.formModel.get("url").touched?29:-1),core.R7$(3),core.JRh(core.bMT(33,59,"ldn-new-service.form.label.score")),core.R7$(2),core.AVh("invalid-field",ctx.formModel.get("score").invalid&&ctx.formModel.get("score").touched),core.Y8G("placeholder",core.bMT(35,61,"ldn-new-service.form.placeholder.score")),core.R7$(2),core.vxM(ctx.formModel.get("score").invalid&&ctx.formModel.get("score").touched?36:-1),core.R7$(3),core.JRh(core.bMT(40,63,"ldn-new-service.form.label.ip-range")),core.R7$(3),core.AVh("invalid-field",ctx.formModel.get("lowerIp").invalid&&ctx.formModel.get("lowerIp").touched),core.Y8G("placeholder",core.bMT(43,65,"ldn-new-service.form.placeholder.lowerIp")),core.R7$(2),core.AVh("invalid-field",ctx.formModel.get("upperIp").invalid&&ctx.formModel.get("upperIp").touched),core.Y8G("placeholder",core.bMT(45,67,"ldn-new-service.form.placeholder.upperIp")),core.R7$(2),core.vxM(ctx.formModel.get("lowerIp").invalid&&ctx.formModel.get("lowerIp").touched||ctx.formModel.get("upperIp").invalid&&ctx.formModel.get("upperIp").touched?46:-1),core.R7$(2),core.SpI(" ",core.bMT(49,69,"ldn-new-service.form.hint.ipRange")," "),core.R7$(4),core.JRh(core.bMT(53,71,"ldn-new-service.form.label.ldnUrl")),core.R7$(2),core.AVh("invalid-field",ctx.formModel.get("ldnUrl").invalid&&ctx.formModel.get("ldnUrl").touched),core.Y8G("placeholder",core.bMT(55,73,"ldn-new-service.form.placeholder.ldnUrl")),core.R7$(2),core.vxM(ctx.formModel.get("ldnUrl").invalid&&ctx.formModel.get("ldnUrl").touched?56:-1),core.R7$(3),core.JRh(core.bMT(60,75,"ldn-service-usesActorEmailId")),core.R7$(4),core.AVh("checked",ctx.formModel.get("usesActorEmailId").value),core.R7$(3),core.SpI(" ",core.bMT(67,77,"ldn-service-usesActorEmailId-description")," "),core.R7$(2),core.vxM(ctx.areControlsInitialized?68:-1),core.R7$(),core.vxM(ctx.areControlsInitialized?69:-1),core.R7$(2),core.JRh(core.bMT(72,79,"ldn-new-service.form.label.addPattern")),core.R7$(8),core.SpI("\xa0",core.bMT(80,81,"submission.general.back.submit"),""),core.R7$(5),core.SpI("\xa0",core.bMT(85,83,"ldn-new-service.form.label.submit"),""))},dependencies:[common.Jj,ng_bootstrap.zH,ng_bootstrap.tg,ng_bootstrap.E5,ng_bootstrap.do,ng_bootstrap.U0,ng_bootstrap._H,fesm2022_forms.X1,fesm2022_forms.qT,fesm2022_forms.me,fesm2022_forms.Q0,fesm2022_forms.Zm,fesm2022_forms.BC,fesm2022_forms.cb,fesm2022_forms.VZ,fesm2022_forms.zX,fesm2022_forms.j4,fesm2022_forms.JD,fesm2022_forms.$R,ngx_translate_core.h,ngx_translate_core.D9],styles:[".scrollable-menu[_ngcontent-%COMP%]{height:auto;max-height:var(--ds-dropdown-menu-max-height);overflow-x:hidden}.collection-item[_ngcontent-%COMP%]{border-bottom:var(--bs-dropdown-border-width) solid var(--bs-dropdown-border-color)}.scrollable-dropdown-loading[_ngcontent-%COMP%]{background-color:var(--bs-primary);color:#fff;height:calc(var(--bs-spacer) * 2)!important;line-height:calc(var(--bs-spacer) * 2);position:sticky;bottom:0}.scrollable-dropdown-menu[_ngcontent-%COMP%]{left:0!important;margin-bottom:var(--bs-spacer);z-index:1000}.scrollable-dropdown-toggle[_ngcontent-%COMP%], .toggle-icon[_ngcontent-%COMP%]{padding:.7rem .7rem 0}.ds-form-input-addon[_ngcontent-%COMP%]{border-top-right-radius:0!important;border-bottom-right-radius:0!important;border-right:0!important}.ds-form-input-btn[_ngcontent-%COMP%]{border:var(--bs-input-btn-border-width) solid var(--bs-input-border-color);border-top-left-radius:0;border-bottom-left-radius:0;border-left:0}.ds-form-input-btn[_ngcontent-%COMP%]:focus{box-shadow:none!important}button.ds-form-add-more[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none!important}.ds-form-input-value[_ngcontent-%COMP%]{border-top-left-radius:0!important;border-bottom-left-radius:0!important}.fa-spin[_ngcontent-%COMP%]{pointer-events:none}.left-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .left-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{left:0}.right-addon[_ngcontent-%COMP%]   .far[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   .fas[_ngcontent-%COMP%], .right-addon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{right:0}.left-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:calc(var(--bs-spacer) * 2.25)}.right-addon[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-right:calc(var(--bs-spacer) * 2.25)}select.form-control[_ngcontent-%COMP%]{appearance:auto}.col-sm-6[_ngcontent-%COMP%], .col-sm-12[_ngcontent-%COMP%]{padding-left:15px;padding-right:15px}form[_ngcontent-%COMP%]{font-size:14px;position:relative}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{max-width:100%;width:100%;padding:8px;font-size:14px}option[_ngcontent-%COMP%]:not(:first-child){font-weight:700}.trash-button[_ngcontent-%COMP%]{width:40px;height:40px}textarea[_ngcontent-%COMP%]{height:200px;resize:none}.add-pattern-link[_ngcontent-%COMP%]{color:#0048ff;cursor:pointer}.remove-pattern-link[_ngcontent-%COMP%]{color:#e34949;cursor:pointer;margin-left:10px}.status-checkbox[_ngcontent-%COMP%]{margin-top:5px}.invalid-field[_ngcontent-%COMP%]{border:1px solid red;color:#000}.error-text[_ngcontent-%COMP%]{color:red;font-size:.8em;margin-top:5px}.toggle-switch[_ngcontent-%COMP%]{display:flex;align-items:center;opacity:.8;position:relative;width:60px;height:30px;background-color:#ccc;border-radius:15px;cursor:pointer;transition:background-color .3s}.toggle-switch.checked[_ngcontent-%COMP%]{background-color:#24cc9a}.slider[_ngcontent-%COMP%]{position:absolute;width:30px;height:30px;border-radius:50%;background-color:#fff;transition:transform .3s}.toggle-switch[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{width:22px;height:22px;border-radius:50%;margin:0 auto}.toggle-switch.checked[_ngcontent-%COMP%]   .slider[_ngcontent-%COMP%]{transform:translate(30px)}.toggle-switch-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;align-items:flex-end;margin-top:10px}.small-text[_ngcontent-%COMP%]{font-size:.7em;color:#888}.toggle-switch[_ngcontent-%COMP%]{cursor:pointer;margin-top:3px;margin-right:3px}.label-box[_ngcontent-%COMP%]{margin-left:11px}.label-box-2[_ngcontent-%COMP%]{margin-left:14px}.label-box-3[_ngcontent-%COMP%]{margin-left:5px}.submission-form-footer[_ngcontent-%COMP%]{border-radius:var(--bs-card-border-radius);bottom:0;background-color:var(--bs-gray-400);padding:calc(var(--bs-spacer) / 2);z-index:calc(var(--ds-submission-footer-z-index) + 1)}.marked-for-deletion[_ngcontent-%COMP%]{background-color:#f3b7bd}.dropdown-menu-top[_ngcontent-%COMP%], .scrollable-dropdown-menu[_ngcontent-%COMP%]{z-index:var(--ds-submission-footer-z-index)}"],data:{animation:[(0,animations.hZ)("toggleAnimation",[(0,animations.wk)("true",(0,animations.iF)({})),(0,animations.wk)("false",(0,animations.iF)({})),(0,animations.kY)("true <=> false",(0,animations.i0)("300ms ease-in"))])]}})}}return LdnServiceFormComponent2})();var cjs_operators=__webpack_require__(60444),empty_util=__webpack_require__(2794),pagination_component=__webpack_require__(42191),pagination_component_options_model=__webpack_require__(54396),truncatable_component=__webpack_require__(69901),truncatable_part_component=__webpack_require__(31846);const ldn_services_directory_component_c0=["deleteModal"],ldn_services_directory_component_c1=(a0,a1)=>({"status-enabled":a0,"status-disabled":a1}),ldn_services_directory_component_c2=a0=>["/admin/ldn/services/edit/",a0];function LdnServicesOverviewComponent_Conditional_10_For_20_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"tr")(1,"td",11),core.EFF(2),core.k0s(),core.j41(3,"td")(4,"ds-truncatable",12)(5,"ds-truncatable-part",13)(6,"div"),core.EFF(7),core.k0s()()()(),core.j41(8,"td")(9,"span",14),core.nI1(10,"translate"),core.nI1(11,"translate"),core.bIt("click",function(){const ldnService_r2=core.eBV(_r1).$implicit,ctx_r2=core.XpG(2);return core.Njj(ctx_r2.toggleStatus(ldnService_r2,ctx_r2.ldnServicesService))}),core.EFF(12),core.nI1(13,"translate"),core.nI1(14,"translate"),core.k0s()(),core.j41(15,"td")(16,"div",15)(17,"button",16),core.nI1(18,"translate"),core.bIt("click",function(){const ldnService_r2=core.eBV(_r1).$implicit,ctx_r2=core.XpG(2);return core.Njj(ctx_r2.selectServiceToDelete(ldnService_r2.id))}),core.nrm(19,"i",17),core.k0s(),core.j41(20,"button",18),core.nI1(21,"translate"),core.nrm(22,"i",19),core.k0s()()()()}if(2&rf){const ldnService_r2=ctx.$implicit;core.R7$(2),core.JRh(ldnService_r2.name),core.R7$(2),core.Y8G("id",ldnService_r2.id),core.R7$(),core.Y8G("id",ldnService_r2.id)("minLines",2),core.R7$(2),core.SpI(" ",ldnService_r2.description," "),core.R7$(2),core.Y8G("ngClass",core.l_i(23,ldn_services_directory_component_c1,ldnService_r2.enabled,!ldnService_r2.enabled))("title",ldnService_r2.enabled?core.bMT(10,11,"ldn-service.overview.table.clickToDisable"):core.bMT(11,13,"ldn-service.overview.table.clickToEnable")),core.R7$(3),core.SpI(" ",ldnService_r2.enabled?core.bMT(13,15,"ldn-service.overview.table.enabled"):core.bMT(14,17,"ldn-service.overview.table.disabled")," "),core.R7$(5),core.BMQ("aria-label",core.bMT(18,19,"ldn-service-overview-select-delete")),core.R7$(3),core.Y8G("routerLink",core.eq3(26,ldn_services_directory_component_c2,ldnService_r2.id)),core.BMQ("aria-label",core.bMT(21,21,"ldn-service-overview-select-edit"))}}function LdnServicesOverviewComponent_Conditional_10_Template(rf,ctx){if(1&rf&&(core.j41(0,"ds-pagination",7),core.nI1(1,"async"),core.j41(2,"div",8)(3,"table",9)(4,"thead")(5,"tr")(6,"th",10),core.EFF(7),core.nI1(8,"translate"),core.k0s(),core.j41(9,"th",10),core.EFF(10),core.nI1(11,"translate"),core.k0s(),core.j41(12,"th",10),core.EFF(13),core.nI1(14,"translate"),core.k0s(),core.j41(15,"th",10),core.EFF(16),core.nI1(17,"translate"),core.k0s()()(),core.j41(18,"tbody"),core.Z7z(19,LdnServicesOverviewComponent_Conditional_10_For_20_Template,23,28,"tr",null,core.fX1),core.nI1(21,"async"),core.k0s()()()()),2&rf){let tmp_2_0,tmp_10_0;const ctx_r2=core.XpG();core.Y8G("collectionSize",null==(tmp_2_0=core.bMT(1,8,ctx_r2.ldnServicesRD$))||null==tmp_2_0.payload?null:tmp_2_0.payload.totalElements)("hideGear",!0)("hidePagerWhenSinglePage",!0)("paginationOptions",ctx_r2.pageConfig),core.R7$(7),core.JRh(core.bMT(8,10,"service.overview.table.name")),core.R7$(3),core.JRh(core.bMT(11,12,"service.overview.table.description")),core.R7$(3),core.JRh(core.bMT(14,14,"service.overview.table.status")),core.R7$(3),core.JRh(core.bMT(17,16,"service.overview.table.actions")),core.R7$(3),core.Dyx(null==(tmp_10_0=core.bMT(21,18,ctx_r2.ldnServicesRD$))||null==tmp_10_0.payload?null:tmp_10_0.payload.page)}}function LdnServicesOverviewComponent_ng_template_12_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.j41(0,"div")(1,"div",20)(2,"div")(3,"h4"),core.EFF(4),core.nI1(5,"translate"),core.k0s()(),core.j41(6,"button",21),core.nI1(7,"translate"),core.bIt("click",function(){core.eBV(_r4);const ctx_r2=core.XpG();return core.Njj(ctx_r2.closeModal())}),core.k0s()(),core.j41(8,"div",22)(9,"div"),core.EFF(10),core.nI1(11,"translate"),core.k0s(),core.j41(12,"div",23)(13,"button",24),core.nI1(14,"translate"),core.bIt("click",function(){core.eBV(_r4);const ctx_r2=core.XpG();return core.Njj(ctx_r2.closeModal())}),core.EFF(15),core.nI1(16,"translate"),core.k0s(),core.j41(17,"button",25),core.nI1(18,"translate"),core.bIt("click",function(){core.eBV(_r4);const ctx_r2=core.XpG();return core.Njj(ctx_r2.deleteSelected(ctx_r2.selectedServiceId.toString(),ctx_r2.ldnServicesService))}),core.EFF(19),core.nI1(20,"translate"),core.k0s()()()()}2&rf&&(core.R7$(4),core.JRh(core.bMT(5,7,"service.overview.delete.header")),core.R7$(2),core.BMQ("aria-label",core.bMT(7,9,"ldn-service-overview-close-modal")),core.R7$(4),core.SpI(" ",core.bMT(11,11,"service.overview.delete.body")," "),core.R7$(3),core.BMQ("aria-label",core.bMT(14,13,"ldn-service-overview-close-modal")),core.R7$(2),core.JRh(core.bMT(16,15,"service.detail.delete.cancel")),core.R7$(2),core.BMQ("aria-label",core.bMT(18,17,"ldn-service-overview-select-delete")),core.R7$(2),core.SpI("",core.bMT(20,19,"service.overview.delete")," "))}const moduleRoutes=[{path:"",pathMatch:"full",component:(()=>{class LdnServicesOverviewComponent2{constructor(ldnServicesService,paginationService,modalService,cdRef,notificationService,translateService){this.ldnServicesService=ldnServicesService,this.paginationService=paginationService,this.modalService=modalService,this.cdRef=cdRef,this.notificationService=notificationService,this.translateService=translateService,this.selectedServiceId=null,this.servicesData=[],this.config=Object.assign(new find_list_options_model._,{elementsPerPage:10}),this.pageConfig=Object.assign(new pagination_component_options_model.W,{id:"po",pageSize:10})}ngOnInit(){this.setLdnServices()}setLdnServices(){this.ldnServicesRD$=this.paginationService.getFindListOptions(this.pageConfig.id,this.config).pipe((0,cjs_operators.nx)(config=>this.ldnServicesService.findAll(config,!1,!1).pipe((0,operators.qD)())))}ngOnDestroy(){this.paginationService.clearPagination(this.pageConfig.id),(0,empty_util.a4)(this.isProcessingSub)&&this.isProcessingSub.unsubscribe()}openDeleteModal(content){this.modalRef=this.modalService.open(content)}closeModal(){this.modalRef.close(),this.cdRef.detectChanges()}selectServiceToDelete(serviceId){this.selectedServiceId=serviceId,this.openDeleteModal(this.deleteModal)}deleteSelected(serviceId,ldnServicesService){null!==this.selectedServiceId&&ldnServicesService.delete(serviceId).pipe((0,operators.qD)()).subscribe(rd=>{rd.hasSucceeded?(this.servicesData=this.servicesData.filter(service=>service.id!==serviceId),this.ldnServicesRD$=this.ldnServicesRD$.pipe((0,cjs_operators.Tj)(remoteData=>(remoteData.hasSucceeded&&(remoteData.payload.page=remoteData.payload.page.filter(service=>service.id.toString()!==serviceId)),remoteData))),this.cdRef.detectChanges(),this.closeModal(),this.notificationService.success(this.translateService.get("ldn-service-delete.notification.success.title"),this.translateService.get("ldn-service-delete.notification.success.content"))):(this.notificationService.error(this.translateService.get("ldn-service-delete.notification.error.title"),this.translateService.get("ldn-service-delete.notification.error.content")),this.cdRef.detectChanges())})}toggleStatus(ldnService,ldnServicesService){const newStatus=!ldnService.enabled,originalStatus=ldnService.enabled;ldnServicesService.patch(ldnService,[{op:"replace",path:"/enabled",value:newStatus}]).pipe((0,operators.qD)()).subscribe(rd=>{rd.hasSucceeded?(ldnService.enabled=newStatus,this.notificationService.success(this.translateService.get("ldn-enable-service.notification.success.title"),this.translateService.get("ldn-enable-service.notification.success.content"))):(ldnService.enabled=originalStatus,this.notificationService.error(this.translateService.get("ldn-enable-service.notification.error.title"),this.translateService.get("ldn-enable-service.notification.error.content")))})}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||LdnServicesOverviewComponent2)(core.rXU(ldn_services_data_service.LdnServicesService),core.rXU(pagination_service.m),core.rXU(ng_bootstrap.Bq),core.rXU(core.gRc),core.rXU(notifications_service.I),core.rXU(ngx_translate_core.c$))}}static{this.\u0275cmp=core.VBU({type:LdnServicesOverviewComponent2,selectors:[["ds-ldn-services-directory"]],viewQuery:function(rf,ctx){if(1&rf&&core.GBs(ldn_services_directory_component_c0,7),2&rf){let _t;core.mGM(_t=core.lsd())&&(ctx.deleteModal=_t.first)}},standalone:!0,features:[core.aNF],decls:14,vars:9,consts:[["deleteModal",""],[1,"container"],[1,"d-flex"],[1,"flex-grow-1"],[1,"d-flex","justify-content-end"],["routerLink","/admin/ldn/services/new",1,"btn","btn-success"],[1,"fas","fa-plus","pe-2"],[3,"collectionSize","hideGear","hidePagerWhenSinglePage","paginationOptions"],[1,"table-responsive"],[1,"table","table-striped","table-hover"],["scope","col"],[1,"col-3"],[3,"id"],[3,"id","minLines"],[1,"status-indicator",3,"click","ngClass","title"],[1,"btn-group"],[1,"btn","btn-outline-danger",3,"click"],[1,"fas","fa-trash"],[1,"btn","btn-outline-dark",3,"routerLink"],[1,"fas","fa-edit"],[1,"modal-header"],["aria-label","Close","type","button",1,"btn-close",3,"click"],[1,"modal-body"],[1,"mt-4","text-end"],[1,"btn","btn-outline-secondary","me-2",3,"click"],["id","delete-confirm",1,"btn","btn-danger",3,"click"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div",1)(1,"div",2)(2,"h1",3),core.EFF(3),core.nI1(4,"translate"),core.k0s()(),core.j41(5,"div",4)(6,"button",5),core.nrm(7,"i",6),core.EFF(8),core.nI1(9,"translate"),core.k0s()(),core.DNE(10,LdnServicesOverviewComponent_Conditional_10_Template,22,20,"ds-pagination",7),core.nI1(11,"async"),core.k0s(),core.DNE(12,LdnServicesOverviewComponent_ng_template_12_Template,21,21,"ng-template",null,0,core.C5r)),2&rf){let tmp_3_0;core.R7$(3),core.JRh(core.bMT(4,3,"ldn-registered-services.title")),core.R7$(5),core.JRh(core.bMT(9,5,"process.overview.new")),core.R7$(2),core.vxM((null==(tmp_3_0=core.bMT(11,7,ctx.ldnServicesRD$))||null==tmp_3_0.payload?null:tmp_3_0.payload.totalElements)>0?10:-1)}},dependencies:[common.Jj,common.YU,pagination_component.e,router.Wk,ngx_translate_core.h,ngx_translate_core.D9,truncatable_component.d,truncatable_part_component.W],styles:[".status-indicator[_ngcontent-%COMP%]{padding:2.5px 25px;border-radius:4px;cursor:pointer;transition:background-color .5s}.status-enabled[_ngcontent-%COMP%]{background-color:#daf7a6;color:#4f5359;font-size:85%;font-weight:700}.status-enabled[_ngcontent-%COMP%]:hover{background-color:#faa0a0}.status-disabled[_ngcontent-%COMP%]{background-color:#faa0a0;color:#4f5359;font-size:85%;font-weight:700}.status-disabled[_ngcontent-%COMP%]:hover{background-color:#daf7a6}"]})}}return LdnServicesOverviewComponent2})(),resolve:{breadcrumb:i18n_breadcrumb_resolver.S},data:{title:"ldn-registered-services.title",breadcrumbKey:"ldn-registered-services.new"}},{path:"new",resolve:{breadcrumb:navigationBreadcrumbResolver},component:LdnServiceFormComponent,data:{title:"ldn-register-new-service.title",breadcrumbKey:"ldn-register-new-service"}},{path:"edit/:serviceId",resolve:{breadcrumb:navigationBreadcrumbResolver},component:LdnServiceFormComponent,data:{title:"ldn-edit-service.title",breadcrumbKey:"ldn-edit-service"}}],ROUTES=moduleRoutes.map(route=>({...route,data:{...route.data,relatedRoutes:moduleRoutes.filter(relatedRoute=>relatedRoute.path!==route.path).map(relatedRoute=>({path:relatedRoute.path,data:relatedRoute.data}))}}))},10133:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{LdnItemfiltersService:()=>LdnItemfiltersService});var _core_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(80996),_core_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(63311),_core_data_base_find_all_data__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(27554),_core_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(61640),_core_data_request_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(64806),_core_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(26139),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(76623),_angular_core__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(25376);let LdnItemfiltersService=(()=>{class LdnItemfiltersService2 extends _core_data_base_identifiable_data_service__WEBPACK_IMPORTED_MODULE_3__.W{constructor(requestService,rdbService,objectCache,halService,notificationsService){super("itemfilters",requestService,rdbService,objectCache,halService),this.requestService=requestService,this.rdbService=rdbService,this.objectCache=objectCache,this.halService=halService,this.notificationsService=notificationsService,this.findAllData=new _core_data_base_find_all_data__WEBPACK_IMPORTED_MODULE_2__.H(this.linkPath,requestService,rdbService,objectCache,halService,this.responseMsToLive)}getEndpoint(){return this.halService.getEndpoint(this.linkPath)}findAll(options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow){return this.findAllData.findAll(options,useCachedVersionIfAvailable,reRequestOnStale,...linksToFollow)}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||LdnItemfiltersService2)(_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_core_data_request_service__WEBPACK_IMPORTED_MODULE_4__.B),_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_core_cache_builders_remote_data_build_service__WEBPACK_IMPORTED_MODULE_0__.o),_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_core_cache_object_cache_service__WEBPACK_IMPORTED_MODULE_1__.$),_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_core_shared_hal_endpoint_service__WEBPACK_IMPORTED_MODULE_5__.Y),_angular_core__WEBPACK_IMPORTED_MODULE_7__.KVO(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_6__.I))}}static{this.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_7__.jDH({token:LdnItemfiltersService2,factory:LdnItemfiltersService2.\u0275fac,providedIn:"root"})}}return LdnItemfiltersService2})()}};