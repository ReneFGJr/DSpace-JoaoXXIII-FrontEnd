exports.id=8527,exports.ids=[8527],exports.modules={48020:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Q:()=>Breadcrumb});class Breadcrumb{constructor(text,url){this.text=text,this.url=url}}},12213:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>i18nBreadcrumbResolver});var core=__webpack_require__(25376),empty_util=__webpack_require__(2794),route_utils=__webpack_require__(93359),cjs=__webpack_require__(9238),breadcrumb_model=__webpack_require__(48020);let I18nBreadcrumbsService=(()=>{class I18nBreadcrumbsService2{getBreadcrumbs(key,url){return(0,cjs.of)([new breadcrumb_model.Q(key+".breadcrumbs",url)])}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||I18nBreadcrumbsService2)}}static{this.\u0275prov=core.jDH({token:I18nBreadcrumbsService2,factory:I18nBreadcrumbsService2.\u0275fac,providedIn:"root"})}}return I18nBreadcrumbsService2})();const i18nBreadcrumbResolver=(route,state,breadcrumbService=(0,core.WQX)(I18nBreadcrumbsService))=>{const key=route.data.breadcrumbKey;if((0,empty_util.Tn)(key))throw new Error('You provided an i18nBreadcrumbResolver for url "'+route.url+"\" but no breadcrumbKey in the route's data");return{provider:breadcrumbService,key,url:(0,route_utils.F)(route)}}},53337:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ProfilePageMetadataFormComponent:()=>ProfilePageMetadataFormComponent});var _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(19519),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(98905),lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_0__),_environments_environment__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(64369),_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(15318),_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__(65434),__webpack_require__(39022)),_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(2794),_shared_form_builder_form_builder_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(84697),_shared_form_form_component__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(27790),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(76623),_angular_core__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(25376),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(2385);function ProfilePageMetadataFormComponent_Conditional_0_Template(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_8__.nrm(0,"ds-form",0),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_8__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_8__.Y8G("formId","profile-page-metadata-form-id")("formModel",ctx_r0.formModel)("formGroup",ctx_r0.formGroup)("displaySubmit",!1)("displayCancel",!1)}}let ProfilePageMetadataFormComponent=(()=>{class ProfilePageMetadataFormComponent2{constructor(formBuilderService,translate,epersonService,notificationsService){this.formBuilderService=formBuilderService,this.translate=translate,this.epersonService=epersonService,this.notificationsService=notificationsService,this.formModel=[new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_9__.rA_({id:"email",name:"email",readOnly:!0,disabled:!0}),new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_9__.rA_({id:"firstname",name:"eperson.firstname",required:!0,validators:{required:null},errorMessages:{required:"This field is required"},autoComplete:"given-name"}),new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_9__.rA_({id:"lastname",name:"eperson.lastname",required:!0,validators:{required:null},errorMessages:{required:"This field is required"},autoComplete:"family-name"}),new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_9__.rA_({id:"phone",name:"eperson.phone",autoComplete:"tel"}),new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_9__.z4z({id:"language",name:"eperson.language"})],this.LABEL_PREFIX="profile.metadata.form.label.",this.ERROR_PREFIX="profile.metadata.form.error.",this.NOTIFICATION_PREFIX="profile.metadata.form.notifications."}ngOnInit(){this.activeLangs=_environments_environment__WEBPACK_IMPORTED_MODULE_1__.c.languages.filter(MyLangConfig=>!0===MyLangConfig.active),this.setFormValues(),this.updateFieldTranslations(),this.translate.onLangChange.subscribe(()=>{this.updateFieldTranslations()})}setFormValues(){this.formModel.forEach(fieldModel=>{fieldModel.value="email"===fieldModel.name?this.user.email:this.user.firstMetadataValue(fieldModel.name),"language"===fieldModel.id&&(fieldModel.options=this.activeLangs.map(langConfig=>Object.assign({value:langConfig.code,label:langConfig.label})))}),this.formGroup=this.formBuilderService.createFormGroup(this.formModel)}updateFieldTranslations(){this.formModel.forEach(fieldModel=>{fieldModel.label=this.translate.instant(this.LABEL_PREFIX+fieldModel.id),(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.hj)(fieldModel.validators)&&(fieldModel.errorMessages={},Object.keys(fieldModel.validators).forEach(key=>{fieldModel.errorMessages[key]=this.translate.instant(this.ERROR_PREFIX+fieldModel.id+"."+key)}))})}updateProfile(){if(!this.formGroup.valid)return!1;const newMetadata=lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_0___default()(this.user.metadata);let changed=!1;return this.formModel.filter(fieldModel=>"email"!==fieldModel.id).forEach(fieldModel=>{newMetadata.hasOwnProperty(fieldModel.name)&&newMetadata[fieldModel.name].length>0?(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.a4)(fieldModel.value)?newMetadata[fieldModel.name][0].value!==fieldModel.value&&(newMetadata[fieldModel.name][0].value=fieldModel.value,changed=!0):(newMetadata[fieldModel.name]=[],changed=!0):(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_10__.a4)(fieldModel.value)&&(newMetadata[fieldModel.name]=[{value:fieldModel.value,language:null}],changed=!0)}),changed&&this.epersonService.update(Object.assign(lodash_cloneDeep__WEBPACK_IMPORTED_MODULE_0___default()(this.user),{metadata:newMetadata})).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.yd)(),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_4__.Bo)()).subscribe(user=>{this.user=user,this.setFormValues(),this.notificationsService.success(this.translate.instant(this.NOTIFICATION_PREFIX+"success.title"),this.translate.instant(this.NOTIFICATION_PREFIX+"success.content"))}),changed}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ProfilePageMetadataFormComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_shared_form_builder_form_builder_service__WEBPACK_IMPORTED_MODULE_5__.j),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_11__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_2__.EPersonDataService),_angular_core__WEBPACK_IMPORTED_MODULE_8__.rXU(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_7__.I))}}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_8__.VBU({type:ProfilePageMetadataFormComponent2,selectors:[["ds-base-profile-page-metadata-form"]],inputs:{user:"user"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_8__.aNF],decls:1,vars:1,consts:[[3,"formId","formModel","formGroup","displaySubmit","displayCancel"]],template:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_8__.DNE(0,ProfilePageMetadataFormComponent_Conditional_0_Template,1,5,"ds-form",0),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_8__.vxM(ctx.formModel?0:-1)},dependencies:[_shared_form_form_component__WEBPACK_IMPORTED_MODULE_6__.s],encapsulation:2})}}return ProfilePageMetadataFormComponent2})()},12313:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{O:()=>ThemedProfilePageMetadataFormComponent}),__webpack_require__(65434);var _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(79241),_angular_core__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__(53337),__webpack_require__(25376));const _c0=["*"];function ThemedProfilePageMetadataFormComponent_ng_template_0_Template(rf,ctx){}let ThemedProfilePageMetadataFormComponent=(()=>{class ThemedProfilePageMetadataFormComponent2 extends _shared_theme_support_themed_component__WEBPACK_IMPORTED_MODULE_1__.J{constructor(){super(...arguments),this.inAndOutputNames=["user"]}getComponentName(){return"ProfilePageMetadataFormComponent"}importThemedComponent(themeName){return __webpack_require__(46020)(`./${themeName}/app/profile-page/profile-page-metadata-form/profile-page-metadata-form.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,53337))}static{this.\u0275fac=(()=>{let \u0275ThemedProfilePageMetadataFormComponent_BaseFactory;return function(__ngFactoryType__){return(\u0275ThemedProfilePageMetadataFormComponent_BaseFactory||(\u0275ThemedProfilePageMetadataFormComponent_BaseFactory=_angular_core__WEBPACK_IMPORTED_MODULE_3__.xGo(ThemedProfilePageMetadataFormComponent2)))(__ngFactoryType__||ThemedProfilePageMetadataFormComponent2)}})()}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_3__.VBU({type:ThemedProfilePageMetadataFormComponent2,selectors:[["ds-profile-page-metadata-form"]],inputs:{user:"user"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_3__.Vt3,_angular_core__WEBPACK_IMPORTED_MODULE_3__.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.NAR(),_angular_core__WEBPACK_IMPORTED_MODULE_3__.DNE(0,ThemedProfilePageMetadataFormComponent_ng_template_0_Template,0,0,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_3__.C5r),_angular_core__WEBPACK_IMPORTED_MODULE_3__.j41(2,"div",null,1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.SdG(4),_angular_core__WEBPACK_IMPORTED_MODULE_3__.k0s())},encapsulation:2})}}return ThemedProfilePageMetadataFormComponent2})()},38454:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{g:()=>ProfilePageResearcherFormComponent});var common=__webpack_require__(87514),ngx_translate_core=__webpack_require__(2385),ngx_ui_switch=__webpack_require__(53359),cjs=__webpack_require__(9238),operators=__webpack_require__(60444),auth_service=__webpack_require__(54545),researcher_profile_data_service=(__webpack_require__(65434),__webpack_require__(70647)),shared_operators=__webpack_require__(39022),btn_disabled_directive=__webpack_require__(69919),confirmation_modal_component=__webpack_require__(3849),empty_util=__webpack_require__(2794),notifications_service=__webpack_require__(76623),follow_link_config_model=__webpack_require__(76715),var_directive=__webpack_require__(17543),search_service=__webpack_require__(58807),remote_data_utils=__webpack_require__(84953),paginated_search_options_model=__webpack_require__(86577),core=__webpack_require__(25376);let ProfileClaimService=(()=>{class ProfileClaimService2{constructor(searchService){this.searchService=searchService}hasProfilesToSuggest(eperson){return this.searchForSuggestions(eperson).pipe((0,shared_operators.qD)(),(0,operators.Tj)(rd=>(0,empty_util.hj)(rd)&&rd.hasSucceeded&&rd.payload?.page?.length>0))}searchForSuggestions(eperson){const query=this.personQueryData(eperson);return(0,empty_util.Im)(query)?(0,cjs.of)((0,remote_data_utils.Wh)()):this.lookup(query)}lookup(query){return(0,empty_util.Im)(query)?(0,cjs.of)((0,remote_data_utils.Wh)()):this.searchService.search(new paginated_search_options_model.C({configuration:"eperson_claims",query}),null,!1,!0)}personQueryData(eperson){return eperson&&eperson.email?"person.email:"+eperson.email:null}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ProfileClaimService2)(core.KVO(search_service.S))}}static{this.\u0275prov=core.jDH({token:ProfileClaimService2,factory:ProfileClaimService2.\u0275fac,providedIn:"root"})}}return ProfileClaimService2})();var dso_name_service=__webpack_require__(11481),view_mode_model=(__webpack_require__(27434),__webpack_require__(18839)),item_page_routing_paths=__webpack_require__(88292),dso_selector_modal_wrapper_component=__webpack_require__(78922),collection_element_link_type=__webpack_require__(59398),listable_object_component_loader_component=__webpack_require__(90690),ng_bootstrap=__webpack_require__(87969),router=__webpack_require__(18134);function ProfileClaimItemModalComponent_For_13_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div",7)(1,"button",14,0),core.bIt("click",function(){const listEntry_r2=core.eBV(_r1).$implicit,ctx_r2=core.XpG();return core.Njj(ctx_r2.selectItem(listEntry_r2.indexableObject))}),core.nrm(3,"ds-listable-object-component-loader",15),core.k0s()()}if(2&rf){const listEntry_r2=ctx.$implicit,ctx_r2=core.XpG();core.R7$(),core.FS9("title",ctx_r2.dsoNameService.getName(listEntry_r2.indexableObject)),core.R7$(2),core.Y8G("object",listEntry_r2)("viewMode",ctx_r2.viewMode)("linkType",ctx_r2.linkTypes.None)}}let ProfileClaimItemModalComponent=(()=>{class ProfileClaimItemModalComponent2 extends dso_selector_modal_wrapper_component.${constructor(activeModal,route,router2,profileClaimService,dsoNameService){super(activeModal,route),this.activeModal=activeModal,this.route=route,this.router=router2,this.profileClaimService=profileClaimService,this.dsoNameService=dsoNameService,this.listEntries$=new cjs.BehaviorSubject(null),this.viewMode=view_mode_model.n.ListElement,this.linkTypes=collection_element_link_type.n,this.checked=!1,this.create=new core.bkB}ngOnInit(){this.profileClaimService.searchForSuggestions(this.dso).pipe((0,shared_operators.qD)()).subscribe(result=>this.listEntries$.next(result))}selectItem(dso){this.close(),this.navigate(dso)}navigate(dso){this.router.navigate([(0,item_page_routing_paths._o)(dso)])}toggleCheckbox(){this.checked=!this.checked}createFromScratch(){this.create.emit(),this.close()}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ProfileClaimItemModalComponent2)(core.rXU(ng_bootstrap.Lw),core.rXU(router.nX),core.rXU(router.Ix),core.rXU(ProfileClaimService),core.rXU(dso_name_service.f))}}static{this.\u0275cmp=core.VBU({type:ProfileClaimItemModalComponent2,selectors:[["ds-profile-claim-item-modal"]],inputs:{dso:"dso"},outputs:{create:"create"},standalone:!0,features:[core.Vt3,core.aNF],decls:26,vars:16,consts:[["listEntryElement",""],[1,"modal-header"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],["role","alert",1,"alert","alert-info"],[1,"dropdown-divider"],[1,"scrollable-menu","list-group","container"],[1,"row"],[1,"col-md","mt-2"],[1,"modal-footer"],[1,"me-5"],["type","checkbox",3,"change","checked"],["type","submit",1,"btn","btn-primary","ms-5","me-2",3,"click","dsBtnDisabled"],[1,"fas","fa-plus"],[1,"list-group-item","list-group-item-action","border-0","list-entry",3,"click","title"],[3,"object","viewMode","linkType"]],template:function(rf,ctx){if(1&rf&&(core.j41(0,"div")(1,"div",1)(2,"h4"),core.EFF(3),core.nI1(4,"translate"),core.k0s(),core.j41(5,"button",2),core.bIt("click",function(){return ctx.close()}),core.k0s()(),core.j41(6,"div",3)(7,"div",4),core.EFF(8),core.nI1(9,"translate"),core.k0s(),core.nrm(10,"div",5),core.j41(11,"div",6),core.Z7z(12,ProfileClaimItemModalComponent_For_13_Template,4,4,"div",7,core.fX1),core.nI1(14,"async"),core.j41(15,"div",7),core.nrm(16,"div",8),core.k0s()()(),core.j41(17,"div",9)(18,"div",10)(19,"input",11),core.bIt("change",function(){return ctx.toggleCheckbox()}),core.k0s(),core.EFF(20),core.nI1(21,"translate"),core.k0s(),core.j41(22,"button",12),core.bIt("click",function(){return ctx.createFromScratch()}),core.nrm(23,"i",13),core.EFF(24),core.nI1(25,"translate"),core.k0s()()()),2&rf){let tmp_2_0;core.R7$(3),core.JRh(core.bMT(4,6,"dso-selector.claim.item.head")),core.R7$(5),core.SpI(" ",core.bMT(9,8,"dso-selector.claim.item.body")," "),core.R7$(4),core.Dyx(null==(tmp_2_0=core.bMT(14,10,ctx.listEntries$))?null:tmp_2_0.payload.page),core.R7$(7),core.Y8G("checked",ctx.checked),core.R7$(),core.SpI(" ",core.bMT(21,12,"dso-selector.claim.item.not-mine-label")," "),core.R7$(2),core.Y8G("dsBtnDisabled",!ctx.checked),core.R7$(2),core.SpI(" ",core.bMT(25,14,"dso-selector.claim.item.create-from-scratch")," ")}},dependencies:[common.Jj,btn_disabled_directive.A,listable_object_component_loader_component.v,ngx_translate_core.h,ngx_translate_core.D9],encapsulation:2})}}return ProfileClaimItemModalComponent2})();function ProfilePageResearcherFormComponent_div_0_Conditional_1_Template(rf,ctx){if(1&rf){const _r1=core.RV6();core.j41(0,"div")(1,"p"),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"p",2)(5,"span",3),core.EFF(6),core.nI1(7,"translate"),core.k0s(),core.j41(8,"ui-switch",4),core.nI1(9,"translate"),core.nI1(10,"translate"),core.bIt("change",function(){core.eBV(_r1);const researcherProfile_r2=core.XpG().ngVar,ctx_r2=core.XpG();return core.Njj(ctx_r2.toggleProfileVisibility(researcherProfile_r2))}),core.k0s()()()}if(2&rf){const researcherProfile_r2=core.XpG().ngVar;core.R7$(2),core.JRh(core.bMT(3,5,"researcher.profile.associated")),core.R7$(4),core.JRh(core.bMT(7,7,"researcher.profile.status")),core.R7$(2),core.Y8G("checkedLabel",core.bMT(9,9,"researcher.profile.public.visibility"))("uncheckedLabel",core.bMT(10,11,"researcher.profile.private.visibility"))("checked",researcherProfile_r2.visible)}}function ProfilePageResearcherFormComponent_div_0_Conditional_2_Template(rf,ctx){1&rf&&(core.j41(0,"div")(1,"p"),core.EFF(2),core.nI1(3,"translate"),core.k0s()()),2&rf&&(core.R7$(2),core.JRh(core.bMT(3,1,"researcher.profile.not.associated")))}function ProfilePageResearcherFormComponent_div_0_Conditional_3_Conditional_3_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",6),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"researcher.profile.action.processing")," "))}function ProfilePageResearcherFormComponent_div_0_Conditional_3_Conditional_4_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",7),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" \xa0",core.bMT(3,1,"researcher.profile.create.new")," "))}function ProfilePageResearcherFormComponent_div_0_Conditional_3_Template(rf,ctx){if(1&rf){const _r4=core.RV6();core.SS7(0),core.nI1(1,"async"),core.j41(2,"button",5),core.bIt("click",function(){core.eBV(_r4);const ctx_r2=core.XpG(2);return core.Njj(ctx_r2.createProfile())}),core.DNE(3,ProfilePageResearcherFormComponent_div_0_Conditional_3_Conditional_3_Template,4,3,"span")(4,ProfilePageResearcherFormComponent_div_0_Conditional_3_Conditional_4_Template,4,3,"span"),core.k0s()}if(2&rf){const processingCreate_r5=core.bMT(1,2,core.XpG(2).processingCreate$);core.R7$(2),core.Y8G("dsBtnDisabled",processingCreate_r5),core.R7$(),core.vxM(processingCreate_r5?3:4)}}function ProfilePageResearcherFormComponent_div_0_Conditional_4_Conditional_5_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",6),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" ",core.bMT(3,1,"researcher.profile.action.processing")," "))}function ProfilePageResearcherFormComponent_div_0_Conditional_4_Conditional_7_Template(rf,ctx){1&rf&&(core.j41(0,"span"),core.nrm(1,"i",10),core.EFF(2),core.nI1(3,"translate"),core.k0s()),2&rf&&(core.R7$(2),core.SpI(" \xa0",core.bMT(3,1,"researcher.profile.delete")," "))}function ProfilePageResearcherFormComponent_div_0_Conditional_4_Template(rf,ctx){if(1&rf){const _r6=core.RV6();core.j41(0,"button",5),core.bIt("click",function(){core.eBV(_r6);const researcherProfile_r2=core.XpG().ngVar,ctx_r2=core.XpG();return core.Njj(ctx_r2.viewProfile(researcherProfile_r2))}),core.nrm(1,"i",8),core.EFF(2),core.nI1(3,"translate"),core.k0s(),core.j41(4,"button",9),core.bIt("click",function(){core.eBV(_r6);const researcherProfile_r2=core.XpG().ngVar,ctx_r2=core.XpG();return core.Njj(ctx_r2.deleteProfile(researcherProfile_r2))}),core.DNE(5,ProfilePageResearcherFormComponent_div_0_Conditional_4_Conditional_5_Template,4,3,"span"),core.nI1(6,"async"),core.DNE(7,ProfilePageResearcherFormComponent_div_0_Conditional_4_Conditional_7_Template,4,3,"span"),core.k0s()}if(2&rf){const researcherProfile_r2=core.XpG().ngVar,ctx_r2=core.XpG();core.Y8G("dsBtnDisabled",!researcherProfile_r2),core.R7$(2),core.SpI(" ",core.bMT(3,4,"researcher.profile.view")," "),core.R7$(2),core.Y8G("dsBtnDisabled",!researcherProfile_r2),core.R7$(),core.vxM(core.bMT(6,6,ctx_r2.processingDelete$)?5:7)}}function ProfilePageResearcherFormComponent_div_0_Template(rf,ctx){if(1&rf&&(core.j41(0,"div"),core.DNE(1,ProfilePageResearcherFormComponent_div_0_Conditional_1_Template,11,13,"div")(2,ProfilePageResearcherFormComponent_div_0_Conditional_2_Template,4,3,"div")(3,ProfilePageResearcherFormComponent_div_0_Conditional_3_Template,5,4,"button",1)(4,ProfilePageResearcherFormComponent_div_0_Conditional_4_Template,8,8),core.k0s()),2&rf){const researcherProfile_r2=ctx.ngVar;core.R7$(),core.vxM(researcherProfile_r2?1:-1),core.R7$(),core.vxM(researcherProfile_r2?-1:2),core.R7$(),core.vxM(researcherProfile_r2?-1:3),core.R7$(),core.vxM(researcherProfile_r2?4:-1)}}let ProfilePageResearcherFormComponent=(()=>{class ProfilePageResearcherFormComponent2{constructor(researcherProfileService,profileClaimService,translationService,notificationService,authService,router2,modalService){this.researcherProfileService=researcherProfileService,this.profileClaimService=profileClaimService,this.translationService=translationService,this.notificationService=notificationService,this.authService=authService,this.router=router2,this.modalService=modalService,this.researcherProfile$=new cjs.BehaviorSubject(null),this.processingDelete$=new cjs.BehaviorSubject(!1),this.processingCreate$=new cjs.BehaviorSubject(!1)}ngOnInit(){this.initResearchProfile()}createProfile(){this.processingCreate$.next(!0),this.authService.getAuthenticatedUserFromStore().pipe((0,operators.s)(1),(0,operators.nx)(currentUser=>this.profileClaimService.hasProfilesToSuggest(currentUser))).subscribe(hasProfilesToSuggest=>{if(hasProfilesToSuggest){this.processingCreate$.next(!1);const modal=this.modalService.open(ProfileClaimItemModalComponent);modal.componentInstance.dso=this.user,modal.componentInstance.create.pipe((0,operators.s)(1)).subscribe(()=>{this.createProfileFromScratch()})}else this.createProfileFromScratch()})}viewProfile(researcherProfile){null!=this.researcherProfileItemId&&this.router.navigate(["items",this.researcherProfileItemId])}deleteProfile(researcherProfile){const modalRef=this.modalService.open(confirmation_modal_component.M);modalRef.componentInstance.headerLabel="confirmation-modal.delete-profile.header",modalRef.componentInstance.infoLabel="confirmation-modal.delete-profile.info",modalRef.componentInstance.cancelLabel="confirmation-modal.delete-profile.cancel",modalRef.componentInstance.confirmLabel="confirmation-modal.delete-profile.confirm",modalRef.componentInstance.brandColor="danger",modalRef.componentInstance.confirmIcon="fas fa-trash",modalRef.componentInstance.response.pipe((0,operators.s)(1)).subscribe(confirm=>{confirm&&(this.processingDelete$.next(!0),this.researcherProfileService.delete(researcherProfile.id).pipe((0,shared_operators.qD)(),(0,operators.Tj)(response=>response.isSuccess)).subscribe(deleted=>{deleted&&(this.researcherProfile$.next(null),this.researcherProfileItemId=null),this.processingDelete$.next(!1)}))})}toggleProfileVisibility(researcherProfile){this.researcherProfileService.setVisibility(researcherProfile,!researcherProfile.visible).pipe((0,shared_operators.qD)()).subscribe(rd=>{rd.hasSucceeded?this.researcherProfile$.next(rd.payload):this.notificationService.error(null,this.translationService.get("researcher.profile.change-visibility.fail"))})}createProfileFromScratch(){this.processingCreate$.next(!0),this.researcherProfileService.create().pipe((0,shared_operators.qD)()).subscribe(remoteData=>{this.processingCreate$.next(!1),remoteData.isSuccess?(this.initResearchProfile(),this.notificationService.success(null,this.translationService.get("researcher.profile.create.success"))):this.notificationService.error(null,this.translationService.get("researcher.profile.create.fail"))})}initResearchProfile(){this.researcherProfileService.findById(this.user.id,!1,!0,(0,follow_link_config_model.s)("item")).pipe((0,shared_operators.ak)(),(0,operators.Mi)(researcherProfile=>this.researcherProfile$.next(researcherProfile)),(0,operators.ZZ)(researcherProfile=>this.researcherProfileService.findRelatedItemId(researcherProfile))).subscribe(itemId=>{(0,empty_util.hj)(itemId)&&(this.researcherProfileItemId=itemId)})}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ProfilePageResearcherFormComponent2)(core.rXU(researcher_profile_data_service.ResearcherProfileDataService),core.rXU(ProfileClaimService),core.rXU(ngx_translate_core.c$),core.rXU(notifications_service.I),core.rXU(auth_service.uR),core.rXU(router.Ix),core.rXU(ng_bootstrap.Bq))}}static{this.\u0275cmp=core.VBU({type:ProfilePageResearcherFormComponent2,selectors:[["ds-profile-page-researcher-form"]],inputs:{user:"user"},standalone:!0,features:[core.aNF],decls:2,vars:3,consts:[[4,"ngVar"],[1,"btn","btn-primary","me-2",3,"dsBtnDisabled"],[1,"align-items-center","researcher-profile-switch"],[1,"me-3"],[3,"change","checkedLabel","uncheckedLabel","checked"],[1,"btn","btn-primary","me-2",3,"click","dsBtnDisabled"],[1,"fas","fa-circle-notch","fa-spin"],[1,"fas","fa-plus"],[1,"fas","fa-info-circle"],[1,"btn","btn-danger",3,"click","dsBtnDisabled"],[1,"fas","fa-trash-alt"]],template:function(rf,ctx){1&rf&&(core.DNE(0,ProfilePageResearcherFormComponent_div_0_Template,5,4,"div",0),core.nI1(1,"async")),2&rf&&core.Y8G("ngVar",core.bMT(1,1,ctx.researcherProfile$))},dependencies:[common.Jj,btn_disabled_directive.A,ngx_translate_core.h,ngx_translate_core.D9,ngx_ui_switch.z,ngx_ui_switch.S,var_directive.r],encapsulation:2})}}return ProfilePageResearcherFormComponent2})()},58527:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ROUTES:()=>ROUTES});var i18n_breadcrumb_resolver=__webpack_require__(12213),themed_component=__webpack_require__(79241),core=(__webpack_require__(27199),__webpack_require__(25376));const _c0=["*"];function ThemedProfilePageComponent_ng_template_0_Template(rf,ctx){}const ROUTES=[{path:"",pathMatch:"full",component:(()=>{class ThemedProfilePageComponent2 extends themed_component.J{getComponentName(){return"ProfilePageComponent"}importThemedComponent(themeName){return __webpack_require__(86930)(`./${themeName}/app/profile-page/profile-page.component`)}importUnthemedComponent(){return Promise.resolve().then(__webpack_require__.bind(__webpack_require__,27199))}static{this.\u0275fac=(()=>{let \u0275ThemedProfilePageComponent_BaseFactory;return function(__ngFactoryType__){return(\u0275ThemedProfilePageComponent_BaseFactory||(\u0275ThemedProfilePageComponent_BaseFactory=core.xGo(ThemedProfilePageComponent2)))(__ngFactoryType__||ThemedProfilePageComponent2)}})()}static{this.\u0275cmp=core.VBU({type:ThemedProfilePageComponent2,selectors:[["ds-profile-page"]],standalone:!0,features:[core.Vt3,core.aNF],ngContentSelectors:_c0,decls:5,vars:0,consts:[["vcr",""],["content",""]],template:function(rf,ctx){1&rf&&(core.NAR(),core.DNE(0,ThemedProfilePageComponent_ng_template_0_Template,0,0,"ng-template",null,0,core.C5r),core.j41(2,"div",null,1),core.SdG(4),core.k0s())},encapsulation:2})}}return ThemedProfilePageComponent2})(),resolve:{breadcrumb:i18n_breadcrumb_resolver.S},data:{breadcrumbKey:"profile",title:"profile.title"}}]},31535:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{q:()=>ProfilePageSecurityFormComponent});var _angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(25376),_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(19519),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(2385),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(60444),_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(15318),_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(39022),_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(6213),_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(2794),_shared_form_form_component__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(27790),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(76623);function ProfilePageSecurityFormComponent_Conditional_3_Template(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_5__.nrm(0,"ds-form",1),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("formId",ctx_r0.FORM_PREFIX)("formModel",ctx_r0.formModel)("formGroup",ctx_r0.formGroup)("displaySubmit",!1)("displayCancel",!1)}}function ProfilePageSecurityFormComponent_Conditional_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(0,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(2,1,ctx_r0.FORM_PREFIX+"error.matching-passwords"))}}function ProfilePageSecurityFormComponent_Conditional_5_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(0,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_5__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(2,1,ctx_r0.FORM_PREFIX+"error.empty-password"))}}let ProfilePageSecurityFormComponent=(()=>{class ProfilePageSecurityFormComponent2{constructor(formService,translate,epersonService,notificationsService){this.formService=formService,this.translate=translate,this.epersonService=epersonService,this.notificationsService=notificationsService,this.isInvalid=new _angular_core__WEBPACK_IMPORTED_MODULE_5__.bkB,this.passwordValue=new _angular_core__WEBPACK_IMPORTED_MODULE_5__.bkB,this.currentPasswordValue=new _angular_core__WEBPACK_IMPORTED_MODULE_5__.bkB,this.formModel=[new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__.rA_({id:"password",name:"password",inputType:"password",autoComplete:"new-password"}),new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__.rA_({id:"passwordrepeat",name:"passwordrepeat",inputType:"password",autoComplete:"new-password"})],this.passwordCanBeEmpty=!0,this.subs=[]}ngOnInit(){"profile.security.form."===this.FORM_PREFIX&&this.formModel.unshift(new _ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__.rA_({id:"current-password",name:"current-password",inputType:"password",required:!0,autoComplete:"current-password"})),this.formGroup=this.formService.createFormGroup(this.formModel,this.passwordCanBeEmpty?{validators:[this.checkPasswordsEqual]}:{validators:[this.checkPasswordsEqual,this.checkPasswordEmpty]}),this.updateFieldTranslations(),this.translate.onLangChange.subscribe(()=>{this.updateFieldTranslations()}),this.subs.push(this.formGroup.statusChanges.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.F3)(300),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.Tj)(status=>"VALID"!==status)).subscribe(status=>this.isInvalid.emit(status))),this.subs.push(this.formGroup.valueChanges.pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_1__.F3)(300)).subscribe(valueChange=>{this.passwordValue.emit(valueChange.password),"profile.security.form."===this.FORM_PREFIX&&this.currentPasswordValue.emit(valueChange["current-password"])}))}updateFieldTranslations(){this.formModel.forEach(fieldModel=>{fieldModel.label=this.translate.instant(this.FORM_PREFIX+"label."+fieldModel.id)})}checkPasswordsEqual(group){return group.get("password").value===group.get("passwordrepeat").value?null:{notSame:!0}}checkPasswordEmpty(group){const pass=group.get("password").value;return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.Im)(pass)?{emptyPassword:!0}:null}ngOnDestroy(){this.subs.filter(sub=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_8__.a4)(sub)).forEach(sub=>sub.unsubscribe())}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ProfilePageSecurityFormComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_ng_dynamic_forms_core__WEBPACK_IMPORTED_MODULE_6__.J9r),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_0__.EPersonDataService),_angular_core__WEBPACK_IMPORTED_MODULE_5__.rXU(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_4__.I))}}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_5__.VBU({type:ProfilePageSecurityFormComponent2,selectors:[["ds-profile-page-security-form"]],inputs:{passwordCanBeEmpty:"passwordCanBeEmpty",FORM_PREFIX:"FORM_PREFIX"},outputs:{isInvalid:"isInvalid",passwordValue:"passwordValue",currentPasswordValue:"currentPasswordValue"},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_5__.aNF],decls:6,vars:7,consts:[[1,"mb-4",3,"type"],[3,"formId","formModel","formGroup","displaySubmit","displayCancel"],["id","notSame",1,"container-fluid","text-danger"],["id","emptyPassword",1,"container-fluid","text-danger"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.j41(0,"ds-alert",0),_angular_core__WEBPACK_IMPORTED_MODULE_5__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.nI1(2,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.DNE(3,ProfilePageSecurityFormComponent_Conditional_3_Template,1,5,"ds-form",1)(4,ProfilePageSecurityFormComponent_Conditional_4_Template,3,3,"div",2)(5,ProfilePageSecurityFormComponent_Conditional_5_Template,3,3,"div",3)),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y8G("type","alert-info"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_5__.bMT(2,5,ctx.FORM_PREFIX+"info")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.vxM(ctx.formModel?3:-1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.vxM(ctx.formGroup.hasError("notSame")?4:-1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.vxM((ctx.formGroup.dirty||ctx.formGroup.touched)&&ctx.formGroup.hasError("emptyPassword")?5:-1))},dependencies:[_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_2__.C,_shared_form_form_component__WEBPACK_IMPORTED_MODULE_3__.s,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_9__.D9],encapsulation:2})}}return ProfilePageSecurityFormComponent2})()},27199:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ProfilePageComponent:()=>ProfilePageComponent});var _angular_common__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(87514),_angular_router__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(18134),_ngx_translate_core__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(2385),rxjs__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(9238),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(60444),_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(54545),_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(11481),_core_data_configuration_data_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(93876),_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(76509),_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(86583),_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(15318),_core_pagination_pagination_service__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(31903),_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(39022),_notifications_suggestions_notification_suggestions_notification_component__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(78346),_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(6213),_shared_empty_util__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(2794),_shared_error_error_component__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(17561),_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(18869),_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(76623),_shared_pagination_pagination_component__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(42191),_shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(54396),_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(76715),_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(17543),_profile_page_metadata_form_themed_profile_page_metadata_form_component__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(12313),_profile_page_researcher_form_profile_page_researcher_form_component__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(38454),_profile_page_security_form_profile_page_security_form_component__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(31535),_angular_core__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(25376);function ProfilePageComponent_ng_container_0_Conditional_1_Conditional_4_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"div",4)(1,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(4,"div",6)(5,"div",14),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nrm(6,"ds-profile-page-researcher-form",7),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nrm(7,"ds-suggestions-notification"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()()),2&rf){const user_r2=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG(2).ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(3,2,"profile.card.researcher")),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("user",user_r2)}}function ProfilePageComponent_ng_container_0_Conditional_1_Conditional_12_Template(rf,ctx){if(1&rf){const _r3=_angular_core__WEBPACK_IMPORTED_MODULE_17__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"div",8)(1,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(4,"div",6)(5,"ds-profile-page-security-form",15),_angular_core__WEBPACK_IMPORTED_MODULE_17__.bIt("isInvalid",function($event){_angular_core__WEBPACK_IMPORTED_MODULE_17__.eBV(_r3);const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG(3);return _angular_core__WEBPACK_IMPORTED_MODULE_17__.Njj(ctx_r3.setInvalid($event))})("passwordValue",function($event){_angular_core__WEBPACK_IMPORTED_MODULE_17__.eBV(_r3);const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG(3);return _angular_core__WEBPACK_IMPORTED_MODULE_17__.Njj(ctx_r3.setPasswordValue($event))})("currentPasswordValue",function($event){_angular_core__WEBPACK_IMPORTED_MODULE_17__.eBV(_r3);const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG(3);return _angular_core__WEBPACK_IMPORTED_MODULE_17__.Njj(ctx_r3.setCurrentPasswordValue($event))}),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()()()}2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(3,2,"profile.card.security")),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("FORM_PREFIX","profile.security.form."))}function ProfilePageComponent_ng_container_0_Conditional_1_Conditional_30_ng_container_0_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_17__.eu8(0)}function ProfilePageComponent_ng_container_0_Conditional_1_Conditional_30_ng_template_1_Conditional_0_Conditional_1_Conditional_0_For_6_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"li",21),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()),2&rf){const group_r5=ctx.$implicit,ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG(8);_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.JRh(ctx_r3.dsoNameService.getName(group_r5))}}function ProfilePageComponent_ng_container_0_Conditional_1_Conditional_30_ng_template_1_Conditional_0_Conditional_1_Conditional_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"div")(1,"h2",19),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(4,"ul",20),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Z7z(5,ProfilePageComponent_ng_container_0_Conditional_1_Conditional_30_ng_template_1_Conditional_0_Conditional_1_Conditional_0_For_6_Template,2,1,"li",21,_angular_core__WEBPACK_IMPORTED_MODULE_17__.fX1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()()),2&rf){const groups_r6=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(3,1,"profile.groups.head")),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Dyx(groups_r6)}}function ProfilePageComponent_ng_container_0_Conditional_1_Conditional_30_ng_template_1_Conditional_0_Conditional_1_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(0,ProfilePageComponent_ng_container_0_Conditional_1_Conditional_30_ng_template_1_Conditional_0_Conditional_1_Conditional_0_Template,7,3,"div"),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_17__.vxM((null==ctx?null:ctx.length)>0?0:-1)}function ProfilePageComponent_ng_container_0_Conditional_1_Conditional_30_ng_template_1_Conditional_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"ds-pagination",18),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(1,ProfilePageComponent_ng_container_0_Conditional_1_Conditional_30_ng_template_1_Conditional_0_Conditional_1_Template,1,1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()),2&rf){let tmp_14_0;const groupsRD_r7=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG(2),ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG(3);_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("hideGear",!0)("hidePagerWhenSinglePage",!0)("hidePaginationDetail",!0)("paginationOptions",ctx_r3.optionsGroupsPagination)("collectionSize",null==groupsRD_r7||null==groupsRD_r7.payload?null:groupsRD_r7.payload.totalElements),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.vxM((tmp_14_0=null==groupsRD_r7||null==groupsRD_r7.payload?null:groupsRD_r7.payload.page)?1:-1,tmp_14_0)}}function ProfilePageComponent_ng_container_0_Conditional_1_Conditional_30_ng_template_1_Template(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(0,ProfilePageComponent_ng_container_0_Conditional_1_Conditional_30_ng_template_1_Conditional_0_Template,2,6,"ds-pagination",18),2&rf){const groupsRD_r7=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_17__.vxM(null!=groupsRD_r7&&groupsRD_r7.payload?0:-1)}}function ProfilePageComponent_ng_container_0_Conditional_1_Conditional_30_ng_template_3_Template(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_17__.nrm(0,"ds-loading",22),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("showMessage",!1)}function ProfilePageComponent_ng_container_0_Conditional_1_Conditional_30_Conditional_5_Template(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.nrm(0,"ds-error",17),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(1,"translate")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_17__.FS9("message",_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(1,1,"error.profile-groups"))}function ProfilePageComponent_ng_container_0_Conditional_1_Conditional_30_Template(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(0,ProfilePageComponent_ng_container_0_Conditional_1_Conditional_30_ng_container_0_Template,1,0,"ng-container",16)(1,ProfilePageComponent_ng_container_0_Conditional_1_Conditional_30_ng_template_1_Template,1,1,"ng-template",null,0,_angular_core__WEBPACK_IMPORTED_MODULE_17__.C5r)(3,ProfilePageComponent_ng_container_0_Conditional_1_Conditional_30_ng_template_3_Template,1,1,"ng-template",null,1,_angular_core__WEBPACK_IMPORTED_MODULE_17__.C5r)(5,ProfilePageComponent_ng_container_0_Conditional_1_Conditional_30_Conditional_5_Template,2,3,"ds-error",17),2&rf){const groupsRD_r7=ctx,content_r8=_angular_core__WEBPACK_IMPORTED_MODULE_17__.sdS(2),loader_r9=_angular_core__WEBPACK_IMPORTED_MODULE_17__.sdS(4);_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngTemplateOutlet",null!=groupsRD_r7&&groupsRD_r7.isLoading?loader_r9:content_r8),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.vxM(null!=groupsRD_r7&&groupsRD_r7.hasFailed?5:-1)}}function ProfilePageComponent_ng_container_0_Conditional_1_ng_container_32_Conditional_1_For_6_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"li",21),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()),2&rf){const specialGroup_r10=ctx.$implicit,ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG(5);_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.SpI(" ",ctx_r3.dsoNameService.getName(specialGroup_r10)," ")}}function ProfilePageComponent_ng_container_0_Conditional_1_ng_container_32_Conditional_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"div",23)(1,"h2",19),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(4,"ul",20),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Z7z(5,ProfilePageComponent_ng_container_0_Conditional_1_ng_container_32_Conditional_1_For_6_Template,2,1,"li",21,_angular_core__WEBPACK_IMPORTED_MODULE_17__.fX1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()()),2&rf){const specialGroups_r11=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG().ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(3,1,"profile.special.groups.head")),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Dyx(specialGroups_r11)}}function ProfilePageComponent_ng_container_0_Conditional_1_ng_container_32_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.qex(0),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(1,ProfilePageComponent_ng_container_0_Conditional_1_ng_container_32_Conditional_1_Template,7,3,"div",23),_angular_core__WEBPACK_IMPORTED_MODULE_17__.bVm()),2&rf){const specialGroups_r11=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.vxM((null==specialGroups_r11?null:specialGroups_r11.length)>0?1:-1)}}function ProfilePageComponent_ng_container_0_Conditional_1_Template(rf,ctx){if(1&rf){const _r1=_angular_core__WEBPACK_IMPORTED_MODULE_17__.RV6();_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(0,"div",3)(1,"h1"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(3,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(4,ProfilePageComponent_ng_container_0_Conditional_1_Conditional_4_Template,8,4,"div",4),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(5,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(6,"div",4)(7,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(8),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(9,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(10,"div",6),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nrm(11,"ds-profile-page-metadata-form",7),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(12,ProfilePageComponent_ng_container_0_Conditional_1_Conditional_12_Template,6,4,"div",8),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(13,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(14,"div",9)(15,"button",10),_angular_core__WEBPACK_IMPORTED_MODULE_17__.bIt("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_17__.eBV(_r1);const ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG(2);return _angular_core__WEBPACK_IMPORTED_MODULE_17__.Njj(ctx_r3.updateProfile())}),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nrm(16,"i",11),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(17),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(18,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(19,"div",4)(20,"div",5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(21),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(22,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(23,"div",6)(24,"ds-alert",12),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(25),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(26,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.j41(27,"a",13),_angular_core__WEBPACK_IMPORTED_MODULE_17__.EFF(28),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(29,"translate"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()()(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(30,ProfilePageComponent_ng_container_0_Conditional_1_Conditional_30_Template,6,2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(31,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(32,ProfilePageComponent_ng_container_0_Conditional_1_ng_container_32_Template,2,1,"ng-container",2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(33,"async"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.k0s()}if(2&rf){let tmp_14_0,tmp_15_0;const user_r2=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG().ngVar,ctx_r3=_angular_core__WEBPACK_IMPORTED_MODULE_17__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(3,13,"profile.title")),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.vxM(_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(5,15,ctx_r3.isResearcherProfileEnabled$)?4:-1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_17__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(9,17,"profile.card.identify")),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("user",user_r2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.vxM(_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(13,19,ctx_r3.canChangePassword$)?12:-1),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(5),_angular_core__WEBPACK_IMPORTED_MODULE_17__.SpI(" ",_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(18,21,"profile.form.submit"),""),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(4),_angular_core__WEBPACK_IMPORTED_MODULE_17__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(22,23,"profile.card.accessibility.header")),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(3),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("type","alert-info"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(26,25,"profile.card.accessibility.content")),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("routerLink","/info/accessibility"),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.JRh(_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(29,27,"profile.card.accessibility.link")),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.vxM((tmp_14_0=_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(31,29,ctx_r3.groupsRD$))?30:-1,tmp_14_0),_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngVar",null==(tmp_15_0=_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(33,31,ctx_r3.specialGroupsRD$))||null==tmp_15_0.payload?null:tmp_15_0.payload.page)}}function ProfilePageComponent_ng_container_0_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.qex(0),_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(1,ProfilePageComponent_ng_container_0_Conditional_1_Template,34,33,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_17__.bVm()),2&rf){const user_r2=ctx.ngVar;_angular_core__WEBPACK_IMPORTED_MODULE_17__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_17__.vxM(user_r2?1:-1)}}let ProfilePageComponent=(()=>{class ProfilePageComponent2{constructor(authService,notificationsService,translate,epersonService,authorizationService,configurationService,dsoNameService,paginationService){this.authService=authService,this.notificationsService=notificationsService,this.translate=translate,this.epersonService=epersonService,this.authorizationService=authorizationService,this.configurationService=configurationService,this.dsoNameService=dsoNameService,this.paginationService=paginationService,this.NOTIFICATIONS_PREFIX="profile.notifications.",this.PASSWORD_NOTIFICATIONS_PREFIX="profile.security.form.notifications.",this.optionsGroupsPagination=Object.assign(new _shared_pagination_pagination_component_options_model__WEBPACK_IMPORTED_MODULE_18__.W,{id:"page_groups",currentPage:1,pageSize:20}),this.isResearcherProfileEnabled$=new rxjs__WEBPACK_IMPORTED_MODULE_19__.BehaviorSubject(!1)}ngOnInit(){this.user$=this.authService.getAuthenticatedUserFromStore().pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.pb)(user=>(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_21__.a4)(user.id)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.nx)(user=>this.epersonService.findById(user.id,!0,!0,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_22__.s)("groups"))),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__.v7)(),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__.Bo)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.Mi)(user=>this.currentUser=user)),this.groupsRD$=this.paginationService.getCurrentPagination(this.optionsGroupsPagination.id,this.optionsGroupsPagination).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.nx)(pageOptions=>this.epersonService.findById(this.currentUser.id,!0,!0,(0,_shared_utils_follow_link_config_model__WEBPACK_IMPORTED_MODULE_22__.s)("groups",{findListOptions:{elementsPerPage:pageOptions.pageSize,currentPage:pageOptions.currentPage}}))),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__.bD)(),(0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__.Bo)(),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.nx)(user=>user?.groups)),this.canChangePassword$=this.user$.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.nx)(user=>this.authorizationService.isAuthorized(_core_data_feature_authorization_feature_id__WEBPACK_IMPORTED_MODULE_4__._.CanChangePassword,user._links.self.href))),this.specialGroupsRD$=this.authService.getSpecialGroupsFromAuthStatus(),this.configurationService.findByPropertyName("researcher-profile.entity-type").pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__.qD)()).subscribe(configRD=>{this.isResearcherProfileEnabled$.next(configRD.hasSucceeded&&configRD.payload.values.length>0)})}updateProfile(){const metadataChanged=this.metadataForm.compRef.instance.updateProfile(),securityChanged=this.updateSecurity();!metadataChanged&&!securityChanged&&this.notificationsService.warning(this.translate.instant(this.NOTIFICATIONS_PREFIX+"warning.no-changes.title"),this.translate.instant(this.NOTIFICATIONS_PREFIX+"warning.no-changes.content"))}setInvalid($event){this.invalidSecurity=$event}updateSecurity(){const passEntered=(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_21__.hj)(this.password);return(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_21__.hj)(this.currentPassword)&&!passEntered&&this.notificationsService.error(this.translate.instant(this.PASSWORD_NOTIFICATIONS_PREFIX+"error.general")),!this.invalidSecurity&&passEntered&&this.epersonService.patch(this.currentUser,[{op:"add",path:"/password",value:{new_password:this.password,current_password:this.currentPassword}}]).pipe((0,_core_shared_operators__WEBPACK_IMPORTED_MODULE_7__.qD)()).subscribe(response=>{response.hasSucceeded?this.notificationsService.success(this.translate.instant(this.PASSWORD_NOTIFICATIONS_PREFIX+"success.title"),this.translate.instant(this.PASSWORD_NOTIFICATIONS_PREFIX+"success.content")):this.notificationsService.error(this.translate.instant(this.PASSWORD_NOTIFICATIONS_PREFIX+"error.title"),this.getPasswordErrorMessage(response))}),passEntered}setPasswordValue($event){this.password=$event}setCurrentPasswordValue($event){this.currentPassword=$event}submit(){this.updateProfile()}getPasswordErrorMessage(response){return response.hasFailed&&(0,_shared_empty_util__WEBPACK_IMPORTED_MODULE_21__.hj)(response.errorMessage)?this.translate.instant(response.errorMessage):this.translate.instant(this.PASSWORD_NOTIFICATIONS_PREFIX+"error.change-failed")}static{this.\u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||ProfilePageComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_core_auth_auth_service__WEBPACK_IMPORTED_MODULE_0__.uR),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_shared_notifications_notifications_service__WEBPACK_IMPORTED_MODULE_12__.I),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_ngx_translate_core__WEBPACK_IMPORTED_MODULE_23__.c$),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_core_eperson_eperson_data_service__WEBPACK_IMPORTED_MODULE_5__.EPersonDataService),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_core_data_feature_authorization_authorization_data_service__WEBPACK_IMPORTED_MODULE_3__.AuthorizationDataService),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_core_data_configuration_data_service__WEBPACK_IMPORTED_MODULE_2__.ConfigurationDataService),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_core_breadcrumbs_dso_name_service__WEBPACK_IMPORTED_MODULE_1__.f),_angular_core__WEBPACK_IMPORTED_MODULE_17__.rXU(_core_pagination_pagination_service__WEBPACK_IMPORTED_MODULE_6__.m))}}static{this.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_17__.VBU({type:ProfilePageComponent2,selectors:[["ds-base-profile-page"]],viewQuery:function(rf,ctx){if(1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_17__.GBs(_profile_page_metadata_form_themed_profile_page_metadata_form_component__WEBPACK_IMPORTED_MODULE_14__.O,5),2&rf){let _t;_angular_core__WEBPACK_IMPORTED_MODULE_17__.mGM(_t=_angular_core__WEBPACK_IMPORTED_MODULE_17__.lsd())&&(ctx.metadataForm=_t.first)}},standalone:!0,features:[_angular_core__WEBPACK_IMPORTED_MODULE_17__.aNF],decls:2,vars:3,consts:[["content",""],["loader",""],[4,"ngVar"],[1,"container"],[1,"card","mb-4"],[1,"card-header"],[1,"card-body"],[3,"user"],[1,"card","mb-4","security-section"],[1,"col-12","text-end","pe-0"],[1,"btn","btn-primary",3,"click"],[1,"fas","fa-edit"],[1,"mb-4",3,"type"],[3,"routerLink"],[1,"mb-4"],[3,"isInvalid","passwordValue","currentPasswordValue","FORM_PREFIX"],[4,"ngTemplateOutlet"],[3,"message"],[3,"hideGear","hidePagerWhenSinglePage","hidePaginationDetail","paginationOptions","collectionSize"],[1,"mt-4"],[1,"list-group","list-group-flush"],[1,"list-group-item"],[3,"showMessage"],["data-test","specialGroups"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_17__.DNE(0,ProfilePageComponent_ng_container_0_Template,2,1,"ng-container",2),_angular_core__WEBPACK_IMPORTED_MODULE_17__.nI1(1,"async")),2&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_17__.Y8G("ngVar",_angular_core__WEBPACK_IMPORTED_MODULE_17__.bMT(1,1,ctx.user$))},dependencies:[_shared_alert_alert_component__WEBPACK_IMPORTED_MODULE_9__.C,_angular_common__WEBPACK_IMPORTED_MODULE_24__.Jj,_shared_error_error_component__WEBPACK_IMPORTED_MODULE_10__.A,_angular_common__WEBPACK_IMPORTED_MODULE_24__.T3,_shared_pagination_pagination_component__WEBPACK_IMPORTED_MODULE_13__.e,_profile_page_researcher_form_profile_page_researcher_form_component__WEBPACK_IMPORTED_MODULE_15__.g,_profile_page_security_form_profile_page_security_form_component__WEBPACK_IMPORTED_MODULE_16__.q,_angular_router__WEBPACK_IMPORTED_MODULE_25__.iI,_angular_router__WEBPACK_IMPORTED_MODULE_25__.Wk,_notifications_suggestions_notification_suggestions_notification_component__WEBPACK_IMPORTED_MODULE_8__.w,_shared_loading_themed_loading_component__WEBPACK_IMPORTED_MODULE_11__.v,_profile_page_metadata_form_themed_profile_page_metadata_form_component__WEBPACK_IMPORTED_MODULE_14__.O,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_23__.h,_ngx_translate_core__WEBPACK_IMPORTED_MODULE_23__.D9,_shared_utils_var_directive__WEBPACK_IMPORTED_MODULE_26__.r]})}}return ProfilePageComponent2})()},46020:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/profile-page/profile-page-metadata-form/profile-page-metadata-form.component":[60968,968]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=46020,module.exports=webpackAsyncContext},86930:(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./custom/app/profile-page/profile-page.component":[49920,9920]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return __webpack_require__.e(ids[1]).then(()=>__webpack_require__(id))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id=86930,module.exports=webpackAsyncContext},53359:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{S:()=>UiSwitchComponent,z:()=>UiSwitchModule});var _angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(25376),_angular_forms__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(13054),_angular_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(87514);const _c0=["*"];function UiSwitchComponent_label_1_Template(rf,ctx){if(1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.j41(0,"label",2)(1,"span",3),_angular_core__WEBPACK_IMPORTED_MODULE_0__.EFF(2),_angular_core__WEBPACK_IMPORTED_MODULE_0__.k0s(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.j41(3,"span",4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.EFF(4),_angular_core__WEBPACK_IMPORTED_MODULE_0__.k0s()()),2&rf){const ctx_r0=_angular_core__WEBPACK_IMPORTED_MODULE_0__.XpG();_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc7("color",ctx_r0.getColor("checkedTextColor")),_angular_core__WEBPACK_IMPORTED_MODULE_0__.BMQ("aria-label",ctx_r0.checkedLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.JRh(ctx_r0.checkedLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc7("color",ctx_r0.getColor("uncheckedTextColor")),_angular_core__WEBPACK_IMPORTED_MODULE_0__.BMQ("aria-label",ctx_r0.uncheckedLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.JRh(ctx_r0.uncheckedLabel)}}const UI_SWITCH_OPTIONS=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.nKC("UI_SWITCH_OPTIONS"),UI_SWITCH_CONTROL_VALUE_ACCESSOR={provide:_angular_forms__WEBPACK_IMPORTED_MODULE_1__.kq,useExisting:(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Rfq)(()=>UiSwitchComponent),multi:!0};let UiSwitchComponent=(()=>{class UiSwitchComponent2{cdr;_checked;_disabled;_reverse;_loading;_beforeChange;size;color;switchOffColor;switchColor;defaultBgColor;defaultBoColor;checkedLabel;uncheckedLabel;checkedTextColor;uncheckedTextColor;beforeChange;ariaLabel;set checked(v){this._checked=!1!==v}get checked(){return this._checked}set disabled(v){this._disabled=!1!==v}get disabled(){return this._disabled}set reverse(v){this._reverse=!1!==v}get reverse(){return this._reverse}set loading(v){this._loading=!1!==v}get loading(){return this._loading}change=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.bkB;changeEvent=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.bkB;valueChange=new _angular_core__WEBPACK_IMPORTED_MODULE_0__.bkB;constructor(config={},cdr){this.cdr=cdr,this.size=config&&config.size||"medium",this.color=config&&config.color,this.switchOffColor=config&&config.switchOffColor,this.switchColor=config&&config.switchColor,this.defaultBgColor=config&&config.defaultBgColor,this.defaultBoColor=config&&config.defaultBoColor,this.checkedLabel=config&&config.checkedLabel,this.uncheckedLabel=config&&config.uncheckedLabel,this.checkedTextColor=config&&config.checkedTextColor,this.uncheckedTextColor=config&&config.uncheckedTextColor}getColor(flag=""){return"borderColor"===flag?this.defaultBoColor:"switchColor"===flag?this.reverse?this.checked&&this.switchOffColor||this.switchColor:this.checked?this.switchColor:this.switchOffColor||this.switchColor:"checkedTextColor"===flag?this.reverse?this.uncheckedTextColor:this.checkedTextColor:"uncheckedTextColor"===flag?this.reverse?this.checkedTextColor:this.uncheckedTextColor:this.reverse?this.checked?this.defaultBgColor:this.color:this.checked?this.color:this.defaultBgColor}onClick(event){this.disabled||(this.checked=!this.checked,this.change.emit(this.checked),this.valueChange.emit(this.checked),this.changeEvent.emit(event),this.onChangeCallback(this.checked),this.onTouchedCallback(this.checked),this.cdr.markForCheck())}onToggle(event){this.disabled||(this.beforeChange?this._beforeChange=this.beforeChange.subscribe(confirm=>{confirm&&this.onClick(event)}):this.onClick(event))}writeValue(obj){obj!==this.checked&&(this.checked=!!obj),this.onChangeCallback(this.checked),this.cdr&&this.cdr.markForCheck()}registerOnChange(fn){this.onChangeCallback=fn}registerOnTouched(fn){this.onTouchedCallback=fn}setDisabledState(isDisabled){this.disabled=isDisabled}onTouchedCallback=v=>{};onChangeCallback=v=>{};ngOnDestroy(){this._beforeChange&&this._beforeChange.unsubscribe()}static \u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||UiSwitchComponent2)(_angular_core__WEBPACK_IMPORTED_MODULE_0__.rXU(UI_SWITCH_OPTIONS,8),_angular_core__WEBPACK_IMPORTED_MODULE_0__.rXU(_angular_core__WEBPACK_IMPORTED_MODULE_0__.gRc))};static \u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_0__.VBU({type:UiSwitchComponent2,selectors:[["ui-switch"]],hostBindings:function(rf,ctx){1&rf&&_angular_core__WEBPACK_IMPORTED_MODULE_0__.bIt("click",function($event){return ctx.onToggle($event)})},inputs:{size:"size",color:"color",switchOffColor:"switchOffColor",switchColor:"switchColor",defaultBgColor:"defaultBgColor",defaultBoColor:"defaultBoColor",checkedLabel:"checkedLabel",uncheckedLabel:"uncheckedLabel",checkedTextColor:"checkedTextColor",uncheckedTextColor:"uncheckedTextColor",beforeChange:"beforeChange",ariaLabel:"ariaLabel",checked:"checked",disabled:"disabled",reverse:"reverse",loading:"loading"},outputs:{change:"change",changeEvent:"changeEvent",valueChange:"valueChange"},features:[_angular_core__WEBPACK_IMPORTED_MODULE_0__.Jv_([UI_SWITCH_CONTROL_VALUE_ACCESSOR])],ngContentSelectors:_c0,decls:4,vars:21,consts:[["type","button","role","switch",1,"switch"],["class","switch-pane",4,"ngIf"],[1,"switch-pane"],[1,"switch-label-checked"],[1,"switch-label-unchecked"]],template:function(rf,ctx){1&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.NAR(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.j41(0,"button",0),_angular_core__WEBPACK_IMPORTED_MODULE_0__.DNE(1,UiSwitchComponent_label_1_Template,5,8,"label",1),_angular_core__WEBPACK_IMPORTED_MODULE_0__.j41(2,"small"),_angular_core__WEBPACK_IMPORTED_MODULE_0__.SdG(3),_angular_core__WEBPACK_IMPORTED_MODULE_0__.k0s()()),2&rf&&(_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc7("background-color",ctx.getColor())("border-color",ctx.getColor("borderColor")),_angular_core__WEBPACK_IMPORTED_MODULE_0__.AVh("checked",ctx.checked)("disabled",ctx.disabled)("loading",ctx.loading)("switch-large","large"===ctx.size)("switch-medium","medium"===ctx.size)("switch-small","small"===ctx.size),_angular_core__WEBPACK_IMPORTED_MODULE_0__.BMQ("aria-checked",ctx.checked)("aria-label",ctx.ariaLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.Y8G("ngIf",ctx.checkedLabel||ctx.uncheckedLabel),_angular_core__WEBPACK_IMPORTED_MODULE_0__.R7$(),_angular_core__WEBPACK_IMPORTED_MODULE_0__.xc7("background",ctx.getColor("switchColor")))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.bT],encapsulation:2})}return UiSwitchComponent2})(),UiSwitchModule=(()=>{class UiSwitchModule2{static forRoot(config){return{ngModule:UiSwitchModule2,providers:[{provide:UI_SWITCH_OPTIONS,useValue:config||{}}]}}static \u0275fac=function(__ngFactoryType__){return new(__ngFactoryType__||UiSwitchModule2)};static \u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_0__.$C({type:UiSwitchModule2});static \u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_0__.G2t({imports:[_angular_common__WEBPACK_IMPORTED_MODULE_2__.MD,_angular_forms__WEBPACK_IMPORTED_MODULE_1__.YN,_angular_forms__WEBPACK_IMPORTED_MODULE_1__.YN]})}return UiSwitchModule2})()}};